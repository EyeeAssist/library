(()=>{"use strict";class t{constructor(){this.hasInsertedAccess=!1,this.active_filter=!1,this.colorBlindnessClasses=["protanopia","protanomaly","deuteranopia","deuteranomaly","tritanopia","tritanomaly","achromatopsia","achromatomaly","grayscale"],this.visionClasses=["vision-loss-moderate","vision-loss-severe","vision-blindness"],this.cssFilter="\n  <style>.protanopia{-webkit-filter:url(#protanopia) grayscale(0)!important;filter:url(#protanopia) grayscale(0)!important}.protanomaly{-webkit-filter:url(#protanomaly) grayscale(0)!important;filter:url(#protanomaly) grayscale(0)!important}.deuteranopia{-webkit-filter:url(#deuteranopia) grayscale(0)!important;filter:url(#deuteranopia) grayscale(0)!important}.deuteranomaly{-webkit-filter:url(#deuteranomaly) grayscale(0)!important;filter:url(#deuteranomaly) grayscale(0)!important}.tritanopia{-webkit-filter:url(#tritanopia) grayscale(0)!important;filter:url(#tritanopia) grayscale(0)!important}.tritanomaly{-webkit-filter:url(#tritanomaly) grayscale(0)!important;filter:url(#tritanomaly) grayscale(0)!important}.achromatopsia{-webkit-filter:url(#achromatopsia) grayscale(0)!important;filter:url(#achromatopsia) grayscale(0)!important}.achromatomaly{-webkit-filter:url(#achromatomaly) grayscale(0)!important;filter:url(#achromatomaly) grayscale(0)!important}.grayscale{-webkit-filter:grayscale(100%)!important;filter:grayscale(100%)!important}.vision-loss-moderate body>*{-webkit-filter:blur(1px)!important;filter:blur(1px)!important}.vision-loss-severe body>*{-webkit-filter:blur(10px)!important;filter:blur(10px)!important}.vision-blindness body>*{background-color:#fff!important;-webkit-filter:brightness(0)!important;filter:brightness(0)!important}#access-filter{border:0;clip:rect(1px,1px,1px,1px);-webkit-clip-path:inset(50%);clip-path:inset(50%);height:1px;margin:-1px;width:1px;overflow:hidden;position:absolute!important;word-wrap:normal!important}</style>",this.svgFilterTemplate='<svg \n  id="access-filter"\n  aria-hidden="true"\n  xmlns="http://www.w3.org/2000/svg"\n  version="1.1">\n  <defs>\n    <filter id="protanopia">\n      <feColorMatrix\n        in="SourceGraphic"\n        type="matrix"\n        values="0.567, 0.433, 0,     0, 0\n                0.558, 0.442, 0,     0, 0\n                0,     0.242, 0.758, 0, 0\n                0,     0,     0,     1, 0"/>\n    </filter>\n    <filter id="protanomaly">\n      <feColorMatrix\n        in="SourceGraphic"\n        type="matrix"\n        values="0.817, 0.183, 0,     0, 0\n                0.333, 0.667, 0,     0, 0\n                0,     0.125, 0.875, 0, 0\n                0,     0,     0,     1, 0"/>\n    </filter>\n    <filter id="deuteranopia">\n      <feColorMatrix\n        in="SourceGraphic"\n        type="matrix"\n        values="0.625, 0.375, 0,   0, 0\n                0.7,   0.3,   0,   0, 0\n                0,     0.3,   0.7, 0, 0\n                0,     0,     0,   1, 0"/>\n    </filter>\n    <filter id="deuteranomaly">\n      <feColorMatrix\n        in="SourceGraphic"\n        type="matrix"\n        values="0.8,   0.2,   0,     0, 0\n                0.258, 0.742, 0,     0, 0\n                0,     0.142, 0.858, 0, 0\n                0,     0,     0,     1, 0"/>\n    </filter>\n    <filter id="tritanopia">\n      <feColorMatrix\n        in="SourceGraphic"\n        type="matrix"\n        values="0.95, 0.05,  0,     0, 0\n                0,    0.433, 0.567, 0, 0\n                0,    0.475, 0.525, 0, 0\n                0,    0,     0,     1, 0"/>\n    </filter>\n    <filter id="tritanomaly">\n      <feColorMatrix\n        in="SourceGraphic"\n        type="matrix"\n        values="0.967, 0.033, 0,     0, 0\n                0,     0.733, 0.267, 0, 0\n                0,     0.183, 0.817, 0, 0\n                0,     0,     0,     1, 0"/>\n    </filter>\n    <filter id="achromatopsia">\n      <feColorMatrix\n        in="SourceGraphic"\n        type="matrix"\n        values="0.299, 0.587, 0.114, 0, 0\n                0.299, 0.587, 0.114, 0, 0\n                0.299, 0.587, 0.114, 0, 0\n                0,     0,     0,     1, 0"/>\n    </filter>\n    <filter id="achromatomaly">\n      <feColorMatrix\n        in="SourceGraphic"\n        type="matrix"\n        values="0.618, 0.320, 0.062, 0, 0\n                0.163, 0.775, 0.062, 0, 0\n                0.163, 0.320, 0.516, 0, 0\n                0,     0,     0,     1, 0"/>\n    </filter>\n  </defs>\n</svg>'}aplicarFiltro(t){null!=t?(this.active_filter?this.removeTests("colorBlindness"):this.toggleTest("colorBlindness",t),this.active_filter=!this.active_filter):console.error("Error al aplicar los filtros, la opcion no se pintada correctamente")}toggleTest(t,e){this.hasInsertedAccess||(this.insertFiles(this.svgFilterTemplate,this.cssFilter),this.hasInsertedAccess=!0),this.removeTests(t),document.documentElement.classList.add(e)}insertFiles(t,e){document.body.insertAdjacentHTML("beforeend",t),document.body.insertAdjacentHTML("beforeend",e)}removeTests(t){if("vision"==t)for(let t=0;t<this.visionClasses.length;t++)document.documentElement.classList.remove(this.visionClasses[t]);else if("colorBlindness"==t)for(let t=0;t<this.colorBlindnessClasses.length;t++)document.documentElement.classList.remove(this.colorBlindnessClasses[t])}}class e{static addFilterBufferStyleClass(){const t=document.styleSheets[0];t.insertRule("\n        .filter-list-buffer {\n            position: fixed;\n            top: 50%;\n            right: 20px;\n            transform: translateY(-50%);\n            z-index: 9999;\n            background-color: #243c5a;\n            color: #ffffff;\n        }\n    ",t.cssRules.length)}static addFilterOptionsStyleClass(){const t=document.styleSheets[0];t.insertRule("\n        .filter-option {\n          padding: 0.5rem;\n        }\n    ",t.cssRules.length)}static addFilterStyleClass(){const t=document.styleSheets[0];t.insertRule("\n        .filter_button {\n          position: fixed;\n          top: 20px;\n          right: 20px;\n          width: 50px;\n          height: 50px;\n          border-radius: 50%;\n          background-color: #243c5a;\n          color: #ffffff;\n          text-align: center;\n          line-height: 50px;\n          cursor: pointer;\n          z-index: 9999;\n        }\n    ",t.cssRules.length)}}class i{static addZoomMessageTextBoxClass(){const t=document.styleSheets[0];t.insertRule(".zoom-message-txtbox {  \n          display: flex;\n          align-items: center;\n          justify-content: center;\n          position: fixed;\n          top: 50%;\n          left: 50%;\n          transform: translate(-50%, -50%);\n          z-index: 9999;\n          background-color: #243c5a;\n          color: #ffffff;\n          font-size: 20rem;\n          text-align: center;\n          width: 80%;\n          height: 80%;\n      }",t.cssRules.length)}}class n{constructor(){this.TRANSITION_DURATION=800,this.level=1,this.mouseX=0,this.mouseY=0,this.panEngageTimeout=-1,this.panUpdateInterval=-1,this.callbackTimeout=-1,this.supportsTransforms="WebkitTransform"in document.body.style||"MozTransform"in document.body.style||"msTransform"in document.body.style||"OTransform"in document.body.style||"transform"in document.body.style,this.keyupEvent=t=>{1!==this.level&&27===t.keyCode&&this.out(void 0)},this.mouseMoveEvent=t=>{1!==this.level&&(this.mouseX=t.clientX,this.mouseY=t.clientY)},this.supportsTransforms&&(document.body.style.transition="transform "+this.TRANSITION_DURATION+"ms ease"),document.addEventListener("keyup",this.keyupEvent),document.addEventListener("mousemove",this.mouseMoveEvent)}magnify(t,e){var i=this.getScrollOffset();if(t.width=t.width||1,t.height=t.height||1,t.x-=(window.innerWidth-t.width*e)/2,t.y-=(window.innerHeight-t.height*e)/2,this.supportsTransforms)if(1===e)document.body.style.transform="";else{var n=i.x+"px "+i.y+"px",s="translate("+-t.x+"px,"+-t.y+"px) scale("+e+")";document.body.style.transformOrigin=n,document.body.style.transform=s}else 1===e?(document.body.style.position="",document.body.style.left="",document.body.style.top="",document.body.style.width="",document.body.style.height=""):(document.body.style.position="relative",document.body.style.left=-(i.x+t.x)/e+"px",document.body.style.top=-(i.y+t.y)/e+"px",document.body.style.width=100*e+"%",document.body.style.height=100*e+"%");this.level=e}pan(){var t=.12*window.innerWidth,e=.12*window.innerHeight,i=this.getScrollOffset();this.mouseY<e?window.scroll(i.x,i.y-(1-this.mouseY/e)*(14/this.level)):this.mouseY>window.innerHeight-e&&window.scroll(i.x,i.y+(1-(window.innerHeight-this.mouseY)/e)*(14/this.level)),this.mouseX<t?window.scroll(i.x-(1-this.mouseX/t)*(14/this.level),i.y):this.mouseX>window.innerWidth-t&&window.scroll(i.x+(1-(window.innerWidth-this.mouseX)/t)*(14/this.level),i.y)}getScrollOffset(){return{x:void 0!==window.scrollX?window.scrollX:window.pageXOffset,y:void 0!==window.scrollY?window.scrollY:window.pageYOffset}}to(t){if(1!==this.level)this.out(void 0);else{if(t.x=t.x||0,t.y=t.y||0,t.element){var e="number"==typeof t.padding?t.padding:20,i=t.element.getBoundingClientRect();t.x=i.left-e,t.y=i.top-e,t.width=i.width+2*e,t.height=i.height+2*e}void 0!==t.width&&void 0!==t.height&&(t.scale=Math.max(Math.min(window.innerWidth/t.width,window.innerHeight/t.height),1)),t.scale>1&&(t.x*=t.scale,t.y*=t.scale,t.x=Math.max(t.x,0),t.y=Math.max(t.y,0),this.magnify(t,t.scale),!1!==t.pan&&(this.panEngageTimeout=setTimeout(this.calculatePanUpdateInterval,this.TRANSITION_DURATION)),"function"==typeof t.callback&&(this.callbackTimeout=setTimeout(t.callback,this.TRANSITION_DURATION)))}}calculatePanUpdateInterval(){this.panUpdateInterval=setInterval(this.pan,1e3/60)}out(t){clearTimeout(this.panEngageTimeout),clearInterval(this.panUpdateInterval),clearTimeout(this.callbackTimeout),this.magnify(new s(0,0,1),1),t&&"function"==typeof t.callback&&setTimeout(t.callback,this.TRANSITION_DURATION),this.level=1}}class s{constructor(t,e,i){this.x=0,this.y=0,this.scale=0,this.x=t,this.y=e,this.scale=i}}const o=new class{constructor(t=!1){this.enableZoomOptions=t,this.zoomStatus=!1,this.active_message='<div id="zoom-status" class="zoom-message-txtbox">On</div>',this.deactive_message='<div id="zoom-status" class="zoom-message-txtbox">Off</div>',this.toogleZoom=t=>{this.zoomService.to(new s(t.x,t.y,10))},this.zoomService=new n}activeZoom(t,e){this.enableZoomOptions&&(i.addZoomMessageTextBoxClass(),t||!0!==e.ctrlKey||"backspace"!==e.key.toLowerCase()||this.initialClickEvent(document.body))}initialClickEvent(t){this.zoomStatus?this.showBoxMessage(t,this.deactive_message,!this.zoomStatus):this.showBoxMessage(t,this.active_message,!this.zoomStatus),this.zoomStatus=!this.zoomStatus}showBoxMessage(t,e,i){t.insertAdjacentHTML("beforebegin",e),setTimeout((()=>{const t=document.getElementById("zoom-status");null==t||t.remove()}),2e3),i?t.addEventListener("click",this.toogleZoom):t.removeEventListener("click",this.toogleZoom)}}(!0);new class{constructor(i=!1){this.enableFilter=i,this.filterViewOn=!1,this.startFilter=t=>{const e=t.target;this.filterService.aplicarFiltro(e.textContent)},this.showFilterOptionsList=()=>{if(this.filterViewOn){var t=document.getElementById("filter_buffer");return null==t?void console.error("No hay instancia del buffer de opciones."):(t.remove(),void(this.filterViewOn=!this.filterViewOn))}var i=document.createElement("div");i.className="filter-list-buffer",i.id="filter_buffer";var n=document.getElementById("filter_button");null!=n?(n.appendChild(i),e.addFilterBufferStyleClass(),["protanopia","protanomaly","deuteranopia","deuteranomaly","tritanopia","tritanomaly","achromatopsia","achromatomaly","grayscale"].forEach((t=>{var e=document.getElementById("filter_buffer");null!=e?e.appendChild(this.buildFilterOption(t)):console.error("No hay instancia del buffer de opciones.")})),e.addFilterOptionsStyleClass(),this.filterViewOn=!this.filterViewOn):console.error("No se creo el boton correctamente.")},this.filterService=new t,this.showFilterOptions()}showFilterOptions(){const t=document.createElement("div");t.textContent="0",t.className="filter_button",t.id="filter_button",t.addEventListener("click",this.showFilterOptionsList),e.addFilterStyleClass(),document.body.appendChild(t)}buildFilterOption(t){var e=document.createElement("div");return e.className="filter-option",e.addEventListener("click",this.startFilter),e.textContent=t,e}}(!0),document.addEventListener("keydown",(t=>{console.log(t.key),o.activeZoom(!1,t)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFrQkQsSUFIdEQzSCxRQUFRQyxNQUFNLDJDQUdnRCxJQUV0RWUsRUFBaUJNLDZCQUNqQmpDLEtBQUt1SCxjQUFnQnZILEtBQUt1SCxjQWxCdEI1RyxRQUFRQyxNQUFNLHFDQWtCb0IsRUFFMUNaLEtBQUsySCxjQUFnQixJQUFJN0gsRUFDekJFLEtBQUt3SSxtQkFDVCxDQUNBLGlCQUFBQSxHQUNJLE1BQU1DLEVBQWF6SCxTQUFTZ0gsY0FBYyxPQUMxQ1MsRUFBV2IsWUFBYyxJQUN6QmEsRUFBV1IsVUFBWSxnQkFDdkJRLEVBQVdQLEdBQUssZ0JBQ2hCTyxFQUFXakYsaUJBQWlCLFFBQVN4RCxLQUFLNkgsdUJBQzFDbEcsRUFBaUJPLHNCQUNqQmxCLFNBQVNNLEtBQUs4RyxZQUFZSyxFQUM5QixDQUNBLGlCQUFBRixDQUFrQkcsR0FDZCxJQUFJQyxFQUFtQjNILFNBQVNnSCxjQUFjLE9BSTlDLE9BSEFXLEVBQWlCVixVQUFZLGdCQUM3QlUsRUFBaUJuRixpQkFBaUIsUUFBU3hELEtBQUt3SCxhQUNoRG1CLEVBQWlCZixZQUFjYyxFQUN4QkMsQ0FDWCxJRjVFNEIsR0FDaEMzSCxTQUFTd0MsaUJBQWlCLFdBQVlSLElBQ2xDckMsUUFBUWlJLElBQUk1RixFQUFNNkQsS0FDbEJWLEVBQVdPLFlBQVcsRUFBTzFELEVBQU0sRyIsInNvdXJjZXMiOlsid2VicGFjazovL2V5ZWFzc2lzdC1saWJyYXJ5Ly4vc3JjL2ZpbHRlci9maWx0ZXItbW9kdWxlL2ZpbHRlcl9zZXJ2aWNlLnRzIiwid2VicGFjazovL2V5ZWFzc2lzdC1saWJyYXJ5Ly4vc3JjL2ZpbHRlci9zdHlsZXMvY3NzLWZpbHRlci1jbGFzc2VzLnRzIiwid2VicGFjazovL2V5ZWFzc2lzdC1saWJyYXJ5Ly4vc3JjL3pvb20vc3R5bGVzL2Nzcy16b29tLWNsYXNzZXMudHMiLCJ3ZWJwYWNrOi8vZXllYXNzaXN0LWxpYnJhcnkvLi9zcmMvem9vbS96b29tLW1vZHVsZS96b29tX3NlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vZXllYXNzaXN0LWxpYnJhcnkvLi9zcmMvYXBwLnRzIiwid2VicGFjazovL2V5ZWFzc2lzdC1saWJyYXJ5Ly4vc3JjL3pvb20vem9vbS50cyIsIndlYnBhY2s6Ly9leWVhc3Npc3QtbGlicmFyeS8uL3NyYy9maWx0ZXIvZmlsdGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBGaWx0ZXJTZXJ2aWNlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5oYXNJbnNlcnRlZEFjY2VzcyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmFjdGl2ZV9maWx0ZXIgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5jb2xvckJsaW5kbmVzc0NsYXNzZXMgPSBbXG4gICAgICAgICAgICBcInByb3Rhbm9waWFcIixcbiAgICAgICAgICAgIFwicHJvdGFub21hbHlcIixcbiAgICAgICAgICAgIFwiZGV1dGVyYW5vcGlhXCIsXG4gICAgICAgICAgICBcImRldXRlcmFub21hbHlcIixcbiAgICAgICAgICAgIFwidHJpdGFub3BpYVwiLFxuICAgICAgICAgICAgXCJ0cml0YW5vbWFseVwiLFxuICAgICAgICAgICAgXCJhY2hyb21hdG9wc2lhXCIsXG4gICAgICAgICAgICBcImFjaHJvbWF0b21hbHlcIixcbiAgICAgICAgICAgIFwiZ3JheXNjYWxlXCJcbiAgICAgICAgXTtcbiAgICAgICAgdGhpcy52aXNpb25DbGFzc2VzID0gW1xuICAgICAgICAgICAgXCJ2aXNpb24tbG9zcy1tb2RlcmF0ZVwiLFxuICAgICAgICAgICAgXCJ2aXNpb24tbG9zcy1zZXZlcmVcIixcbiAgICAgICAgICAgIFwidmlzaW9uLWJsaW5kbmVzc1wiXG4gICAgICAgIF07XG4gICAgICAgIHRoaXMuY3NzRmlsdGVyID0gYFxyXG4gIDxzdHlsZT4ucHJvdGFub3BpYXstd2Via2l0LWZpbHRlcjp1cmwoI3Byb3Rhbm9waWEpIGdyYXlzY2FsZSgwKSFpbXBvcnRhbnQ7ZmlsdGVyOnVybCgjcHJvdGFub3BpYSkgZ3JheXNjYWxlKDApIWltcG9ydGFudH0ucHJvdGFub21hbHl7LXdlYmtpdC1maWx0ZXI6dXJsKCNwcm90YW5vbWFseSkgZ3JheXNjYWxlKDApIWltcG9ydGFudDtmaWx0ZXI6dXJsKCNwcm90YW5vbWFseSkgZ3JheXNjYWxlKDApIWltcG9ydGFudH0uZGV1dGVyYW5vcGlhey13ZWJraXQtZmlsdGVyOnVybCgjZGV1dGVyYW5vcGlhKSBncmF5c2NhbGUoMCkhaW1wb3J0YW50O2ZpbHRlcjp1cmwoI2RldXRlcmFub3BpYSkgZ3JheXNjYWxlKDApIWltcG9ydGFudH0uZGV1dGVyYW5vbWFseXstd2Via2l0LWZpbHRlcjp1cmwoI2RldXRlcmFub21hbHkpIGdyYXlzY2FsZSgwKSFpbXBvcnRhbnQ7ZmlsdGVyOnVybCgjZGV1dGVyYW5vbWFseSkgZ3JheXNjYWxlKDApIWltcG9ydGFudH0udHJpdGFub3BpYXstd2Via2l0LWZpbHRlcjp1cmwoI3RyaXRhbm9waWEpIGdyYXlzY2FsZSgwKSFpbXBvcnRhbnQ7ZmlsdGVyOnVybCgjdHJpdGFub3BpYSkgZ3JheXNjYWxlKDApIWltcG9ydGFudH0udHJpdGFub21hbHl7LXdlYmtpdC1maWx0ZXI6dXJsKCN0cml0YW5vbWFseSkgZ3JheXNjYWxlKDApIWltcG9ydGFudDtmaWx0ZXI6dXJsKCN0cml0YW5vbWFseSkgZ3JheXNjYWxlKDApIWltcG9ydGFudH0uYWNocm9tYXRvcHNpYXstd2Via2l0LWZpbHRlcjp1cmwoI2FjaHJvbWF0b3BzaWEpIGdyYXlzY2FsZSgwKSFpbXBvcnRhbnQ7ZmlsdGVyOnVybCgjYWNocm9tYXRvcHNpYSkgZ3JheXNjYWxlKDApIWltcG9ydGFudH0uYWNocm9tYXRvbWFseXstd2Via2l0LWZpbHRlcjp1cmwoI2FjaHJvbWF0b21hbHkpIGdyYXlzY2FsZSgwKSFpbXBvcnRhbnQ7ZmlsdGVyOnVybCgjYWNocm9tYXRvbWFseSkgZ3JheXNjYWxlKDApIWltcG9ydGFudH0uZ3JheXNjYWxley13ZWJraXQtZmlsdGVyOmdyYXlzY2FsZSgxMDAlKSFpbXBvcnRhbnQ7ZmlsdGVyOmdyYXlzY2FsZSgxMDAlKSFpbXBvcnRhbnR9LnZpc2lvbi1sb3NzLW1vZGVyYXRlIGJvZHk+Knstd2Via2l0LWZpbHRlcjpibHVyKDFweCkhaW1wb3J0YW50O2ZpbHRlcjpibHVyKDFweCkhaW1wb3J0YW50fS52aXNpb24tbG9zcy1zZXZlcmUgYm9keT4qey13ZWJraXQtZmlsdGVyOmJsdXIoMTBweCkhaW1wb3J0YW50O2ZpbHRlcjpibHVyKDEwcHgpIWltcG9ydGFudH0udmlzaW9uLWJsaW5kbmVzcyBib2R5Pip7YmFja2dyb3VuZC1jb2xvcjojZmZmIWltcG9ydGFudDstd2Via2l0LWZpbHRlcjpicmlnaHRuZXNzKDApIWltcG9ydGFudDtmaWx0ZXI6YnJpZ2h0bmVzcygwKSFpbXBvcnRhbnR9I2FjY2Vzcy1maWx0ZXJ7Ym9yZGVyOjA7Y2xpcDpyZWN0KDFweCwxcHgsMXB4LDFweCk7LXdlYmtpdC1jbGlwLXBhdGg6aW5zZXQoNTAlKTtjbGlwLXBhdGg6aW5zZXQoNTAlKTtoZWlnaHQ6MXB4O21hcmdpbjotMXB4O3dpZHRoOjFweDtvdmVyZmxvdzpoaWRkZW47cG9zaXRpb246YWJzb2x1dGUhaW1wb3J0YW50O3dvcmQtd3JhcDpub3JtYWwhaW1wb3J0YW50fTwvc3R5bGU+YDtcbiAgICAgICAgdGhpcy5zdmdGaWx0ZXJUZW1wbGF0ZSA9IGA8c3ZnIFxyXG4gIGlkPVwiYWNjZXNzLWZpbHRlclwiXHJcbiAgYXJpYS1oaWRkZW49XCJ0cnVlXCJcclxuICB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCJcclxuICB2ZXJzaW9uPVwiMS4xXCI+XHJcbiAgPGRlZnM+XHJcbiAgICA8ZmlsdGVyIGlkPVwicHJvdGFub3BpYVwiPlxyXG4gICAgICA8ZmVDb2xvck1hdHJpeFxyXG4gICAgICAgIGluPVwiU291cmNlR3JhcGhpY1wiXHJcbiAgICAgICAgdHlwZT1cIm1hdHJpeFwiXHJcbiAgICAgICAgdmFsdWVzPVwiMC41NjcsIDAuNDMzLCAwLCAgICAgMCwgMFxyXG4gICAgICAgICAgICAgICAgMC41NTgsIDAuNDQyLCAwLCAgICAgMCwgMFxyXG4gICAgICAgICAgICAgICAgMCwgICAgIDAuMjQyLCAwLjc1OCwgMCwgMFxyXG4gICAgICAgICAgICAgICAgMCwgICAgIDAsICAgICAwLCAgICAgMSwgMFwiLz5cclxuICAgIDwvZmlsdGVyPlxyXG4gICAgPGZpbHRlciBpZD1cInByb3Rhbm9tYWx5XCI+XHJcbiAgICAgIDxmZUNvbG9yTWF0cml4XHJcbiAgICAgICAgaW49XCJTb3VyY2VHcmFwaGljXCJcclxuICAgICAgICB0eXBlPVwibWF0cml4XCJcclxuICAgICAgICB2YWx1ZXM9XCIwLjgxNywgMC4xODMsIDAsICAgICAwLCAwXHJcbiAgICAgICAgICAgICAgICAwLjMzMywgMC42NjcsIDAsICAgICAwLCAwXHJcbiAgICAgICAgICAgICAgICAwLCAgICAgMC4xMjUsIDAuODc1LCAwLCAwXHJcbiAgICAgICAgICAgICAgICAwLCAgICAgMCwgICAgIDAsICAgICAxLCAwXCIvPlxyXG4gICAgPC9maWx0ZXI+XHJcbiAgICA8ZmlsdGVyIGlkPVwiZGV1dGVyYW5vcGlhXCI+XHJcbiAgICAgIDxmZUNvbG9yTWF0cml4XHJcbiAgICAgICAgaW49XCJTb3VyY2VHcmFwaGljXCJcclxuICAgICAgICB0eXBlPVwibWF0cml4XCJcclxuICAgICAgICB2YWx1ZXM9XCIwLjYyNSwgMC4zNzUsIDAsICAgMCwgMFxyXG4gICAgICAgICAgICAgICAgMC43LCAgIDAuMywgICAwLCAgIDAsIDBcclxuICAgICAgICAgICAgICAgIDAsICAgICAwLjMsICAgMC43LCAwLCAwXHJcbiAgICAgICAgICAgICAgICAwLCAgICAgMCwgICAgIDAsICAgMSwgMFwiLz5cclxuICAgIDwvZmlsdGVyPlxyXG4gICAgPGZpbHRlciBpZD1cImRldXRlcmFub21hbHlcIj5cclxuICAgICAgPGZlQ29sb3JNYXRyaXhcclxuICAgICAgICBpbj1cIlNvdXJjZUdyYXBoaWNcIlxyXG4gICAgICAgIHR5cGU9XCJtYXRyaXhcIlxyXG4gICAgICAgIHZhbHVlcz1cIjAuOCwgICAwLjIsICAgMCwgICAgIDAsIDBcclxuICAgICAgICAgICAgICAgIDAuMjU4LCAwLjc0MiwgMCwgICAgIDAsIDBcclxuICAgICAgICAgICAgICAgIDAsICAgICAwLjE0MiwgMC44NTgsIDAsIDBcclxuICAgICAgICAgICAgICAgIDAsICAgICAwLCAgICAgMCwgICAgIDEsIDBcIi8+XHJcbiAgICA8L2ZpbHRlcj5cclxuICAgIDxmaWx0ZXIgaWQ9XCJ0cml0YW5vcGlhXCI+XHJcbiAgICAgIDxmZUNvbG9yTWF0cml4XHJcbiAgICAgICAgaW49XCJTb3VyY2VHcmFwaGljXCJcclxuICAgICAgICB0eXBlPVwibWF0cml4XCJcclxuICAgICAgICB2YWx1ZXM9XCIwLjk1LCAwLjA1LCAgMCwgICAgIDAsIDBcclxuICAgICAgICAgICAgICAgIDAsICAgIDAuNDMzLCAwLjU2NywgMCwgMFxyXG4gICAgICAgICAgICAgICAgMCwgICAgMC40NzUsIDAuNTI1LCAwLCAwXHJcbiAgICAgICAgICAgICAgICAwLCAgICAwLCAgICAgMCwgICAgIDEsIDBcIi8+XHJcbiAgICA8L2ZpbHRlcj5cclxuICAgIDxmaWx0ZXIgaWQ9XCJ0cml0YW5vbWFseVwiPlxyXG4gICAgICA8ZmVDb2xvck1hdHJpeFxyXG4gICAgICAgIGluPVwiU291cmNlR3JhcGhpY1wiXHJcbiAgICAgICAgdHlwZT1cIm1hdHJpeFwiXHJcbiAgICAgICAgdmFsdWVzPVwiMC45NjcsIDAuMDMzLCAwLCAgICAgMCwgMFxyXG4gICAgICAgICAgICAgICAgMCwgICAgIDAuNzMzLCAwLjI2NywgMCwgMFxyXG4gICAgICAgICAgICAgICAgMCwgICAgIDAuMTgzLCAwLjgxNywgMCwgMFxyXG4gICAgICAgICAgICAgICAgMCwgICAgIDAsICAgICAwLCAgICAgMSwgMFwiLz5cclxuICAgIDwvZmlsdGVyPlxyXG4gICAgPGZpbHRlciBpZD1cImFjaHJvbWF0b3BzaWFcIj5cclxuICAgICAgPGZlQ29sb3JNYXRyaXhcclxuICAgICAgICBpbj1cIlNvdXJjZUdyYXBoaWNcIlxyXG4gICAgICAgIHR5cGU9XCJtYXRyaXhcIlxyXG4gICAgICAgIHZhbHVlcz1cIjAuMjk5LCAwLjU4NywgMC4xMTQsIDAsIDBcclxuICAgICAgICAgICAgICAgIDAuMjk5LCAwLjU4NywgMC4xMTQsIDAsIDBcclxuICAgICAgICAgICAgICAgIDAuMjk5LCAwLjU4NywgMC4xMTQsIDAsIDBcclxuICAgICAgICAgICAgICAgIDAsICAgICAwLCAgICAgMCwgICAgIDEsIDBcIi8+XHJcbiAgICA8L2ZpbHRlcj5cclxuICAgIDxmaWx0ZXIgaWQ9XCJhY2hyb21hdG9tYWx5XCI+XHJcbiAgICAgIDxmZUNvbG9yTWF0cml4XHJcbiAgICAgICAgaW49XCJTb3VyY2VHcmFwaGljXCJcclxuICAgICAgICB0eXBlPVwibWF0cml4XCJcclxuICAgICAgICB2YWx1ZXM9XCIwLjYxOCwgMC4zMjAsIDAuMDYyLCAwLCAwXHJcbiAgICAgICAgICAgICAgICAwLjE2MywgMC43NzUsIDAuMDYyLCAwLCAwXHJcbiAgICAgICAgICAgICAgICAwLjE2MywgMC4zMjAsIDAuNTE2LCAwLCAwXHJcbiAgICAgICAgICAgICAgICAwLCAgICAgMCwgICAgIDAsICAgICAxLCAwXCIvPlxyXG4gICAgPC9maWx0ZXI+XHJcbiAgPC9kZWZzPlxyXG48L3N2Zz5gO1xuICAgIH1cbiAgICBhcGxpY2FyRmlsdHJvKGZpbHRybykge1xuICAgICAgICBpZiAoZmlsdHJvID09IG51bGwpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGFsIGFwbGljYXIgbG9zIGZpbHRyb3MsIGxhIG9wY2lvbiBubyBzZSBwaW50YWRhIGNvcnJlY3RhbWVudGUnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuYWN0aXZlX2ZpbHRlcikge1xuICAgICAgICAgICAgdGhpcy50b2dnbGVUZXN0KFwiY29sb3JCbGluZG5lc3NcIiwgZmlsdHJvKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlVGVzdHMoXCJjb2xvckJsaW5kbmVzc1wiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFjdGl2ZV9maWx0ZXIgPSAhdGhpcy5hY3RpdmVfZmlsdGVyO1xuICAgIH1cbiAgICB0b2dnbGVUZXN0KHRlc3RUeXBlLCB0ZXN0Q2xhc3MpIHtcbiAgICAgICAgaWYgKCF0aGlzLmhhc0luc2VydGVkQWNjZXNzKSB7XG4gICAgICAgICAgICB0aGlzLmluc2VydEZpbGVzKHRoaXMuc3ZnRmlsdGVyVGVtcGxhdGUsIHRoaXMuY3NzRmlsdGVyKTtcbiAgICAgICAgICAgIHRoaXMuaGFzSW5zZXJ0ZWRBY2Nlc3MgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVtb3ZlVGVzdHModGVzdFR5cGUpO1xuICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0ZXN0Q2xhc3MpO1xuICAgIH1cbiAgICBpbnNlcnRGaWxlcyhzdmcsIGNzcykge1xuICAgICAgICBkb2N1bWVudC5ib2R5Lmluc2VydEFkamFjZW50SFRNTChcImJlZm9yZWVuZFwiLCBzdmcpO1xuICAgICAgICBkb2N1bWVudC5ib2R5Lmluc2VydEFkamFjZW50SFRNTChcImJlZm9yZWVuZFwiLCBjc3MpO1xuICAgIH1cbiAgICByZW1vdmVUZXN0cyh0ZXN0VHlwZSkge1xuICAgICAgICBpZiAodGVzdFR5cGUgPT0gXCJ2aXNpb25cIikge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnZpc2lvbkNsYXNzZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLnZpc2lvbkNsYXNzZXNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRlc3RUeXBlID09IFwiY29sb3JCbGluZG5lc3NcIikge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNvbG9yQmxpbmRuZXNzQ2xhc3Nlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuY29sb3JCbGluZG5lc3NDbGFzc2VzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBDc3NGaWx0ZXJDbGFzc2VzIHtcbiAgICBzdGF0aWMgYWRkRmlsdGVyQnVmZmVyU3R5bGVDbGFzcygpIHtcbiAgICAgICAgY29uc3Qgc3R5bGVTaGVldCA9IGRvY3VtZW50LnN0eWxlU2hlZXRzWzBdOyAvLyBBc2Vnw7pyYXRlIGRlIHNlbGVjY2lvbmFyIGVsIHN0eWxlc2hlZXQgYWRlY3VhZG9cbiAgICAgICAgY29uc3QgZmlsdGVyX2J1ZmZlciA9IGBcclxuICAgICAgICAuZmlsdGVyLWxpc3QtYnVmZmVyIHtcclxuICAgICAgICAgICAgcG9zaXRpb246IGZpeGVkO1xyXG4gICAgICAgICAgICB0b3A6IDUwJTtcclxuICAgICAgICAgICAgcmlnaHQ6IDIwcHg7XHJcbiAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKTtcclxuICAgICAgICAgICAgei1pbmRleDogOTk5OTtcclxuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzI0M2M1YTtcclxuICAgICAgICAgICAgY29sb3I6ICNmZmZmZmY7XHJcbiAgICAgICAgfVxyXG4gICAgYDtcbiAgICAgICAgc3R5bGVTaGVldC5pbnNlcnRSdWxlKGZpbHRlcl9idWZmZXIsIHN0eWxlU2hlZXQuY3NzUnVsZXMubGVuZ3RoKTtcbiAgICB9XG4gICAgc3RhdGljIGFkZEZpbHRlck9wdGlvbnNTdHlsZUNsYXNzKCkge1xuICAgICAgICBjb25zdCBzdHlsZVNoZWV0ID0gZG9jdW1lbnQuc3R5bGVTaGVldHNbMF07IC8vIEFzZWfDunJhdGUgZGUgc2VsZWNjaW9uYXIgZWwgc3R5bGVzaGVldCBhZGVjdWFkb1xuICAgICAgICBjb25zdCBmaWx0ZXJfb3B0aW9uID0gYFxyXG4gICAgICAgIC5maWx0ZXItb3B0aW9uIHtcclxuICAgICAgICAgIHBhZGRpbmc6IDAuNXJlbTtcclxuICAgICAgICB9XHJcbiAgICBgO1xuICAgICAgICBzdHlsZVNoZWV0Lmluc2VydFJ1bGUoZmlsdGVyX29wdGlvbiwgc3R5bGVTaGVldC5jc3NSdWxlcy5sZW5ndGgpO1xuICAgIH1cbiAgICBzdGF0aWMgYWRkRmlsdGVyU3R5bGVDbGFzcygpIHtcbiAgICAgICAgY29uc3Qgc3R5bGVTaGVldCA9IGRvY3VtZW50LnN0eWxlU2hlZXRzWzBdOyAvLyBBc2Vnw7pyYXRlIGRlIHNlbGVjY2lvbmFyIGVsIHN0eWxlc2hlZXQgYWRlY3VhZG9cbiAgICAgICAgY29uc3QgZmlsdGVyX2J1dHRvbiA9IGBcclxuICAgICAgICAuZmlsdGVyX2J1dHRvbiB7XHJcbiAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7XHJcbiAgICAgICAgICB0b3A6IDIwcHg7XHJcbiAgICAgICAgICByaWdodDogMjBweDtcclxuICAgICAgICAgIHdpZHRoOiA1MHB4O1xyXG4gICAgICAgICAgaGVpZ2h0OiA1MHB4O1xyXG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlO1xyXG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzI0M2M1YTtcclxuICAgICAgICAgIGNvbG9yOiAjZmZmZmZmO1xyXG4gICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gICAgICAgICAgbGluZS1oZWlnaHQ6IDUwcHg7XHJcbiAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgICAgICAgICB6LWluZGV4OiA5OTk5O1xyXG4gICAgICAgIH1cclxuICAgIGA7XG4gICAgICAgIHN0eWxlU2hlZXQuaW5zZXJ0UnVsZShmaWx0ZXJfYnV0dG9uLCBzdHlsZVNoZWV0LmNzc1J1bGVzLmxlbmd0aCk7XG4gICAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIENzc0NsYXNzZXMge1xuICAgIHN0YXRpYyBhZGRab29tTWVzc2FnZVRleHRCb3hDbGFzcygpIHtcbiAgICAgICAgY29uc3Qgc3R5bGVTaGVldCA9IGRvY3VtZW50LnN0eWxlU2hlZXRzWzBdO1xuICAgICAgICB2YXIgY3NzUnVsZSA9IGAuem9vbS1tZXNzYWdlLXR4dGJveCB7ICBcclxuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbiAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7XHJcbiAgICAgICAgICB0b3A6IDUwJTtcclxuICAgICAgICAgIGxlZnQ6IDUwJTtcclxuICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpO1xyXG4gICAgICAgICAgei1pbmRleDogOTk5OTtcclxuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICMyNDNjNWE7XHJcbiAgICAgICAgICBjb2xvcjogI2ZmZmZmZjtcclxuICAgICAgICAgIGZvbnQtc2l6ZTogMjByZW07XHJcbiAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgICAgICAgICB3aWR0aDogODAlO1xyXG4gICAgICAgICAgaGVpZ2h0OiA4MCU7XHJcbiAgICAgIH1gO1xuICAgICAgICBzdHlsZVNoZWV0Lmluc2VydFJ1bGUoY3NzUnVsZSwgc3R5bGVTaGVldC5jc3NSdWxlcy5sZW5ndGgpO1xuICAgIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBab29tU2VydmljZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuVFJBTlNJVElPTl9EVVJBVElPTiA9IDgwMDtcbiAgICAgICAgdGhpcy5sZXZlbCA9IDE7XG4gICAgICAgIHRoaXMubW91c2VYID0gMDtcbiAgICAgICAgdGhpcy5tb3VzZVkgPSAwO1xuICAgICAgICB0aGlzLnBhbkVuZ2FnZVRpbWVvdXQgPSAtMTtcbiAgICAgICAgdGhpcy5wYW5VcGRhdGVJbnRlcnZhbCA9IC0xO1xuICAgICAgICB0aGlzLmNhbGxiYWNrVGltZW91dCA9IC0xO1xuICAgICAgICB0aGlzLnN1cHBvcnRzVHJhbnNmb3JtcyA9ICdXZWJraXRUcmFuc2Zvcm0nIGluIGRvY3VtZW50LmJvZHkuc3R5bGUgfHxcbiAgICAgICAgICAgICdNb3pUcmFuc2Zvcm0nIGluIGRvY3VtZW50LmJvZHkuc3R5bGUgfHxcbiAgICAgICAgICAgICdtc1RyYW5zZm9ybScgaW4gZG9jdW1lbnQuYm9keS5zdHlsZSB8fFxuICAgICAgICAgICAgJ09UcmFuc2Zvcm0nIGluIGRvY3VtZW50LmJvZHkuc3R5bGUgfHxcbiAgICAgICAgICAgICd0cmFuc2Zvcm0nIGluIGRvY3VtZW50LmJvZHkuc3R5bGU7XG4gICAgICAgIHRoaXMua2V5dXBFdmVudCA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMubGV2ZWwgIT09IDEgJiYgZXZlbnQua2V5Q29kZSA9PT0gMjcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm91dCh1bmRlZmluZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLm1vdXNlTW92ZUV2ZW50ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5sZXZlbCAhPT0gMSkge1xuICAgICAgICAgICAgICAgIHRoaXMubW91c2VYID0gZXZlbnQuY2xpZW50WDtcbiAgICAgICAgICAgICAgICB0aGlzLm1vdXNlWSA9IGV2ZW50LmNsaWVudFk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLnN1cHBvcnRzVHJhbnNmb3Jtcykge1xuICAgICAgICAgICAgLy8gVGhlIGVhc2luZyB0aGF0IHdpbGwgYmUgYXBwbGllZCB3aGVuIHdlIHpvb20gaW4vb3V0XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLnRyYW5zaXRpb24gPSAndHJhbnNmb3JtICcgKyB0aGlzLlRSQU5TSVRJT05fRFVSQVRJT04gKyAnbXMgZWFzZSc7XG4gICAgICAgICAgICAvL2RvY3VtZW50LmJvZHkuc3R5bGUuT1RyYW5zaXRpb24gPSAnLW8tdHJhbnNmb3JtICcrIHRoaXMuVFJBTlNJVElPTl9EVVJBVElPTiArJ21zIGVhc2UnO1xuICAgICAgICAgICAgLy9kb2N1bWVudC5ib2R5LnN0eWxlLm1zVHJhbnNpdGlvbiA9ICctbXMtdHJhbnNmb3JtICcrIHRoaXMuVFJBTlNJVElPTl9EVVJBVElPTiArJ21zIGVhc2UnO1xuICAgICAgICAgICAgLy9kb2N1bWVudC5ib2R5LnN0eWxlLk1velRyYW5zaXRpb24gPSAnLW1vei10cmFuc2Zvcm0gJysgdGhpcy5UUkFOU0lUSU9OX0RVUkFUSU9OICsnbXMgZWFzZSc7XG4gICAgICAgICAgICAvL2RvY3VtZW50LmJvZHkuc3R5bGUuV2Via2l0VHJhbnNpdGlvbiA9ICctd2Via2l0LXRyYW5zZm9ybSAnKyB0aGlzLlRSQU5TSVRJT05fRFVSQVRJT04gKydtcyBlYXNlJztcbiAgICAgICAgfVxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMua2V5dXBFdmVudCk7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMubW91c2VNb3ZlRXZlbnQpO1xuICAgIH1cbiAgICBtYWduaWZ5KHJlY3QsIHNjYWxlKSB7XG4gICAgICAgIHZhciBzY3JvbGxPZmZzZXQgPSB0aGlzLmdldFNjcm9sbE9mZnNldCgpO1xuICAgICAgICAvLyBFbnN1cmUgYSB3aWR0aC9oZWlnaHQgaXMgc2V0XG4gICAgICAgIHJlY3Qud2lkdGggPSByZWN0LndpZHRoIHx8IDE7XG4gICAgICAgIHJlY3QuaGVpZ2h0ID0gcmVjdC5oZWlnaHQgfHwgMTtcbiAgICAgICAgLy8gQ2VudGVyIHRoZSByZWN0IHdpdGhpbiB0aGUgem9vbWVkIHZpZXdwb3J0XG4gICAgICAgIHJlY3QueCAtPSAod2luZG93LmlubmVyV2lkdGggLSAocmVjdC53aWR0aCAqIHNjYWxlKSkgLyAyO1xuICAgICAgICByZWN0LnkgLT0gKHdpbmRvdy5pbm5lckhlaWdodCAtIChyZWN0LmhlaWdodCAqIHNjYWxlKSkgLyAyO1xuICAgICAgICBpZiAodGhpcy5zdXBwb3J0c1RyYW5zZm9ybXMpIHtcbiAgICAgICAgICAgIC8vIFJlc2V0XG4gICAgICAgICAgICBpZiAoc2NhbGUgPT09IDEpIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLnRyYW5zZm9ybSA9ICcnO1xuICAgICAgICAgICAgICAgIC8vZG9jdW1lbnQuYm9keS5zdHlsZS5PVHJhbnNmb3JtID0gJyc7XG4gICAgICAgICAgICAgICAgLy9kb2N1bWVudC5ib2R5LnN0eWxlLm1zVHJhbnNmb3JtID0gJyc7XG4gICAgICAgICAgICAgICAgLy9kb2N1bWVudC5ib2R5LnN0eWxlLk1velRyYW5zZm9ybSA9ICcnO1xuICAgICAgICAgICAgICAgIC8vZG9jdW1lbnQuYm9keS5zdHlsZS5XZWJraXRUcmFuc2Zvcm0gPSAnJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFNjYWxlXG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgb3JpZ2luID0gc2Nyb2xsT2Zmc2V0LnggKyAncHggJyArIHNjcm9sbE9mZnNldC55ICsgJ3B4JywgdHJhbnNmb3JtID0gJ3RyYW5zbGF0ZSgnICsgLXJlY3QueCArICdweCwnICsgLXJlY3QueSArICdweCkgc2NhbGUoJyArIHNjYWxlICsgJyknO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUudHJhbnNmb3JtT3JpZ2luID0gb3JpZ2luO1xuICAgICAgICAgICAgICAgIC8vZG9jdW1lbnQuYm9keS5zdHlsZS5PVHJhbnNmb3JtT3JpZ2luID0gb3JpZ2luO1xuICAgICAgICAgICAgICAgIC8vZG9jdW1lbnQuYm9keS5zdHlsZS5tc1RyYW5zZm9ybU9yaWdpbiA9IG9yaWdpbjtcbiAgICAgICAgICAgICAgICAvL2RvY3VtZW50LmJvZHkuc3R5bGUuTW96VHJhbnNmb3JtT3JpZ2luID0gb3JpZ2luO1xuICAgICAgICAgICAgICAgIC8vZG9jdW1lbnQuYm9keS5zdHlsZS5XZWJraXRUcmFuc2Zvcm1PcmlnaW4gPSBvcmlnaW47XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS50cmFuc2Zvcm0gPSB0cmFuc2Zvcm07XG4gICAgICAgICAgICAgICAgLy9kb2N1bWVudC5ib2R5LnN0eWxlLk9UcmFuc2Zvcm0gPSB0cmFuc2Zvcm07XG4gICAgICAgICAgICAgICAgLy9kb2N1bWVudC5ib2R5LnN0eWxlLm1zVHJhbnNmb3JtID0gdHJhbnNmb3JtO1xuICAgICAgICAgICAgICAgIC8vZG9jdW1lbnQuYm9keS5zdHlsZS5Nb3pUcmFuc2Zvcm0gPSB0cmFuc2Zvcm07XG4gICAgICAgICAgICAgICAgLy9kb2N1bWVudC5ib2R5LnN0eWxlLldlYmtpdFRyYW5zZm9ybSA9IHRyYW5zZm9ybTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIFJlc2V0XG4gICAgICAgICAgICBpZiAoc2NhbGUgPT09IDEpIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLnBvc2l0aW9uID0gJyc7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5sZWZ0ID0gJyc7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS50b3AgPSAnJztcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLndpZHRoID0gJyc7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5oZWlnaHQgPSAnJztcbiAgICAgICAgICAgICAgICAvL2RvY3VtZW50LmJvZHkuc3R5bGUuem9vbSA9ICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gU2NhbGVcbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUubGVmdCA9ICgtKHNjcm9sbE9mZnNldC54ICsgcmVjdC54KSAvIHNjYWxlKSArICdweCc7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS50b3AgPSAoLShzY3JvbGxPZmZzZXQueSArIHJlY3QueSkgLyBzY2FsZSkgKyAncHgnO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUud2lkdGggPSAoc2NhbGUgKiAxMDApICsgJyUnO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuaGVpZ2h0ID0gKHNjYWxlICogMTAwKSArICclJztcbiAgICAgICAgICAgICAgICAvL2RvY3VtZW50LmJvZHkuc3R5bGUuem9vbSA9IHNjYWxlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMubGV2ZWwgPSBzY2FsZTtcbiAgICB9XG4gICAgcGFuKCkge1xuICAgICAgICB2YXIgcmFuZ2UgPSAwLjEyLCByYW5nZVggPSB3aW5kb3cuaW5uZXJXaWR0aCAqIHJhbmdlLCByYW5nZVkgPSB3aW5kb3cuaW5uZXJIZWlnaHQgKiByYW5nZSwgc2Nyb2xsT2Zmc2V0ID0gdGhpcy5nZXRTY3JvbGxPZmZzZXQoKTtcbiAgICAgICAgLy8gVXBcbiAgICAgICAgaWYgKHRoaXMubW91c2VZIDwgcmFuZ2VZKSB7XG4gICAgICAgICAgICB3aW5kb3cuc2Nyb2xsKHNjcm9sbE9mZnNldC54LCBzY3JvbGxPZmZzZXQueSAtICgxIC0gKHRoaXMubW91c2VZIC8gcmFuZ2VZKSkgKiAoMTQgLyB0aGlzLmxldmVsKSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gRG93blxuICAgICAgICBlbHNlIGlmICh0aGlzLm1vdXNlWSA+IHdpbmRvdy5pbm5lckhlaWdodCAtIHJhbmdlWSkge1xuICAgICAgICAgICAgd2luZG93LnNjcm9sbChzY3JvbGxPZmZzZXQueCwgc2Nyb2xsT2Zmc2V0LnkgKyAoMSAtICh3aW5kb3cuaW5uZXJIZWlnaHQgLSB0aGlzLm1vdXNlWSkgLyByYW5nZVkpICogKDE0IC8gdGhpcy5sZXZlbCkpO1xuICAgICAgICB9XG4gICAgICAgIC8vIExlZnRcbiAgICAgICAgaWYgKHRoaXMubW91c2VYIDwgcmFuZ2VYKSB7XG4gICAgICAgICAgICB3aW5kb3cuc2Nyb2xsKHNjcm9sbE9mZnNldC54IC0gKDEgLSAodGhpcy5tb3VzZVggLyByYW5nZVgpKSAqICgxNCAvIHRoaXMubGV2ZWwpLCBzY3JvbGxPZmZzZXQueSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUmlnaHRcbiAgICAgICAgZWxzZSBpZiAodGhpcy5tb3VzZVggPiB3aW5kb3cuaW5uZXJXaWR0aCAtIHJhbmdlWCkge1xuICAgICAgICAgICAgd2luZG93LnNjcm9sbChzY3JvbGxPZmZzZXQueCArICgxIC0gKHdpbmRvdy5pbm5lcldpZHRoIC0gdGhpcy5tb3VzZVgpIC8gcmFuZ2VYKSAqICgxNCAvIHRoaXMubGV2ZWwpLCBzY3JvbGxPZmZzZXQueSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0U2Nyb2xsT2Zmc2V0KCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgeDogd2luZG93LnNjcm9sbFggIT09IHVuZGVmaW5lZCA/IHdpbmRvdy5zY3JvbGxYIDogd2luZG93LnBhZ2VYT2Zmc2V0LFxuICAgICAgICAgICAgeTogd2luZG93LnNjcm9sbFkgIT09IHVuZGVmaW5lZCA/IHdpbmRvdy5zY3JvbGxZIDogd2luZG93LnBhZ2VZT2Zmc2V0XG4gICAgICAgIH07XG4gICAgfVxuICAgIHRvKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHRoaXMubGV2ZWwgIT09IDEpIHtcbiAgICAgICAgICAgIHRoaXMub3V0KHVuZGVmaW5lZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvcHRpb25zLnggPSBvcHRpb25zLnggfHwgMDtcbiAgICAgICAgICAgIG9wdGlvbnMueSA9IG9wdGlvbnMueSB8fCAwO1xuICAgICAgICAgICAgLy8gSWYgYW4gZWxlbWVudCBpcyBzZXQsIHRoYXQgdGFrZXMgcHJlY2VkZW5jZVxuICAgICAgICAgICAgaWYgKCEhb3B0aW9ucy5lbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgLy8gU3BhY2UgYXJvdW5kIHRoZSB6b29tZWQgaW4gZWxlbWVudCB0byBsZWF2ZSBvbiBzY3JlZW5cbiAgICAgICAgICAgICAgICB2YXIgcGFkZGluZyA9IHR5cGVvZiBvcHRpb25zLnBhZGRpbmcgPT09ICdudW1iZXInID8gb3B0aW9ucy5wYWRkaW5nIDogMjA7XG4gICAgICAgICAgICAgICAgdmFyIGJvdW5kcyA9IG9wdGlvbnMuZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgICAgICBvcHRpb25zLnggPSBib3VuZHMubGVmdCAtIHBhZGRpbmc7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy55ID0gYm91bmRzLnRvcCAtIHBhZGRpbmc7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy53aWR0aCA9IGJvdW5kcy53aWR0aCArIChwYWRkaW5nICogMik7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5oZWlnaHQgPSBib3VuZHMuaGVpZ2h0ICsgKHBhZGRpbmcgKiAyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIElmIHdpZHRoL2hlaWdodCB2YWx1ZXMgYXJlIHNldCwgY2FsY3VsYXRlIHNjYWxlIGZyb20gdGhvc2UgdmFsdWVzXG4gICAgICAgICAgICBpZiAob3B0aW9ucy53aWR0aCAhPT0gdW5kZWZpbmVkICYmIG9wdGlvbnMuaGVpZ2h0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zLnNjYWxlID0gTWF0aC5tYXgoTWF0aC5taW4od2luZG93LmlubmVyV2lkdGggLyBvcHRpb25zLndpZHRoLCB3aW5kb3cuaW5uZXJIZWlnaHQgLyBvcHRpb25zLmhlaWdodCksIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuc2NhbGUgPiAxKSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy54ICo9IG9wdGlvbnMuc2NhbGU7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy55ICo9IG9wdGlvbnMuc2NhbGU7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy54ID0gTWF0aC5tYXgob3B0aW9ucy54LCAwKTtcbiAgICAgICAgICAgICAgICBvcHRpb25zLnkgPSBNYXRoLm1heChvcHRpb25zLnksIDApO1xuICAgICAgICAgICAgICAgIHRoaXMubWFnbmlmeShvcHRpb25zLCBvcHRpb25zLnNjYWxlKTtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5wYW4gIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFuRW5nYWdlVGltZW91dCA9IHNldFRpbWVvdXQodGhpcy5jYWxjdWxhdGVQYW5VcGRhdGVJbnRlcnZhbCwgdGhpcy5UUkFOU0lUSU9OX0RVUkFUSU9OKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLmNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FsbGJhY2tUaW1lb3V0ID0gc2V0VGltZW91dChvcHRpb25zLmNhbGxiYWNrLCB0aGlzLlRSQU5TSVRJT05fRFVSQVRJT04pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjYWxjdWxhdGVQYW5VcGRhdGVJbnRlcnZhbCgpIHtcbiAgICAgICAgdGhpcy5wYW5VcGRhdGVJbnRlcnZhbCA9IHNldEludGVydmFsKHRoaXMucGFuLCAxMDAwIC8gNjApO1xuICAgIH1cbiAgICBvdXQob3B0aW9ucykge1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5wYW5FbmdhZ2VUaW1lb3V0KTtcbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnBhblVwZGF0ZUludGVydmFsKTtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuY2FsbGJhY2tUaW1lb3V0KTtcbiAgICAgICAgdGhpcy5tYWduaWZ5KG5ldyBPcHRpb25zWm9vbSgwLCAwLCAxKSwgMSk7XG4gICAgICAgIGlmIChvcHRpb25zICYmIHR5cGVvZiBvcHRpb25zLmNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KG9wdGlvbnMuY2FsbGJhY2ssIHRoaXMuVFJBTlNJVElPTl9EVVJBVElPTik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sZXZlbCA9IDE7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIE9wdGlvbnNab29tIHtcbiAgICBjb25zdHJ1Y3Rvcih4LCB5LCBzY2FsZSkge1xuICAgICAgICB0aGlzLnggPSAwO1xuICAgICAgICB0aGlzLnkgPSAwO1xuICAgICAgICB0aGlzLnNjYWxlID0gMDtcbiAgICAgICAgdGhpcy54ID0geDtcbiAgICAgICAgdGhpcy55ID0geTtcbiAgICAgICAgdGhpcy5zY2FsZSA9IHNjYWxlO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IEZpbHRlciB9IGZyb20gJy4vZmlsdGVyL2ZpbHRlcic7XG5pbXBvcnQgeyBab29tIH0gZnJvbSAnLi96b29tL3pvb20nO1xuY29uc3QgWm9vbU9iamVjdCA9IG5ldyBab29tKHRydWUpO1xuY29uc3QgRmlsdGVyT2JqZWN0ID0gbmV3IEZpbHRlcih0cnVlKTtcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChldmVudCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKGV2ZW50LmtleSk7XG4gICAgWm9vbU9iamVjdC5hY3RpdmVab29tKGZhbHNlLCBldmVudCk7XG59KTtcbiIsImltcG9ydCB7IENzc0NsYXNzZXMgfSBmcm9tIFwiLi9zdHlsZXMvY3NzLXpvb20tY2xhc3Nlc1wiO1xuaW1wb3J0IHsgWm9vbVNlcnZpY2UsIE9wdGlvbnNab29tIH0gZnJvbSBcIi4vem9vbS1tb2R1bGUvem9vbV9zZXJ2aWNlXCI7XG5leHBvcnQgY2xhc3MgWm9vbSB7XG4gICAgY29uc3RydWN0b3IoZW5hYmxlWm9vbU9wdGlvbnMgPSBmYWxzZSkge1xuICAgICAgICB0aGlzLmVuYWJsZVpvb21PcHRpb25zID0gZW5hYmxlWm9vbU9wdGlvbnM7XG4gICAgICAgIHRoaXMuem9vbVN0YXR1cyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmFjdGl2ZV9tZXNzYWdlID0gYDxkaXYgaWQ9XCJ6b29tLXN0YXR1c1wiIGNsYXNzPVwiem9vbS1tZXNzYWdlLXR4dGJveFwiPk9uPC9kaXY+YDtcbiAgICAgICAgdGhpcy5kZWFjdGl2ZV9tZXNzYWdlID0gYDxkaXYgaWQ9XCJ6b29tLXN0YXR1c1wiIGNsYXNzPVwiem9vbS1tZXNzYWdlLXR4dGJveFwiPk9mZjwvZGl2PmA7XG4gICAgICAgIHRoaXMudG9vZ2xlWm9vbSA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgdGhpcy56b29tU2VydmljZS50byhuZXcgT3B0aW9uc1pvb20oZXZlbnQueCwgZXZlbnQueSwgMTApKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy56b29tU2VydmljZSA9IG5ldyBab29tU2VydmljZSgpO1xuICAgIH1cbiAgICBhY3RpdmVab29tKHNjcmVlblJlYWRlckFjdGl2ZSwgZXZlbnQpIHtcbiAgICAgICAgaWYgKCF0aGlzLmVuYWJsZVpvb21PcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgQ3NzQ2xhc3Nlcy5hZGRab29tTWVzc2FnZVRleHRCb3hDbGFzcygpO1xuICAgICAgICBpZiAoIXNjcmVlblJlYWRlckFjdGl2ZSAmJiBldmVudC5jdHJsS2V5ID09PSB0cnVlICYmIGV2ZW50LmtleS50b0xvd2VyQ2FzZSgpID09PSBcImJhY2tzcGFjZVwiKSB7XG4gICAgICAgICAgICB0aGlzLmluaXRpYWxDbGlja0V2ZW50KGRvY3VtZW50LmJvZHkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGluaXRpYWxDbGlja0V2ZW50KGJvZHkpIHtcbiAgICAgICAgaWYgKCF0aGlzLnpvb21TdGF0dXMpIHtcbiAgICAgICAgICAgIHRoaXMuc2hvd0JveE1lc3NhZ2UoYm9keSwgdGhpcy5hY3RpdmVfbWVzc2FnZSwgIXRoaXMuem9vbVN0YXR1cyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNob3dCb3hNZXNzYWdlKGJvZHksIHRoaXMuZGVhY3RpdmVfbWVzc2FnZSwgIXRoaXMuem9vbVN0YXR1cyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy56b29tU3RhdHVzID0gIXRoaXMuem9vbVN0YXR1cztcbiAgICB9XG4gICAgc2hvd0JveE1lc3NhZ2UoYm9keSwgbWVzc2FnZSwgc3RhdHVzKSB7XG4gICAgICAgIGJvZHkuaW5zZXJ0QWRqYWNlbnRIVE1MKFwiYmVmb3JlYmVnaW5cIiwgbWVzc2FnZSk7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgem9vbV9tZXNzYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ6b29tLXN0YXR1c1wiKTtcbiAgICAgICAgICAgIHpvb21fbWVzc2FnZSA9PT0gbnVsbCB8fCB6b29tX21lc3NhZ2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHpvb21fbWVzc2FnZS5yZW1vdmUoKTtcbiAgICAgICAgfSwgMjAwMCk7XG4gICAgICAgIHN0YXR1cyA/IGJvZHkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLnRvb2dsZVpvb20pIDogYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy50b29nbGVab29tKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBGaWx0ZXJTZXJ2aWNlIH0gZnJvbSBcIi4vZmlsdGVyLW1vZHVsZS9maWx0ZXJfc2VydmljZVwiO1xuaW1wb3J0IHsgQ3NzRmlsdGVyQ2xhc3NlcyB9IGZyb20gXCIuL3N0eWxlcy9jc3MtZmlsdGVyLWNsYXNzZXNcIjtcbmV4cG9ydCBjbGFzcyBGaWx0ZXIge1xuICAgIGNvbnN0cnVjdG9yKGVuYWJsZUZpbHRlciA9IGZhbHNlKSB7XG4gICAgICAgIHRoaXMuZW5hYmxlRmlsdGVyID0gZW5hYmxlRmlsdGVyO1xuICAgICAgICB0aGlzLmZpbHRlclZpZXdPbiA9IGZhbHNlO1xuICAgICAgICB0aGlzLnN0YXJ0RmlsdGVyID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjb21wb25lbnQgPSBldmVudC50YXJnZXQ7XG4gICAgICAgICAgICB0aGlzLmZpbHRlclNlcnZpY2UuYXBsaWNhckZpbHRybyhjb21wb25lbnQudGV4dENvbnRlbnQpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnNob3dGaWx0ZXJPcHRpb25zTGlzdCA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmZpbHRlclZpZXdPbikge1xuICAgICAgICAgICAgICAgIHZhciBmaWx0ZXJfYnVmZmVyX2luc3RhbmNlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJmaWx0ZXJfYnVmZmVyXCIpO1xuICAgICAgICAgICAgICAgIGlmIChmaWx0ZXJfYnVmZmVyX2luc3RhbmNlID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignTm8gaGF5IGluc3RhbmNpYSBkZWwgYnVmZmVyIGRlIG9wY2lvbmVzLicpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZpbHRlcl9idWZmZXJfaW5zdGFuY2UucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJWaWV3T24gPSAhdGhpcy5maWx0ZXJWaWV3T247XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZmlsdGVyTGlzdCA9IFtcbiAgICAgICAgICAgICAgICBcInByb3Rhbm9waWFcIixcbiAgICAgICAgICAgICAgICBcInByb3Rhbm9tYWx5XCIsXG4gICAgICAgICAgICAgICAgXCJkZXV0ZXJhbm9waWFcIixcbiAgICAgICAgICAgICAgICBcImRldXRlcmFub21hbHlcIixcbiAgICAgICAgICAgICAgICBcInRyaXRhbm9waWFcIixcbiAgICAgICAgICAgICAgICBcInRyaXRhbm9tYWx5XCIsXG4gICAgICAgICAgICAgICAgXCJhY2hyb21hdG9wc2lhXCIsXG4gICAgICAgICAgICAgICAgXCJhY2hyb21hdG9tYWx5XCIsXG4gICAgICAgICAgICAgICAgXCJncmF5c2NhbGVcIixcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBjb25zdCBjb2xvck9wdGlvbnMgPSBbXG4gICAgICAgICAgICAgICAgXCJjb2xvcnNcIixcbiAgICAgICAgICAgICAgICBcImZpbHRlclwiXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgdmFyIGJ1ZmZlckxpc3REaXZFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBidWZmZXJMaXN0RGl2RWxlbWVudC5jbGFzc05hbWUgPSAnZmlsdGVyLWxpc3QtYnVmZmVyJztcbiAgICAgICAgICAgIGJ1ZmZlckxpc3REaXZFbGVtZW50LmlkID0gJ2ZpbHRlcl9idWZmZXInO1xuICAgICAgICAgICAgdmFyIGZpbHRlcl9idXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZpbHRlcl9idXR0b25cIik7XG4gICAgICAgICAgICBpZiAoZmlsdGVyX2J1dHRvbiA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignTm8gc2UgY3JlbyBlbCBib3RvbiBjb3JyZWN0YW1lbnRlLicpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbHRlcl9idXR0b24uYXBwZW5kQ2hpbGQoYnVmZmVyTGlzdERpdkVsZW1lbnQpO1xuICAgICAgICAgICAgQ3NzRmlsdGVyQ2xhc3Nlcy5hZGRGaWx0ZXJCdWZmZXJTdHlsZUNsYXNzKCk7XG4gICAgICAgICAgICAvKmNvbG9yT3B0aW9ucy5mb3JFYWNoKChvcHRpb24pID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgZmlsdGVyX2J1ZmZlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZmlsdGVyX2J1ZmZlclwiKTtcbiAgICAgICAgICAgICAgZmlsdGVyX2J1ZmZlci5pbnNlcnRBZGphY2VudEhUTUwoXCJiZWZvcmVlbmRcIiwgYnVpbGRDb2xvck9wdGlvbnMob3B0aW9uKSk7XG4gICAgICAgICAgICB9KSovXG4gICAgICAgICAgICBmaWx0ZXJMaXN0LmZvckVhY2goKGZpbHRlcikgPT4ge1xuICAgICAgICAgICAgICAgIHZhciBmaWx0ZXJfYnVmZmVyX2luc3RhbmNlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJmaWx0ZXJfYnVmZmVyXCIpO1xuICAgICAgICAgICAgICAgIGlmIChmaWx0ZXJfYnVmZmVyX2luc3RhbmNlID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignTm8gaGF5IGluc3RhbmNpYSBkZWwgYnVmZmVyIGRlIG9wY2lvbmVzLicpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZpbHRlcl9idWZmZXJfaW5zdGFuY2UuYXBwZW5kQ2hpbGQodGhpcy5idWlsZEZpbHRlck9wdGlvbihmaWx0ZXIpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgQ3NzRmlsdGVyQ2xhc3Nlcy5hZGRGaWx0ZXJPcHRpb25zU3R5bGVDbGFzcygpO1xuICAgICAgICAgICAgdGhpcy5maWx0ZXJWaWV3T24gPSAhdGhpcy5maWx0ZXJWaWV3T247XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZmlsdGVyU2VydmljZSA9IG5ldyBGaWx0ZXJTZXJ2aWNlKCk7XG4gICAgICAgIHRoaXMuc2hvd0ZpbHRlck9wdGlvbnMoKTtcbiAgICB9XG4gICAgc2hvd0ZpbHRlck9wdGlvbnMoKSB7XG4gICAgICAgIGNvbnN0IGRpdkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgZGl2RWxlbWVudC50ZXh0Q29udGVudCA9ICcwJztcbiAgICAgICAgZGl2RWxlbWVudC5jbGFzc05hbWUgPSAnZmlsdGVyX2J1dHRvbic7XG4gICAgICAgIGRpdkVsZW1lbnQuaWQgPSAnZmlsdGVyX2J1dHRvbic7XG4gICAgICAgIGRpdkVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLnNob3dGaWx0ZXJPcHRpb25zTGlzdCk7XG4gICAgICAgIENzc0ZpbHRlckNsYXNzZXMuYWRkRmlsdGVyU3R5bGVDbGFzcygpO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGRpdkVsZW1lbnQpO1xuICAgIH1cbiAgICBidWlsZEZpbHRlck9wdGlvbihmaWx0ZXJPcHRpb24pIHtcbiAgICAgICAgdmFyIG9wdGlvbkRpdkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgb3B0aW9uRGl2RWxlbWVudC5jbGFzc05hbWUgPSAnZmlsdGVyLW9wdGlvbic7XG4gICAgICAgIG9wdGlvbkRpdkVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLnN0YXJ0RmlsdGVyKTtcbiAgICAgICAgb3B0aW9uRGl2RWxlbWVudC50ZXh0Q29udGVudCA9IGZpbHRlck9wdGlvbjtcbiAgICAgICAgcmV0dXJuIG9wdGlvbkRpdkVsZW1lbnQ7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIkZpbHRlclNlcnZpY2UiLCJjb25zdHJ1Y3RvciIsInRoaXMiLCJoYXNJbnNlcnRlZEFjY2VzcyIsImFjdGl2ZV9maWx0ZXIiLCJjb2xvckJsaW5kbmVzc0NsYXNzZXMiLCJ2aXNpb25DbGFzc2VzIiwiY3NzRmlsdGVyIiwic3ZnRmlsdGVyVGVtcGxhdGUiLCJhcGxpY2FyRmlsdHJvIiwiZmlsdHJvIiwicmVtb3ZlVGVzdHMiLCJ0b2dnbGVUZXN0IiwiY29uc29sZSIsImVycm9yIiwidGVzdFR5cGUiLCJ0ZXN0Q2xhc3MiLCJpbnNlcnRGaWxlcyIsImRvY3VtZW50IiwiZG9jdW1lbnRFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwic3ZnIiwiY3NzIiwiYm9keSIsImluc2VydEFkamFjZW50SFRNTCIsImkiLCJsZW5ndGgiLCJyZW1vdmUiLCJDc3NGaWx0ZXJDbGFzc2VzIiwiYWRkRmlsdGVyQnVmZmVyU3R5bGVDbGFzcyIsInN0eWxlU2hlZXQiLCJzdHlsZVNoZWV0cyIsImluc2VydFJ1bGUiLCJjc3NSdWxlcyIsImFkZEZpbHRlck9wdGlvbnNTdHlsZUNsYXNzIiwiYWRkRmlsdGVyU3R5bGVDbGFzcyIsIkNzc0NsYXNzZXMiLCJhZGRab29tTWVzc2FnZVRleHRCb3hDbGFzcyIsIlpvb21TZXJ2aWNlIiwiVFJBTlNJVElPTl9EVVJBVElPTiIsImxldmVsIiwibW91c2VYIiwibW91c2VZIiwicGFuRW5nYWdlVGltZW91dCIsInBhblVwZGF0ZUludGVydmFsIiwiY2FsbGJhY2tUaW1lb3V0Iiwic3VwcG9ydHNUcmFuc2Zvcm1zIiwic3R5bGUiLCJrZXl1cEV2ZW50IiwiZXZlbnQiLCJrZXlDb2RlIiwib3V0IiwidW5kZWZpbmVkIiwibW91c2VNb3ZlRXZlbnQiLCJjbGllbnRYIiwiY2xpZW50WSIsInRyYW5zaXRpb24iLCJhZGRFdmVudExpc3RlbmVyIiwibWFnbmlmeSIsInJlY3QiLCJzY2FsZSIsInNjcm9sbE9mZnNldCIsImdldFNjcm9sbE9mZnNldCIsIndpZHRoIiwiaGVpZ2h0IiwieCIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJ5IiwiaW5uZXJIZWlnaHQiLCJ0cmFuc2Zvcm0iLCJvcmlnaW4iLCJ0cmFuc2Zvcm1PcmlnaW4iLCJwb3NpdGlvbiIsImxlZnQiLCJ0b3AiLCJwYW4iLCJyYW5nZVgiLCJyYW5nZVkiLCJzY3JvbGwiLCJzY3JvbGxYIiwicGFnZVhPZmZzZXQiLCJzY3JvbGxZIiwicGFnZVlPZmZzZXQiLCJ0byIsIm9wdGlvbnMiLCJlbGVtZW50IiwicGFkZGluZyIsImJvdW5kcyIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsIk1hdGgiLCJtYXgiLCJtaW4iLCJzZXRUaW1lb3V0IiwiY2FsY3VsYXRlUGFuVXBkYXRlSW50ZXJ2YWwiLCJjYWxsYmFjayIsInNldEludGVydmFsIiwiY2xlYXJUaW1lb3V0IiwiY2xlYXJJbnRlcnZhbCIsIk9wdGlvbnNab29tIiwiWm9vbU9iamVjdCIsImVuYWJsZVpvb21PcHRpb25zIiwiem9vbVN0YXR1cyIsImFjdGl2ZV9tZXNzYWdlIiwiZGVhY3RpdmVfbWVzc2FnZSIsInRvb2dsZVpvb20iLCJ6b29tU2VydmljZSIsImFjdGl2ZVpvb20iLCJzY3JlZW5SZWFkZXJBY3RpdmUiLCJjdHJsS2V5Iiwia2V5IiwidG9Mb3dlckNhc2UiLCJpbml0aWFsQ2xpY2tFdmVudCIsInNob3dCb3hNZXNzYWdlIiwibWVzc2FnZSIsInN0YXR1cyIsInpvb21fbWVzc2FnZSIsImdldEVsZW1lbnRCeUlkIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImVuYWJsZUZpbHRlciIsImZpbHRlclZpZXdPbiIsInN0YXJ0RmlsdGVyIiwiY29tcG9uZW50IiwidGFyZ2V0IiwiZmlsdGVyU2VydmljZSIsInRleHRDb250ZW50Iiwic2hvd0ZpbHRlck9wdGlvbnNMaXN0IiwiZmlsdGVyX2J1ZmZlcl9pbnN0YW5jZSIsImJ1ZmZlckxpc3REaXZFbGVtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsImlkIiwiZmlsdGVyX2J1dHRvbiIsImFwcGVuZENoaWxkIiwiZm9yRWFjaCIsImZpbHRlciIsImJ1aWxkRmlsdGVyT3B0aW9uIiwic2hvd0ZpbHRlck9wdGlvbnMiLCJkaXZFbGVtZW50IiwiZmlsdGVyT3B0aW9uIiwib3B0aW9uRGl2RWxlbWVudCIsImxvZyJdLCJzb3VyY2VSb290IjoiIn0=