(()=>{"use strict";class e{constructor(){this.hasInsertedAccess=!1,this.active_filter=!1,this.colorBlindnessClasses=["protanopia","protanomaly","deuteranopia","deuteranomaly","tritanopia","tritanomaly","achromatopsia","achromatomaly","grayscale"],this.visionClasses=["vision-loss-moderate","vision-loss-severe","vision-blindness"],this.cssFilter="\n  <style>.protanopia{-webkit-filter:url(#protanopia) grayscale(0)!important;filter:url(#protanopia) grayscale(0)!important}.protanomaly{-webkit-filter:url(#protanomaly) grayscale(0)!important;filter:url(#protanomaly) grayscale(0)!important}.deuteranopia{-webkit-filter:url(#deuteranopia) grayscale(0)!important;filter:url(#deuteranopia) grayscale(0)!important}.deuteranomaly{-webkit-filter:url(#deuteranomaly) grayscale(0)!important;filter:url(#deuteranomaly) grayscale(0)!important}.tritanopia{-webkit-filter:url(#tritanopia) grayscale(0)!important;filter:url(#tritanopia) grayscale(0)!important}.tritanomaly{-webkit-filter:url(#tritanomaly) grayscale(0)!important;filter:url(#tritanomaly) grayscale(0)!important}.achromatopsia{-webkit-filter:url(#achromatopsia) grayscale(0)!important;filter:url(#achromatopsia) grayscale(0)!important}.achromatomaly{-webkit-filter:url(#achromatomaly) grayscale(0)!important;filter:url(#achromatomaly) grayscale(0)!important}.grayscale{-webkit-filter:grayscale(100%)!important;filter:grayscale(100%)!important}.vision-loss-moderate body>*{-webkit-filter:blur(1px)!important;filter:blur(1px)!important}.vision-loss-severe body>*{-webkit-filter:blur(10px)!important;filter:blur(10px)!important}.vision-blindness body>*{background-color:#fff!important;-webkit-filter:brightness(0)!important;filter:brightness(0)!important}#access-filter{border:0;clip:rect(1px,1px,1px,1px);-webkit-clip-path:inset(50%);clip-path:inset(50%);height:1px;margin:-1px;width:1px;overflow:hidden;position:absolute!important;word-wrap:normal!important}</style>",this.svgFilterTemplate='<svg \n  id="access-filter"\n  aria-hidden="true"\n  xmlns="http://www.w3.org/2000/svg"\n  version="1.1">\n  <defs>\n    <filter id="protanopia">\n      <feColorMatrix\n        in="SourceGraphic"\n        type="matrix"\n        values="0.567, 0.433, 0,     0, 0\n                0.558, 0.442, 0,     0, 0\n                0,     0.242, 0.758, 0, 0\n                0,     0,     0,     1, 0"/>\n    </filter>\n    <filter id="protanomaly">\n      <feColorMatrix\n        in="SourceGraphic"\n        type="matrix"\n        values="0.817, 0.183, 0,     0, 0\n                0.333, 0.667, 0,     0, 0\n                0,     0.125, 0.875, 0, 0\n                0,     0,     0,     1, 0"/>\n    </filter>\n    <filter id="deuteranopia">\n      <feColorMatrix\n        in="SourceGraphic"\n        type="matrix"\n        values="0.625, 0.375, 0,   0, 0\n                0.7,   0.3,   0,   0, 0\n                0,     0.3,   0.7, 0, 0\n                0,     0,     0,   1, 0"/>\n    </filter>\n    <filter id="deuteranomaly">\n      <feColorMatrix\n        in="SourceGraphic"\n        type="matrix"\n        values="0.8,   0.2,   0,     0, 0\n                0.258, 0.742, 0,     0, 0\n                0,     0.142, 0.858, 0, 0\n                0,     0,     0,     1, 0"/>\n    </filter>\n    <filter id="tritanopia">\n      <feColorMatrix\n        in="SourceGraphic"\n        type="matrix"\n        values="0.95, 0.05,  0,     0, 0\n                0,    0.433, 0.567, 0, 0\n                0,    0.475, 0.525, 0, 0\n                0,    0,     0,     1, 0"/>\n    </filter>\n    <filter id="tritanomaly">\n      <feColorMatrix\n        in="SourceGraphic"\n        type="matrix"\n        values="0.967, 0.033, 0,     0, 0\n                0,     0.733, 0.267, 0, 0\n                0,     0.183, 0.817, 0, 0\n                0,     0,     0,     1, 0"/>\n    </filter>\n    <filter id="achromatopsia">\n      <feColorMatrix\n        in="SourceGraphic"\n        type="matrix"\n        values="0.299, 0.587, 0.114, 0, 0\n                0.299, 0.587, 0.114, 0, 0\n                0.299, 0.587, 0.114, 0, 0\n                0,     0,     0,     1, 0"/>\n    </filter>\n    <filter id="achromatomaly">\n      <feColorMatrix\n        in="SourceGraphic"\n        type="matrix"\n        values="0.618, 0.320, 0.062, 0, 0\n                0.163, 0.775, 0.062, 0, 0\n                0.163, 0.320, 0.516, 0, 0\n                0,     0,     0,     1, 0"/>\n    </filter>\n  </defs>\n</svg>'}aplicarFiltro(e){null!=e?(this.active_filter?this.removeTests("colorBlindness"):this.toggleTest("colorBlindness",e),this.active_filter=!this.active_filter):console.error("Error al aplicar los filtros, la opcion no se pintada correctamente")}toggleTest(e,t){this.hasInsertedAccess||(this.insertFiles(this.svgFilterTemplate,this.cssFilter),this.hasInsertedAccess=!0),this.removeTests(e),document.documentElement.classList.add(t)}insertFiles(e,t){document.body.insertAdjacentHTML("beforeend",e),document.body.insertAdjacentHTML("beforeend",t)}removeTests(e){if("vision"==e)for(let e=0;e<this.visionClasses.length;e++)document.documentElement.classList.remove(this.visionClasses[e]);else if("colorBlindness"==e)for(let e=0;e<this.colorBlindnessClasses.length;e++)document.documentElement.classList.remove(this.colorBlindnessClasses[e])}}class t{static addFilterBufferStyleClass(){const e=document.styleSheets[0];e.insertRule("\n        .filter-list-buffer {\n        }\n    ",e.cssRules.length)}static addFilterOptionsStyleClass(){const e=document.styleSheets[0];e.insertRule("\n        .filter-option {\n          padding: 0.5rem;\n        }\n    ",e.cssRules.length)}static addFilterStyleClass(){const e=document.styleSheets[0];e.insertRule("\n        .filter_button {\n          position: fixed;\n          top: 20px;\n          right: 20px;\n          width: 50px;\n          height: 50px;\n          border-radius: 50%;\n          background-color: #243c5a;\n          color: #ffffff;\n          text-align: center;\n          line-height: 50px;\n          cursor: pointer;\n          z-index: 9999;\n        }\n    ",e.cssRules.length)}}class s{constructor(s=!1){this.enableFilter=s,this.filterViewOn=!1,this.startFilter=e=>{const t=e.target;this.filterService.aplicarFiltro(t.textContent)},this.showFilterOptionsList=()=>{if(!this.enableFilter){var e=document.getElementById("filter_buffer");return null==e?void console.error("No hay instancia del buffer de opciones."):(e.remove(),"")}var t=document.createElement("div");return t.className="filter-list-buffer",t.id="filter_buffer",["protanopia","protanomaly","deuteranopia","deuteranomaly","tritanopia","tritanomaly","achromatopsia","achromatomaly","grayscale"].forEach((e=>{t.appendChild(this.buildFilterOption(e))})),t},this.filterService=new e,t.addFilterBufferStyleClass(),t.addFilterOptionsStyleClass()}status(){return this.enableFilter}toggleStatus(){this.enableFilter=!this.enableFilter}showFilterOptions(){const e=document.createElement("img");e.src="https://github.com/EyeeAssist/docs/blob/develop/src/assets/logo.png?raw=true",e.style.width="50px",e.style.borderRadius="50%";const s=document.createElement("div");s.className="filter_button",s.id="filter_button",s.appendChild(e),s.addEventListener("click",this.showFilterOptionsList),t.addFilterStyleClass(),document.body.appendChild(s)}buildFilterOption(e){var t=document.createElement("div");return t.className="filter-option",t.addEventListener("click",this.startFilter),t.textContent=e,t}}var i=function(e,t,s,i){return new(s||(s=Promise))((function(n,o){function a(e){try{r(i.next(e))}catch(e){o(e)}}function l(e){try{r(i.throw(e))}catch(e){o(e)}}function r(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,l)}r((i=i.apply(e,t||[])).next())}))};class n{constructor(e=!1,t=""){var s;if(this.useScreenReader=e,this.token=t,this.synth=window.speechSynthesis,this.screenReaderStatus=!1,this.selectedArticle=null,this.selectedLink=null,this.articleIndex=-1,this.linkIndex=0,this.controller=new AbortController,this.talk=(e,t=!0)=>{!t||this.synth.cancel(),this.synth.speak(new SpeechSynthesisUtterance(e))},this.cancelTalk=()=>{this.controller&&this.controller.abort(),this.talk("")},!this.useScreenReader)return;let i=document.createElement("script");i.src="https://www.youtube.com/iframe_api";let n=document.getElementsByTagName("script")[0];null===(s=n.parentNode)||void 0===s||s.insertBefore(i,n)}status(){return this.useScreenReader}toggleStatus(){this.useScreenReader=!this.useScreenReader}enable(){return this.screenReaderStatus}sayWelcome(){this.talk("Hola bienvenido a la pagina X, si desea leer las acciones de la pagina presione control y enter")}sayGoodbay(){this.talk("Gracias por utilizar eyeeassist")}keybindsScreenReader(e){this.cancelReader(e),this.reRead(e),this.activeScreenReader(e),this.moveBetweenContent(e),this.moveBetweenLinks(e)}getImage(e){return i(this,void 0,void 0,(function*(){return yield fetch(e)}))}getDescription(e){return i(this,void 0,void 0,(function*(){this.controller=new AbortController;const t=new FormData;t.append("file",e,"imagen.jpg");const s={method:"POST",body:t,headers:{Authorization:"Bearer "+this.token},signal:this.controller.signal},i=yield fetch("http://localhost:8000/caption",s).catch((e=>{"AbortError"===e.name&&console.error(e)}));return null!=i?(yield i.json()).message[0]:""}))}readChilds(e){var t;return i(this,void 0,void 0,(function*(){if("IFRAME"==e.nodeName){var s=new YT.Player(e,{});setTimeout((()=>{s.playVideo()}),5e3)}if("IMG"==e.nodeName){this.talk("Imagen encontrada",!1);let t=e;if(""!=t.alt)this.talk(""),this.talk("Imagen de "+t.alt,!1);else{const e=yield this.getImage(t.src),s=yield e.blob();this.talk("describiendo imagen",!1);const i=yield this.getDescription(s);""!=i?this.talk("Imagen de "+i,!1):this.talk("No se pudo generar una descripcion para la imagen encontrada.",!1)}}e.nodeType==Node.TEXT_NODE&&(null===(t=e.textContent)||void 0===t?void 0:t.trim())&&this.talk(e.textContent,!1);for(const t of Array.from(e.childNodes))yield this.readChilds(t)}))}moveBetweenContent(e){let t=document.getElementsByTagName("article");0!=t.length&&(this.screenReaderStatus&&!0===e.ctrlKey&&"arrowright"===e.key.toLowerCase()&&(this.articleIndex+=1,this.selectedArticle=t[this.articleIndex],this.cancelTalk(),this.readChilds(this.selectedArticle),this.articleIndex===t.length-1&&(this.articleIndex=0)),this.screenReaderStatus&&!0===e.ctrlKey&&"arrowleft"===e.key.toLowerCase()&&(-1===this.articleIndex?this.articleIndex+=1:0==this.articleIndex?this.articleIndex=t.length-1:this.articleIndex-=1,this.selectedArticle=t[this.articleIndex],this.cancelTalk(),this.readChilds(this.selectedArticle)))}activeScreenReader(e){this.useScreenReader&&!0===e.ctrlKey&&" "===e.key.toLowerCase()&&(this.screenReaderStatus?this.sayGoodbay():this.sayWelcome(),this.screenReaderStatus=!this.screenReaderStatus)}moveBetweenLinks(e){if(this.screenReaderStatus&&!1===e.ctrlKey&&"enter"===e.key.toLowerCase()&&null!=this.selectedLink&&(console.log(this.selectedLink),this.selectedLink.click()),this.screenReaderStatus&&!0===e.ctrlKey&&"enter"===e.key.toLowerCase()){let e=document.getElementsByClassName("text_reader_link");console.log(e[this.linkIndex].tagName),this.selectedLink=e[this.linkIndex],this.selectedLink.focus(),"TEXTAREA"==e[this.linkIndex].tagName?(this.selectedLink.addEventListener("input",(()=>{console.log(this.selectedLink)})),this.talk("Seleccionado un text area",!0)):null!==this.selectedLink.textContent&&this.talk(this.selectedLink.textContent,!0),this.linkIndex===e.length-1?this.linkIndex=0:this.linkIndex+=1}}cancelReader(e){this.useScreenReader&&"escape"===e.key.toLowerCase()&&this.talk("")}reRead(e){this.useScreenReader&&!0===e.ctrlKey&&"backspace"===e.key.toLowerCase()&&null!=this.selectedArticle&&null!=this.selectedArticle.textContent&&this.talk(this.selectedArticle.textContent)}}class o{static addZoomMessageTextBoxClass(){const e=document.styleSheets[0];e.insertRule(".zoom-message-txtbox {  \n          display: flex;\n          align-items: center;\n          justify-content: center;\n          position: fixed;\n          top: 50%;\n          left: 50%;\n          transform: translate(-50%, -50%);\n          z-index: 9999;\n          background-color: #FFFF00;\n          color: #000000;\n          font-size: 20rem;\n          text-align: center;\n          width: 80%;\n          height: 80%;\n          font-family: Arial, sans-serif;\n      }",e.cssRules.length)}}class a{constructor(){this.TRANSITION_DURATION=800,this.level=1,this.mouseX=0,this.mouseY=0,this.panEngageTimeout=-1,this.panUpdateInterval=-1,this.callbackTimeout=-1,this.supportsTransforms="WebkitTransform"in document.body.style||"MozTransform"in document.body.style||"msTransform"in document.body.style||"OTransform"in document.body.style||"transform"in document.body.style,this.keyupEvent=e=>{1!==this.level&&27===e.keyCode&&this.out(void 0)},this.mouseMoveEvent=e=>{1!==this.level&&(this.mouseX=e.clientX,this.mouseY=e.clientY)},this.supportsTransforms&&(document.body.style.transition="transform "+this.TRANSITION_DURATION+"ms ease"),document.addEventListener("keyup",this.keyupEvent),document.addEventListener("mousemove",this.mouseMoveEvent)}magnify(e,t){var s=this.getScrollOffset();if(e.width=e.width||1,e.height=e.height||1,e.x-=(window.innerWidth-e.width*t)/2,e.y-=(window.innerHeight-e.height*t)/2,this.supportsTransforms)if(1===t)document.body.style.transform="";else{var i=s.x+"px "+s.y+"px",n="translate("+-e.x+"px,"+-e.y+"px) scale("+t+")";document.body.style.transformOrigin=i,document.body.style.transform=n}else 1===t?(document.body.style.position="",document.body.style.left="",document.body.style.top="",document.body.style.width="",document.body.style.height=""):(document.body.style.position="relative",document.body.style.left=-(s.x+e.x)/t+"px",document.body.style.top=-(s.y+e.y)/t+"px",document.body.style.width=100*t+"%",document.body.style.height=100*t+"%");this.level=t}pan(){var e=.12*window.innerWidth,t=.12*window.innerHeight,s=this.getScrollOffset();this.mouseY<t?window.scroll(s.x,s.y-(1-this.mouseY/t)*(14/this.level)):this.mouseY>window.innerHeight-t&&window.scroll(s.x,s.y+(1-(window.innerHeight-this.mouseY)/t)*(14/this.level)),this.mouseX<e?window.scroll(s.x-(1-this.mouseX/e)*(14/this.level),s.y):this.mouseX>window.innerWidth-e&&window.scroll(s.x+(1-(window.innerWidth-this.mouseX)/e)*(14/this.level),s.y)}getScrollOffset(){return{x:void 0!==window.scrollX?window.scrollX:window.pageXOffset,y:void 0!==window.scrollY?window.scrollY:window.pageYOffset}}to(e){if(1!==this.level)this.out(void 0);else{if(e.x=e.x||0,e.y=e.y||0,e.element){var t="number"==typeof e.padding?e.padding:20,s=e.element.getBoundingClientRect();e.x=s.left-t,e.y=s.top-t,e.width=s.width+2*t,e.height=s.height+2*t}void 0!==e.width&&void 0!==e.height&&(e.scale=Math.max(Math.min(window.innerWidth/e.width,window.innerHeight/e.height),1)),e.scale>1&&(e.x*=e.scale,e.y*=e.scale,e.x=Math.max(e.x,0),e.y=Math.max(e.y,0),this.magnify(e,e.scale),!1!==e.pan&&(this.panEngageTimeout=setTimeout(this.calculatePanUpdateInterval,this.TRANSITION_DURATION)),"function"==typeof e.callback&&(this.callbackTimeout=setTimeout(e.callback,this.TRANSITION_DURATION)))}}calculatePanUpdateInterval(){this.panUpdateInterval=setInterval(this.pan,1e3/60)}out(e){clearTimeout(this.panEngageTimeout),clearInterval(this.panUpdateInterval),clearTimeout(this.callbackTimeout),this.magnify(new l(0,0,1),1),e&&"function"==typeof e.callback&&setTimeout(e.callback,this.TRANSITION_DURATION),this.level=1}}class l{constructor(e,t,s){this.x=0,this.y=0,this.scale=0,this.x=e,this.y=t,this.scale=s}}class r{constructor(e=!1){this.enableZoomOptions=e,this.zoomStatus=!1,this.active_message='<div id="zoom-status" class="zoom-message-txtbox">On</div>',this.deactive_message='<div id="zoom-status" class="zoom-message-txtbox">Off</div>',this.toogleZoom=e=>{this.zoomService.to(new l(e.x,e.y,10))},this.zoomService=new a}status(){return this.enableZoomOptions}toogleStatus(){this.enableZoomOptions=!this.enableZoomOptions}activeZoom(e,t){this.enableZoomOptions&&(e||!0!==t.ctrlKey||"backspace"!==t.key.toLowerCase()||(o.addZoomMessageTextBoxClass(),this.initialClickEvent(document.body)))}initialClickEvent(e){this.zoomStatus?this.showBoxMessage(e,this.deactive_message,!this.zoomStatus):this.showBoxMessage(e,this.active_message,!this.zoomStatus),this.zoomStatus=!this.zoomStatus}showBoxMessage(e,t,s){e.insertAdjacentHTML("beforebegin",t),setTimeout((()=>{const e=document.getElementById("zoom-status");null==e||e.remove()}),2e3),s?e.addEventListener("click",this.toogleZoom):e.removeEventListener("click",this.toogleZoom)}}class c{static mainMessage(e){return e.style.display="flex",e.style.alignItems="center",e.style.alignContent="center",e.style.justifyItems="center",e.style.justifyContent="center",e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.backgroundColor="#F5F5DC",e.style.zIndex="999",e.style.color="#006400",e}static messageContent(e){return e.style.textAlign="center",e.style.flex="1",e.style.display="flex",e.style.alignContent="center",e.style.justifyContent="center",e}static closeButtom(e){return e.style.background="none",e.style.border="none",e.style.padding="0",e.style.margin="0",e.style.cursor="pointer",e.style.width="50px",e.style.height="50px",e.style.alignSelf="flex-end",e.style.color="#006400",e}static addFlyMenuStyle(){const e=document.styleSheets[0];e.insertRule("\n        .fly_menu {\n          position: fixed;\n          right: 70px;\n          width: 72px;\n          height: 72px;\n          border-radius: 50%;\n          background-color: #F5F5DC;\n          color: #006400;\n          text-align: center;\n          line-height: 50px;\n          flex-wrap: wrap;\n          cursor: pointer;\n          display: flex;\n          align-content: center;\n          justify-content: center;\n          z-index: 9999;\n        }\n    ",e.cssRules.length)}static svgHuman(e,t="34",s="38"){const i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("width",t),i.setAttribute("height",s),i.setAttribute("viewBox","0 0 34 38"),i.setAttribute("xmlns","http://www.w3.org/2000/svg");const n=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttribute("d","M33.5 13.5H22.5V37.3333H18.8333V26.3333H15.1667V37.3333H11.5V13.5H0.5V9.83332H33.5M17 0.666656C17.9725 0.666656 18.9051 1.05296 19.5927 1.7406C20.2804 2.42823 20.6667 3.36086 20.6667 4.33332C20.6667 5.30578 20.2804 6.23841 19.5927 6.92605C18.9051 7.61368 17.9725 7.99999 17 7.99999C16.0275 7.99999 15.0949 7.61368 14.4073 6.92605C13.7196 6.23841 13.3333 5.30578 13.3333 4.33332C13.3333 2.29832 14.965 0.666656 17 0.666656Z"),n.setAttribute("fill",e),i.appendChild(n),i}static svgCloseButtom(e){const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("fill",e),t.setAttribute("viewBox","0 0 32 32");const s=document.createElementNS("http://www.w3.org/2000/svg","path");return s.setAttribute("d","M7.004 23.087l7.08-7.081-7.07-7.071L8.929 7.02l7.067 7.069L23.084 7l1.912 1.913-7.089 7.093 7.075 7.077-1.912 1.913-7.074-7.073L8.917 25z"),t.appendChild(s),t}static addBufferOptionsClass(){const e=document.styleSheets[0];e.insertRule("\n        .buffer_options {\n            position: absolute;\n            top: 130px;\n            right: 70px;\n            border-radius: 10px;\n            height: auto; \n            max-height: 100%;\n            overflow-y: auto; \n            z-index: 9999;\n            background-color: #F5F5DC;\n            color: #006400;\n        }\n    ",e.cssRules.length)}static toggleSwitchClasses(){this.toogleSwitchClass(),this.toggleSwitchCircle(),this.toggleSwitchActive(),this.toggleSwitchAnimation()}static toogleSwitchClass(){const e=document.styleSheets[0];e.insertRule("\n        .toggle-switch {\n            width: 60px;\n            height: 30px;\n            background-color: #ccc;\n            border-radius: 15px;\n            display: flex;\n            align-items: center;\n            cursor: pointer;\n            transition: background-color 0.3s, transform 0.3s;\n        }\n    ",e.cssRules.length)}static toggleSwitchCircle(){const e=document.styleSheets[0];e.insertRule("\n        .toggle-switch-circle {\n            width: 30px;\n            height: 30px;\n            background-color: white;\n            border-radius: 50%;\n            transition: transform 0.3s;\n        }",e.cssRules.length)}static toggleSwitchActive(){const e=document.styleSheets[0];e.insertRule("\n        .toggle-switch.active {\n            background-color: #2ecc71;\n        }",e.cssRules.length)}static toggleSwitchAnimation(){const e=document.styleSheets[0];e.insertRule("\n        .toggle-switch.active .toggle-switch-circle {\n            transform: translateX(30px);\n        }",e.cssRules.length)}static addOptionFunctionsClass(){const e=document.styleSheets[0];e.insertRule("\n        .option_menu_eyeeassist {\n          display: flex;\n          padding: 10px;\n          justify-content: space-between;\n        }",e.cssRules.length)}}new class{constructor(e=!1,t=!1,i=!1,o=""){this.token=o,this.animacionEnProgreso=!1,this.initMessageClose=!1,this.viewOptionsOn=!1,this.buildOption=e=>{var t;const s=document.createElement("div");var i=document.createElement("div");s.id="option_menu_eyeassist_"+e.name;const n=document.createElement("div");n.textContent=e.display_name,n.style.paddingRight="20px";const o=document.createElement("div");o.className="toggle-switch",o.id="toggleSwitch"+e.name;const a=document.createElement("div");if(a.className="toggle-switch-circle",o.appendChild(a),o.addEventListener("click",(e=>{var t;switch(o.id){case"toggleSwitchZoom":this.ZoomObject.toogleStatus(),localStorage.setItem("zoomStatus",JSON.stringify(this.ZoomObject.status()));break;case"toggleSwitchColors":this.FilterObject.toggleStatus();var s=this.FilterObject.showFilterOptionsList();null===(t=i.parentElement)||void 0===t||t.append(s),localStorage.setItem("filterStatus",JSON.stringify(this.FilterObject.status()));break;case"toggleSwitchReader":this.ScreenReaderObject.toggleStatus(),localStorage.setItem("readerStatus",JSON.stringify(this.ScreenReaderObject.status()))}o.classList.toggle("active")})),i.className="option_menu_eyeeassist",i.append(n),i.append(o),s.append(i),e.status&&(o.classList.toggle("active"),"Colors"==e.name)){console.log("Agregando colores");var l=this.FilterObject.showFilterOptionsList();null===(t=i.parentElement)||void 0===t||t.append(l)}return s},this.showOptions=()=>{if(console.log("Mostrando opciones"),this.viewOptionsOn){const e=document.getElementById("buffer_options");return null==e||e.remove(),void(this.viewOptionsOn=!this.viewOptionsOn)}const e=document.createElement("div");e.id="buffer_options",e.className="buffer_options",[{name:"Zoom",status:this.ZoomObject.status(),display_name:"Zoom"},{name:"Colors",status:this.FilterObject.status(),display_name:"Filtros de color"},{name:"Reader",status:this.ScreenReaderObject.status(),display_name:"Lectura en voz alta"}].forEach((t=>{e.appendChild(this.buildOption(t))})),document.body.appendChild(e),this.viewOptionsOn=!this.viewOptionsOn},this.cerrarModal=()=>{if(!this.animacionEnProgreso){const e=document.getElementById("eyeeasist-initial-message"),t=document.getElementById("fly_menu");this.animacionEnProgreso=!0;const s=null==e?void 0:e.animate([{opacity:1,transform:"translateY(0)"},{opacity:0,transform:"translateY(-100%)"}],{duration:300,easing:"ease-out"}),i=null==t?void 0:t.animate([{top:"70px"},{top:"30px"}],{duration:1e3,easing:"ease"});s&&i&&(s.onfinish=()=>{e&&(e.style.display="none"),this.animacionEnProgreso=!1,localStorage.setItem("initMessageClose","true")},i.onfinish=()=>{t&&(t.style.top="30px")})}},"true"==localStorage.getItem("initMessageClose")&&(this.initMessageClose=!0),c.toggleSwitchClasses(),c.addBufferOptionsClass(),c.addFlyMenuStyle(),c.addOptionFunctionsClass(),this.zoomStatus=e,this.filterStatus=t,this.readerStatus=i;const a=localStorage.getItem("zoomStatus");a&&(console.log("Hay zoom status guardado",JSON.parse(a)),this.zoomStatus=JSON.parse(a));const l=localStorage.getItem("filterStatus");l&&(console.log("Hay filter status guardado",JSON.parse(l)),this.filterStatus=JSON.parse(l));const d=localStorage.getItem("readerStatus");d&&(console.log("Hay reader status guardado",JSON.parse(d)),this.readerStatus=JSON.parse(d)),this.ZoomObject=new r(this.zoomStatus),this.FilterObject=new s(this.filterStatus),this.ScreenReaderObject=new n(this.readerStatus,this.token)}start(){this.showInitMessage(),this.showFlyMenu(),document.addEventListener("keydown",(e=>{console.log(e.key),this.ZoomObject.activeZoom(this.ScreenReaderObject.enable(),e),this.ScreenReaderObject.keybindsScreenReader(e)}))}showFlyMenu(){const e=document.createElement("div");e.id="fly_menu",e.className="fly_menu",e.style.top=this.initMessageClose?"30px":"70px",e.appendChild(c.svgHuman("#006400")),e.addEventListener("click",this.showOptions),document.body.appendChild(e)}showInitMessage(){let e=document.createElement("div");e=c.mainMessage(e),e.id="eyeeasist-initial-message",this.initMessageClose&&(e.style.display="none");let t=document.createElement("div");t=c.messageContent(t);let s=document.createElement("span");s.textContent="Esta página cuenta con herramientas de accesibilidad. Para activar y/o desactivar estas herramientas presiona cmd + A o haz click en el botón";let i=document.createElement("button");i=c.closeButtom(i),i.addEventListener("click",this.cerrarModal),i.appendChild(c.svgCloseButtom("#006400")),t.appendChild(s),t.appendChild(c.svgHuman("#006400","20","20")),e.appendChild(t),e.appendChild(i),document.body.insertBefore(e,document.body.firstChild)}}(!0,!0,!0).start()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVdWLFlBQVlxUSxHQUN2QjNQLEVBQVdWLFlBQVl1USxHQUN2QjVTLFNBQVNNLEtBQUt3RixhQUFhL0MsRUFBWS9DLFNBQVNNLEtBQUt1UyxXQUN6RCxJRHhMOEIsR0FBTSxHQUFNLEdBQ25DTixPIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXllYXNzaXN0LWxpYnJhcnkvLi9zcmMvZmlsdGVyL2ZpbHRlci1tb2R1bGUvZmlsdGVyX3NlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vZXllYXNzaXN0LWxpYnJhcnkvLi9zcmMvZmlsdGVyL3N0eWxlcy9jc3MtZmlsdGVyLWNsYXNzZXMudHMiLCJ3ZWJwYWNrOi8vZXllYXNzaXN0LWxpYnJhcnkvLi9zcmMvZmlsdGVyL2ZpbHRlci50cyIsIndlYnBhY2s6Ly9leWVhc3Npc3QtbGlicmFyeS8uL3NyYy9zY3JlZW5fcmVhZGVyL3NjcmVlbl9yZWFkZXIudHMiLCJ3ZWJwYWNrOi8vZXllYXNzaXN0LWxpYnJhcnkvLi9zcmMvem9vbS9zdHlsZXMvY3NzLXpvb20tY2xhc3Nlcy50cyIsIndlYnBhY2s6Ly9leWVhc3Npc3QtbGlicmFyeS8uL3NyYy96b29tL3pvb20tbW9kdWxlL3pvb21fc2VydmljZS50cyIsIndlYnBhY2s6Ly9leWVhc3Npc3QtbGlicmFyeS8uL3NyYy96b29tL3pvb20udHMiLCJ3ZWJwYWNrOi8vZXllYXNzaXN0LWxpYnJhcnkvLi9zcmMvbWFpbi9zdHlsZXMvY3NzLWV5ZWVhc3Npc3QtY2xhc3Nlcy50cyIsIndlYnBhY2s6Ly9leWVhc3Npc3QtbGlicmFyeS8uL3NyYy9hcHAudHMiLCJ3ZWJwYWNrOi8vZXllYXNzaXN0LWxpYnJhcnkvLi9zcmMvbWFpbi9leWVlYXNzaXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBGaWx0ZXJTZXJ2aWNlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5oYXNJbnNlcnRlZEFjY2VzcyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmFjdGl2ZV9maWx0ZXIgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5jb2xvckJsaW5kbmVzc0NsYXNzZXMgPSBbXG4gICAgICAgICAgICBcInByb3Rhbm9waWFcIixcbiAgICAgICAgICAgIFwicHJvdGFub21hbHlcIixcbiAgICAgICAgICAgIFwiZGV1dGVyYW5vcGlhXCIsXG4gICAgICAgICAgICBcImRldXRlcmFub21hbHlcIixcbiAgICAgICAgICAgIFwidHJpdGFub3BpYVwiLFxuICAgICAgICAgICAgXCJ0cml0YW5vbWFseVwiLFxuICAgICAgICAgICAgXCJhY2hyb21hdG9wc2lhXCIsXG4gICAgICAgICAgICBcImFjaHJvbWF0b21hbHlcIixcbiAgICAgICAgICAgIFwiZ3JheXNjYWxlXCJcbiAgICAgICAgXTtcbiAgICAgICAgdGhpcy52aXNpb25DbGFzc2VzID0gW1xuICAgICAgICAgICAgXCJ2aXNpb24tbG9zcy1tb2RlcmF0ZVwiLFxuICAgICAgICAgICAgXCJ2aXNpb24tbG9zcy1zZXZlcmVcIixcbiAgICAgICAgICAgIFwidmlzaW9uLWJsaW5kbmVzc1wiXG4gICAgICAgIF07XG4gICAgICAgIHRoaXMuY3NzRmlsdGVyID0gYFxyXG4gIDxzdHlsZT4ucHJvdGFub3BpYXstd2Via2l0LWZpbHRlcjp1cmwoI3Byb3Rhbm9waWEpIGdyYXlzY2FsZSgwKSFpbXBvcnRhbnQ7ZmlsdGVyOnVybCgjcHJvdGFub3BpYSkgZ3JheXNjYWxlKDApIWltcG9ydGFudH0ucHJvdGFub21hbHl7LXdlYmtpdC1maWx0ZXI6dXJsKCNwcm90YW5vbWFseSkgZ3JheXNjYWxlKDApIWltcG9ydGFudDtmaWx0ZXI6dXJsKCNwcm90YW5vbWFseSkgZ3JheXNjYWxlKDApIWltcG9ydGFudH0uZGV1dGVyYW5vcGlhey13ZWJraXQtZmlsdGVyOnVybCgjZGV1dGVyYW5vcGlhKSBncmF5c2NhbGUoMCkhaW1wb3J0YW50O2ZpbHRlcjp1cmwoI2RldXRlcmFub3BpYSkgZ3JheXNjYWxlKDApIWltcG9ydGFudH0uZGV1dGVyYW5vbWFseXstd2Via2l0LWZpbHRlcjp1cmwoI2RldXRlcmFub21hbHkpIGdyYXlzY2FsZSgwKSFpbXBvcnRhbnQ7ZmlsdGVyOnVybCgjZGV1dGVyYW5vbWFseSkgZ3JheXNjYWxlKDApIWltcG9ydGFudH0udHJpdGFub3BpYXstd2Via2l0LWZpbHRlcjp1cmwoI3RyaXRhbm9waWEpIGdyYXlzY2FsZSgwKSFpbXBvcnRhbnQ7ZmlsdGVyOnVybCgjdHJpdGFub3BpYSkgZ3JheXNjYWxlKDApIWltcG9ydGFudH0udHJpdGFub21hbHl7LXdlYmtpdC1maWx0ZXI6dXJsKCN0cml0YW5vbWFseSkgZ3JheXNjYWxlKDApIWltcG9ydGFudDtmaWx0ZXI6dXJsKCN0cml0YW5vbWFseSkgZ3JheXNjYWxlKDApIWltcG9ydGFudH0uYWNocm9tYXRvcHNpYXstd2Via2l0LWZpbHRlcjp1cmwoI2FjaHJvbWF0b3BzaWEpIGdyYXlzY2FsZSgwKSFpbXBvcnRhbnQ7ZmlsdGVyOnVybCgjYWNocm9tYXRvcHNpYSkgZ3JheXNjYWxlKDApIWltcG9ydGFudH0uYWNocm9tYXRvbWFseXstd2Via2l0LWZpbHRlcjp1cmwoI2FjaHJvbWF0b21hbHkpIGdyYXlzY2FsZSgwKSFpbXBvcnRhbnQ7ZmlsdGVyOnVybCgjYWNocm9tYXRvbWFseSkgZ3JheXNjYWxlKDApIWltcG9ydGFudH0uZ3JheXNjYWxley13ZWJraXQtZmlsdGVyOmdyYXlzY2FsZSgxMDAlKSFpbXBvcnRhbnQ7ZmlsdGVyOmdyYXlzY2FsZSgxMDAlKSFpbXBvcnRhbnR9LnZpc2lvbi1sb3NzLW1vZGVyYXRlIGJvZHk+Knstd2Via2l0LWZpbHRlcjpibHVyKDFweCkhaW1wb3J0YW50O2ZpbHRlcjpibHVyKDFweCkhaW1wb3J0YW50fS52aXNpb24tbG9zcy1zZXZlcmUgYm9keT4qey13ZWJraXQtZmlsdGVyOmJsdXIoMTBweCkhaW1wb3J0YW50O2ZpbHRlcjpibHVyKDEwcHgpIWltcG9ydGFudH0udmlzaW9uLWJsaW5kbmVzcyBib2R5Pip7YmFja2dyb3VuZC1jb2xvcjojZmZmIWltcG9ydGFudDstd2Via2l0LWZpbHRlcjpicmlnaHRuZXNzKDApIWltcG9ydGFudDtmaWx0ZXI6YnJpZ2h0bmVzcygwKSFpbXBvcnRhbnR9I2FjY2Vzcy1maWx0ZXJ7Ym9yZGVyOjA7Y2xpcDpyZWN0KDFweCwxcHgsMXB4LDFweCk7LXdlYmtpdC1jbGlwLXBhdGg6aW5zZXQoNTAlKTtjbGlwLXBhdGg6aW5zZXQoNTAlKTtoZWlnaHQ6MXB4O21hcmdpbjotMXB4O3dpZHRoOjFweDtvdmVyZmxvdzpoaWRkZW47cG9zaXRpb246YWJzb2x1dGUhaW1wb3J0YW50O3dvcmQtd3JhcDpub3JtYWwhaW1wb3J0YW50fTwvc3R5bGU+YDtcbiAgICAgICAgdGhpcy5zdmdGaWx0ZXJUZW1wbGF0ZSA9IGA8c3ZnIFxyXG4gIGlkPVwiYWNjZXNzLWZpbHRlclwiXHJcbiAgYXJpYS1oaWRkZW49XCJ0cnVlXCJcclxuICB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCJcclxuICB2ZXJzaW9uPVwiMS4xXCI+XHJcbiAgPGRlZnM+XHJcbiAgICA8ZmlsdGVyIGlkPVwicHJvdGFub3BpYVwiPlxyXG4gICAgICA8ZmVDb2xvck1hdHJpeFxyXG4gICAgICAgIGluPVwiU291cmNlR3JhcGhpY1wiXHJcbiAgICAgICAgdHlwZT1cIm1hdHJpeFwiXHJcbiAgICAgICAgdmFsdWVzPVwiMC41NjcsIDAuNDMzLCAwLCAgICAgMCwgMFxyXG4gICAgICAgICAgICAgICAgMC41NTgsIDAuNDQyLCAwLCAgICAgMCwgMFxyXG4gICAgICAgICAgICAgICAgMCwgICAgIDAuMjQyLCAwLjc1OCwgMCwgMFxyXG4gICAgICAgICAgICAgICAgMCwgICAgIDAsICAgICAwLCAgICAgMSwgMFwiLz5cclxuICAgIDwvZmlsdGVyPlxyXG4gICAgPGZpbHRlciBpZD1cInByb3Rhbm9tYWx5XCI+XHJcbiAgICAgIDxmZUNvbG9yTWF0cml4XHJcbiAgICAgICAgaW49XCJTb3VyY2VHcmFwaGljXCJcclxuICAgICAgICB0eXBlPVwibWF0cml4XCJcclxuICAgICAgICB2YWx1ZXM9XCIwLjgxNywgMC4xODMsIDAsICAgICAwLCAwXHJcbiAgICAgICAgICAgICAgICAwLjMzMywgMC42NjcsIDAsICAgICAwLCAwXHJcbiAgICAgICAgICAgICAgICAwLCAgICAgMC4xMjUsIDAuODc1LCAwLCAwXHJcbiAgICAgICAgICAgICAgICAwLCAgICAgMCwgICAgIDAsICAgICAxLCAwXCIvPlxyXG4gICAgPC9maWx0ZXI+XHJcbiAgICA8ZmlsdGVyIGlkPVwiZGV1dGVyYW5vcGlhXCI+XHJcbiAgICAgIDxmZUNvbG9yTWF0cml4XHJcbiAgICAgICAgaW49XCJTb3VyY2VHcmFwaGljXCJcclxuICAgICAgICB0eXBlPVwibWF0cml4XCJcclxuICAgICAgICB2YWx1ZXM9XCIwLjYyNSwgMC4zNzUsIDAsICAgMCwgMFxyXG4gICAgICAgICAgICAgICAgMC43LCAgIDAuMywgICAwLCAgIDAsIDBcclxuICAgICAgICAgICAgICAgIDAsICAgICAwLjMsICAgMC43LCAwLCAwXHJcbiAgICAgICAgICAgICAgICAwLCAgICAgMCwgICAgIDAsICAgMSwgMFwiLz5cclxuICAgIDwvZmlsdGVyPlxyXG4gICAgPGZpbHRlciBpZD1cImRldXRlcmFub21hbHlcIj5cclxuICAgICAgPGZlQ29sb3JNYXRyaXhcclxuICAgICAgICBpbj1cIlNvdXJjZUdyYXBoaWNcIlxyXG4gICAgICAgIHR5cGU9XCJtYXRyaXhcIlxyXG4gICAgICAgIHZhbHVlcz1cIjAuOCwgICAwLjIsICAgMCwgICAgIDAsIDBcclxuICAgICAgICAgICAgICAgIDAuMjU4LCAwLjc0MiwgMCwgICAgIDAsIDBcclxuICAgICAgICAgICAgICAgIDAsICAgICAwLjE0MiwgMC44NTgsIDAsIDBcclxuICAgICAgICAgICAgICAgIDAsICAgICAwLCAgICAgMCwgICAgIDEsIDBcIi8+XHJcbiAgICA8L2ZpbHRlcj5cclxuICAgIDxmaWx0ZXIgaWQ9XCJ0cml0YW5vcGlhXCI+XHJcbiAgICAgIDxmZUNvbG9yTWF0cml4XHJcbiAgICAgICAgaW49XCJTb3VyY2VHcmFwaGljXCJcclxuICAgICAgICB0eXBlPVwibWF0cml4XCJcclxuICAgICAgICB2YWx1ZXM9XCIwLjk1LCAwLjA1LCAgMCwgICAgIDAsIDBcclxuICAgICAgICAgICAgICAgIDAsICAgIDAuNDMzLCAwLjU2NywgMCwgMFxyXG4gICAgICAgICAgICAgICAgMCwgICAgMC40NzUsIDAuNTI1LCAwLCAwXHJcbiAgICAgICAgICAgICAgICAwLCAgICAwLCAgICAgMCwgICAgIDEsIDBcIi8+XHJcbiAgICA8L2ZpbHRlcj5cclxuICAgIDxmaWx0ZXIgaWQ9XCJ0cml0YW5vbWFseVwiPlxyXG4gICAgICA8ZmVDb2xvck1hdHJpeFxyXG4gICAgICAgIGluPVwiU291cmNlR3JhcGhpY1wiXHJcbiAgICAgICAgdHlwZT1cIm1hdHJpeFwiXHJcbiAgICAgICAgdmFsdWVzPVwiMC45NjcsIDAuMDMzLCAwLCAgICAgMCwgMFxyXG4gICAgICAgICAgICAgICAgMCwgICAgIDAuNzMzLCAwLjI2NywgMCwgMFxyXG4gICAgICAgICAgICAgICAgMCwgICAgIDAuMTgzLCAwLjgxNywgMCwgMFxyXG4gICAgICAgICAgICAgICAgMCwgICAgIDAsICAgICAwLCAgICAgMSwgMFwiLz5cclxuICAgIDwvZmlsdGVyPlxyXG4gICAgPGZpbHRlciBpZD1cImFjaHJvbWF0b3BzaWFcIj5cclxuICAgICAgPGZlQ29sb3JNYXRyaXhcclxuICAgICAgICBpbj1cIlNvdXJjZUdyYXBoaWNcIlxyXG4gICAgICAgIHR5cGU9XCJtYXRyaXhcIlxyXG4gICAgICAgIHZhbHVlcz1cIjAuMjk5LCAwLjU4NywgMC4xMTQsIDAsIDBcclxuICAgICAgICAgICAgICAgIDAuMjk5LCAwLjU4NywgMC4xMTQsIDAsIDBcclxuICAgICAgICAgICAgICAgIDAuMjk5LCAwLjU4NywgMC4xMTQsIDAsIDBcclxuICAgICAgICAgICAgICAgIDAsICAgICAwLCAgICAgMCwgICAgIDEsIDBcIi8+XHJcbiAgICA8L2ZpbHRlcj5cclxuICAgIDxmaWx0ZXIgaWQ9XCJhY2hyb21hdG9tYWx5XCI+XHJcbiAgICAgIDxmZUNvbG9yTWF0cml4XHJcbiAgICAgICAgaW49XCJTb3VyY2VHcmFwaGljXCJcclxuICAgICAgICB0eXBlPVwibWF0cml4XCJcclxuICAgICAgICB2YWx1ZXM9XCIwLjYxOCwgMC4zMjAsIDAuMDYyLCAwLCAwXHJcbiAgICAgICAgICAgICAgICAwLjE2MywgMC43NzUsIDAuMDYyLCAwLCAwXHJcbiAgICAgICAgICAgICAgICAwLjE2MywgMC4zMjAsIDAuNTE2LCAwLCAwXHJcbiAgICAgICAgICAgICAgICAwLCAgICAgMCwgICAgIDAsICAgICAxLCAwXCIvPlxyXG4gICAgPC9maWx0ZXI+XHJcbiAgPC9kZWZzPlxyXG48L3N2Zz5gO1xuICAgIH1cbiAgICBhcGxpY2FyRmlsdHJvKGZpbHRybykge1xuICAgICAgICBpZiAoZmlsdHJvID09IG51bGwpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGFsIGFwbGljYXIgbG9zIGZpbHRyb3MsIGxhIG9wY2lvbiBubyBzZSBwaW50YWRhIGNvcnJlY3RhbWVudGUnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuYWN0aXZlX2ZpbHRlcikge1xuICAgICAgICAgICAgdGhpcy50b2dnbGVUZXN0KFwiY29sb3JCbGluZG5lc3NcIiwgZmlsdHJvKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlVGVzdHMoXCJjb2xvckJsaW5kbmVzc1wiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFjdGl2ZV9maWx0ZXIgPSAhdGhpcy5hY3RpdmVfZmlsdGVyO1xuICAgIH1cbiAgICB0b2dnbGVUZXN0KHRlc3RUeXBlLCB0ZXN0Q2xhc3MpIHtcbiAgICAgICAgaWYgKCF0aGlzLmhhc0luc2VydGVkQWNjZXNzKSB7XG4gICAgICAgICAgICB0aGlzLmluc2VydEZpbGVzKHRoaXMuc3ZnRmlsdGVyVGVtcGxhdGUsIHRoaXMuY3NzRmlsdGVyKTtcbiAgICAgICAgICAgIHRoaXMuaGFzSW5zZXJ0ZWRBY2Nlc3MgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVtb3ZlVGVzdHModGVzdFR5cGUpO1xuICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0ZXN0Q2xhc3MpO1xuICAgIH1cbiAgICBpbnNlcnRGaWxlcyhzdmcsIGNzcykge1xuICAgICAgICBkb2N1bWVudC5ib2R5Lmluc2VydEFkamFjZW50SFRNTChcImJlZm9yZWVuZFwiLCBzdmcpO1xuICAgICAgICBkb2N1bWVudC5ib2R5Lmluc2VydEFkamFjZW50SFRNTChcImJlZm9yZWVuZFwiLCBjc3MpO1xuICAgIH1cbiAgICByZW1vdmVUZXN0cyh0ZXN0VHlwZSkge1xuICAgICAgICBpZiAodGVzdFR5cGUgPT0gXCJ2aXNpb25cIikge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnZpc2lvbkNsYXNzZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLnZpc2lvbkNsYXNzZXNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRlc3RUeXBlID09IFwiY29sb3JCbGluZG5lc3NcIikge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNvbG9yQmxpbmRuZXNzQ2xhc3Nlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuY29sb3JCbGluZG5lc3NDbGFzc2VzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBDc3NGaWx0ZXJDbGFzc2VzIHtcbiAgICBzdGF0aWMgYWRkRmlsdGVyQnVmZmVyU3R5bGVDbGFzcygpIHtcbiAgICAgICAgY29uc3Qgc3R5bGVTaGVldCA9IGRvY3VtZW50LnN0eWxlU2hlZXRzWzBdOyAvLyBBc2Vnw7pyYXRlIGRlIHNlbGVjY2lvbmFyIGVsIHN0eWxlc2hlZXQgYWRlY3VhZG9cbiAgICAgICAgY29uc3QgZmlsdGVyX2J1ZmZlciA9IGBcclxuICAgICAgICAuZmlsdGVyLWxpc3QtYnVmZmVyIHtcclxuICAgICAgICB9XHJcbiAgICBgO1xuICAgICAgICBzdHlsZVNoZWV0Lmluc2VydFJ1bGUoZmlsdGVyX2J1ZmZlciwgc3R5bGVTaGVldC5jc3NSdWxlcy5sZW5ndGgpO1xuICAgIH1cbiAgICBzdGF0aWMgYWRkRmlsdGVyT3B0aW9uc1N0eWxlQ2xhc3MoKSB7XG4gICAgICAgIGNvbnN0IHN0eWxlU2hlZXQgPSBkb2N1bWVudC5zdHlsZVNoZWV0c1swXTsgLy8gQXNlZ8O6cmF0ZSBkZSBzZWxlY2Npb25hciBlbCBzdHlsZXNoZWV0IGFkZWN1YWRvXG4gICAgICAgIGNvbnN0IGZpbHRlcl9vcHRpb24gPSBgXHJcbiAgICAgICAgLmZpbHRlci1vcHRpb24ge1xyXG4gICAgICAgICAgcGFkZGluZzogMC41cmVtO1xyXG4gICAgICAgIH1cclxuICAgIGA7XG4gICAgICAgIHN0eWxlU2hlZXQuaW5zZXJ0UnVsZShmaWx0ZXJfb3B0aW9uLCBzdHlsZVNoZWV0LmNzc1J1bGVzLmxlbmd0aCk7XG4gICAgfVxuICAgIHN0YXRpYyBhZGRGaWx0ZXJTdHlsZUNsYXNzKCkge1xuICAgICAgICBjb25zdCBzdHlsZVNoZWV0ID0gZG9jdW1lbnQuc3R5bGVTaGVldHNbMF07IC8vIEFzZWfDunJhdGUgZGUgc2VsZWNjaW9uYXIgZWwgc3R5bGVzaGVldCBhZGVjdWFkb1xuICAgICAgICBjb25zdCBmaWx0ZXJfYnV0dG9uID0gYFxyXG4gICAgICAgIC5maWx0ZXJfYnV0dG9uIHtcclxuICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDtcclxuICAgICAgICAgIHRvcDogMjBweDtcclxuICAgICAgICAgIHJpZ2h0OiAyMHB4O1xyXG4gICAgICAgICAgd2lkdGg6IDUwcHg7XHJcbiAgICAgICAgICBoZWlnaHQ6IDUwcHg7XHJcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7XHJcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjQzYzVhO1xyXG4gICAgICAgICAgY29sb3I6ICNmZmZmZmY7XHJcbiAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgICAgICAgICBsaW5lLWhlaWdodDogNTBweDtcclxuICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcclxuICAgICAgICAgIHotaW5kZXg6IDk5OTk7XHJcbiAgICAgICAgfVxyXG4gICAgYDtcbiAgICAgICAgc3R5bGVTaGVldC5pbnNlcnRSdWxlKGZpbHRlcl9idXR0b24sIHN0eWxlU2hlZXQuY3NzUnVsZXMubGVuZ3RoKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBGaWx0ZXJTZXJ2aWNlIH0gZnJvbSBcIi4vZmlsdGVyLW1vZHVsZS9maWx0ZXJfc2VydmljZVwiO1xuaW1wb3J0IHsgQ3NzRmlsdGVyQ2xhc3NlcyB9IGZyb20gXCIuL3N0eWxlcy9jc3MtZmlsdGVyLWNsYXNzZXNcIjtcbmV4cG9ydCBjbGFzcyBGaWx0ZXIge1xuICAgIGNvbnN0cnVjdG9yKGVuYWJsZUZpbHRlciA9IGZhbHNlKSB7XG4gICAgICAgIHRoaXMuZW5hYmxlRmlsdGVyID0gZW5hYmxlRmlsdGVyO1xuICAgICAgICB0aGlzLmZpbHRlclZpZXdPbiA9IGZhbHNlO1xuICAgICAgICB0aGlzLnN0YXJ0RmlsdGVyID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjb21wb25lbnQgPSBldmVudC50YXJnZXQ7XG4gICAgICAgICAgICB0aGlzLmZpbHRlclNlcnZpY2UuYXBsaWNhckZpbHRybyhjb21wb25lbnQudGV4dENvbnRlbnQpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnNob3dGaWx0ZXJPcHRpb25zTGlzdCA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5lbmFibGVGaWx0ZXIpIHtcbiAgICAgICAgICAgICAgICB2YXIgZmlsdGVyX2J1ZmZlcl9pbnN0YW5jZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZmlsdGVyX2J1ZmZlclwiKTtcbiAgICAgICAgICAgICAgICBpZiAoZmlsdGVyX2J1ZmZlcl9pbnN0YW5jZSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ05vIGhheSBpbnN0YW5jaWEgZGVsIGJ1ZmZlciBkZSBvcGNpb25lcy4nKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmaWx0ZXJfYnVmZmVyX2luc3RhbmNlLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZmlsdGVyTGlzdCA9IFtcbiAgICAgICAgICAgICAgICBcInByb3Rhbm9waWFcIixcbiAgICAgICAgICAgICAgICBcInByb3Rhbm9tYWx5XCIsXG4gICAgICAgICAgICAgICAgXCJkZXV0ZXJhbm9waWFcIixcbiAgICAgICAgICAgICAgICBcImRldXRlcmFub21hbHlcIixcbiAgICAgICAgICAgICAgICBcInRyaXRhbm9waWFcIixcbiAgICAgICAgICAgICAgICBcInRyaXRhbm9tYWx5XCIsXG4gICAgICAgICAgICAgICAgXCJhY2hyb21hdG9wc2lhXCIsXG4gICAgICAgICAgICAgICAgXCJhY2hyb21hdG9tYWx5XCIsXG4gICAgICAgICAgICAgICAgXCJncmF5c2NhbGVcIixcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBjb25zdCBjb2xvck9wdGlvbnMgPSBbXG4gICAgICAgICAgICAgICAgXCJjb2xvcnNcIixcbiAgICAgICAgICAgICAgICBcImZpbHRlclwiXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgdmFyIGJ1ZmZlckxpc3REaXZFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBidWZmZXJMaXN0RGl2RWxlbWVudC5jbGFzc05hbWUgPSAnZmlsdGVyLWxpc3QtYnVmZmVyJztcbiAgICAgICAgICAgIGJ1ZmZlckxpc3REaXZFbGVtZW50LmlkID0gJ2ZpbHRlcl9idWZmZXInO1xuICAgICAgICAgICAgLypjb2xvck9wdGlvbnMuZm9yRWFjaCgob3B0aW9uKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGZpbHRlcl9idWZmZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZpbHRlcl9idWZmZXJcIik7XG4gICAgICAgICAgICAgIGZpbHRlcl9idWZmZXIuaW5zZXJ0QWRqYWNlbnRIVE1MKFwiYmVmb3JlZW5kXCIsIGJ1aWxkQ29sb3JPcHRpb25zKG9wdGlvbikpO1xuICAgICAgICAgICAgfSkqL1xuICAgICAgICAgICAgZmlsdGVyTGlzdC5mb3JFYWNoKChmaWx0ZXIpID0+IHtcbiAgICAgICAgICAgICAgICBidWZmZXJMaXN0RGl2RWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLmJ1aWxkRmlsdGVyT3B0aW9uKGZpbHRlcikpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gYnVmZmVyTGlzdERpdkVsZW1lbnQ7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZmlsdGVyU2VydmljZSA9IG5ldyBGaWx0ZXJTZXJ2aWNlKCk7XG4gICAgICAgIENzc0ZpbHRlckNsYXNzZXMuYWRkRmlsdGVyQnVmZmVyU3R5bGVDbGFzcygpO1xuICAgICAgICBDc3NGaWx0ZXJDbGFzc2VzLmFkZEZpbHRlck9wdGlvbnNTdHlsZUNsYXNzKCk7XG4gICAgICAgIC8vdGhpcy5zaG93RmlsdGVyT3B0aW9ucygpXG4gICAgfVxuICAgIHN0YXR1cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5hYmxlRmlsdGVyO1xuICAgIH1cbiAgICB0b2dnbGVTdGF0dXMoKSB7XG4gICAgICAgIHRoaXMuZW5hYmxlRmlsdGVyID0gIXRoaXMuZW5hYmxlRmlsdGVyO1xuICAgIH1cbiAgICBzaG93RmlsdGVyT3B0aW9ucygpIHtcbiAgICAgICAgY29uc3QgaW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICAgICAgaW1hZ2Uuc3JjID0gXCJodHRwczovL2dpdGh1Yi5jb20vRXllZUFzc2lzdC9kb2NzL2Jsb2IvZGV2ZWxvcC9zcmMvYXNzZXRzL2xvZ28ucG5nP3Jhdz10cnVlXCI7XG4gICAgICAgIGltYWdlLnN0eWxlLndpZHRoID0gJzUwcHgnO1xuICAgICAgICBpbWFnZS5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnNTAlJztcbiAgICAgICAgY29uc3QgZGl2RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBkaXZFbGVtZW50LmNsYXNzTmFtZSA9ICdmaWx0ZXJfYnV0dG9uJztcbiAgICAgICAgZGl2RWxlbWVudC5pZCA9ICdmaWx0ZXJfYnV0dG9uJztcbiAgICAgICAgZGl2RWxlbWVudC5hcHBlbmRDaGlsZChpbWFnZSk7XG4gICAgICAgIGRpdkVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLnNob3dGaWx0ZXJPcHRpb25zTGlzdCk7XG4gICAgICAgIENzc0ZpbHRlckNsYXNzZXMuYWRkRmlsdGVyU3R5bGVDbGFzcygpO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGRpdkVsZW1lbnQpO1xuICAgIH1cbiAgICBidWlsZEZpbHRlck9wdGlvbihmaWx0ZXJPcHRpb24pIHtcbiAgICAgICAgdmFyIG9wdGlvbkRpdkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgb3B0aW9uRGl2RWxlbWVudC5jbGFzc05hbWUgPSAnZmlsdGVyLW9wdGlvbic7XG4gICAgICAgIG9wdGlvbkRpdkVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLnN0YXJ0RmlsdGVyKTtcbiAgICAgICAgb3B0aW9uRGl2RWxlbWVudC50ZXh0Q29udGVudCA9IGZpbHRlck9wdGlvbjtcbiAgICAgICAgcmV0dXJuIG9wdGlvbkRpdkVsZW1lbnQ7XG4gICAgfVxufVxuIiwidmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgU2NyZWVuUmVhZGVyIHtcbiAgICBjb25zdHJ1Y3Rvcih1c2VTY3JlZW5SZWFkZXIgPSBmYWxzZSwgdG9rZW4gPSBcIlwiKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgdGhpcy51c2VTY3JlZW5SZWFkZXIgPSB1c2VTY3JlZW5SZWFkZXI7XG4gICAgICAgIHRoaXMudG9rZW4gPSB0b2tlbjtcbiAgICAgICAgdGhpcy5zeW50aCA9IHdpbmRvdy5zcGVlY2hTeW50aGVzaXM7XG4gICAgICAgIHRoaXMuc2NyZWVuUmVhZGVyU3RhdHVzID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRBcnRpY2xlID0gbnVsbDtcbiAgICAgICAgdGhpcy5zZWxlY3RlZExpbmsgPSBudWxsO1xuICAgICAgICB0aGlzLmFydGljbGVJbmRleCA9IC0xO1xuICAgICAgICB0aGlzLmxpbmtJbmRleCA9IDA7XG4gICAgICAgIHRoaXMuY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXI7XG4gICAgICAgIHRoaXMudGFsayA9ICh0ZXh0LCBjYW5jZWwgPSB0cnVlKSA9PiB7XG4gICAgICAgICAgICBjYW5jZWwgPyB0aGlzLnN5bnRoLmNhbmNlbCgpIDogXCIgXCI7XG4gICAgICAgICAgICB0aGlzLnN5bnRoLnNwZWFrKG5ldyBTcGVlY2hTeW50aGVzaXNVdHRlcmFuY2UodGV4dCkpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmNhbmNlbFRhbGsgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5jb250cm9sbGVyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250cm9sbGVyLmFib3J0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnRhbGsoXCJcIik7XG4gICAgICAgIH07XG4gICAgICAgIGlmICghdGhpcy51c2VTY3JlZW5SZWFkZXIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBsZXQgdGFnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG4gICAgICAgIHRhZy5zcmMgPSBcImh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL2lmcmFtZV9hcGlcIjtcbiAgICAgICAgbGV0IGZpcnN0U2NyaXB0VGFnID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NjcmlwdCcpWzBdO1xuICAgICAgICAoX2EgPSBmaXJzdFNjcmlwdFRhZy5wYXJlbnROb2RlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuaW5zZXJ0QmVmb3JlKHRhZywgZmlyc3RTY3JpcHRUYWcpO1xuICAgIH1cbiAgICBzdGF0dXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVzZVNjcmVlblJlYWRlcjtcbiAgICB9XG4gICAgdG9nZ2xlU3RhdHVzKCkge1xuICAgICAgICB0aGlzLnVzZVNjcmVlblJlYWRlciA9ICF0aGlzLnVzZVNjcmVlblJlYWRlcjtcbiAgICB9XG4gICAgZW5hYmxlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zY3JlZW5SZWFkZXJTdGF0dXM7XG4gICAgfVxuICAgIHNheVdlbGNvbWUoKSB7XG4gICAgICAgIHRoaXMudGFsayhcIkhvbGEgYmllbnZlbmlkbyBhIGxhIHBhZ2luYSBYLCBzaSBkZXNlYSBsZWVyIGxhcyBhY2Npb25lcyBkZSBsYSBwYWdpbmEgcHJlc2lvbmUgY29udHJvbCB5IGVudGVyXCIpO1xuICAgIH1cbiAgICBzYXlHb29kYmF5KCkge1xuICAgICAgICB0aGlzLnRhbGsoXCJHcmFjaWFzIHBvciB1dGlsaXphciBleWVlYXNzaXN0XCIpO1xuICAgIH1cbiAgICBrZXliaW5kc1NjcmVlblJlYWRlcihldmVudCkge1xuICAgICAgICB0aGlzLmNhbmNlbFJlYWRlcihldmVudCk7XG4gICAgICAgIHRoaXMucmVSZWFkKGV2ZW50KTtcbiAgICAgICAgdGhpcy5hY3RpdmVTY3JlZW5SZWFkZXIoZXZlbnQpO1xuICAgICAgICB0aGlzLm1vdmVCZXR3ZWVuQ29udGVudChldmVudCk7XG4gICAgICAgIHRoaXMubW92ZUJldHdlZW5MaW5rcyhldmVudCk7XG4gICAgfVxuICAgIGdldEltYWdlKHNyYykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCBmZXRjaChzcmMpO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0RGVzY3JpcHRpb24oYmxvYikge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdGhpcy5jb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgICAgICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcbiAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZmlsZScsIGJsb2IsICdpbWFnZW4uanBnJyk7XG4gICAgICAgICAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGJvZHk6IGZvcm1EYXRhLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0aGlzLnRva2VuXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzaWduYWw6IHRoaXMuY29udHJvbGxlci5zaWduYWxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIGZldGNoKCdodHRwOi8vbG9jYWxob3N0OjgwMDAvY2FwdGlvbicsIG9wdGlvbnMpXG4gICAgICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvci5uYW1lID09PSAnQWJvcnRFcnJvcicpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAocmVzcG9uc2UgIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVzY3JpcHRpb24gPSB5aWVsZCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlc2NyaXB0aW9uLm1lc3NhZ2VbMF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gXCJcIjtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJlYWRDaGlsZHMoYXJ0aWNsZSkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAoYXJ0aWNsZS5ub2RlTmFtZSA9PSAnSUZSQU1FJykge1xuICAgICAgICAgICAgICAgIHZhciBwbGF5ZXIgPSBuZXcgWVQuUGxheWVyKGFydGljbGUsIHt9KTtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcGxheWVyLnBsYXlWaWRlbygpO1xuICAgICAgICAgICAgICAgIH0sIDUwMDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFydGljbGUubm9kZU5hbWUgPT0gJ0lNRycpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRhbGsoJ0ltYWdlbiBlbmNvbnRyYWRhJywgZmFsc2UpO1xuICAgICAgICAgICAgICAgIGxldCBpbWcgPSBhcnRpY2xlO1xuICAgICAgICAgICAgICAgIGlmIChpbWcuYWx0ICE9IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YWxrKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhbGsoJ0ltYWdlbiBkZSAnICsgaW1nLmFsdCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLmdldEltYWdlKGltZy5zcmMpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBibG9iID0geWllbGQgcmVzcG9uc2UuYmxvYigpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhbGsoJ2Rlc2NyaWJpZW5kbyBpbWFnZW4nLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlc2NyaXB0aW9uID0geWllbGQgdGhpcy5nZXREZXNjcmlwdGlvbihibG9iKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRlc2NyaXB0aW9uICE9IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGFsaygnSW1hZ2VuIGRlICcgKyBkZXNjcmlwdGlvbiwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50YWxrKCdObyBzZSBwdWRvIGdlbmVyYXIgdW5hIGRlc2NyaXBjaW9uIHBhcmEgbGEgaW1hZ2VuIGVuY29udHJhZGEuJywgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFydGljbGUubm9kZVR5cGUgPT0gTm9kZS5URVhUX05PREUgJiYgKChfYSA9IGFydGljbGUudGV4dENvbnRlbnQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS50cmltKCkpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50YWxrKGFydGljbGUudGV4dENvbnRlbnQsIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoY29uc3QgY2hpbGQgb2YgQXJyYXkuZnJvbShhcnRpY2xlLmNoaWxkTm9kZXMpKSB7XG4gICAgICAgICAgICAgICAgeWllbGQgdGhpcy5yZWFkQ2hpbGRzKGNoaWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG1vdmVCZXR3ZWVuQ29udGVudChldmVudCkge1xuICAgICAgICBsZXQgdGFncyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYXJ0aWNsZVwiKTtcbiAgICAgICAgaWYgKHRhZ3MubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zY3JlZW5SZWFkZXJTdGF0dXMgJiZcbiAgICAgICAgICAgIGV2ZW50LmN0cmxLZXkgPT09IHRydWUgJiZcbiAgICAgICAgICAgIGV2ZW50LmtleS50b0xvd2VyQ2FzZSgpID09PSBcImFycm93cmlnaHRcIikge1xuICAgICAgICAgICAgdGhpcy5hcnRpY2xlSW5kZXggKz0gMTtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRBcnRpY2xlID0gdGFnc1t0aGlzLmFydGljbGVJbmRleF07XG4gICAgICAgICAgICB0aGlzLmNhbmNlbFRhbGsoKTtcbiAgICAgICAgICAgIHRoaXMucmVhZENoaWxkcyh0aGlzLnNlbGVjdGVkQXJ0aWNsZSk7XG4gICAgICAgICAgICBpZiAodGhpcy5hcnRpY2xlSW5kZXggPT09IHRhZ3MubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgIHRoaXMuYXJ0aWNsZUluZGV4ID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zY3JlZW5SZWFkZXJTdGF0dXMgJiZcbiAgICAgICAgICAgIGV2ZW50LmN0cmxLZXkgPT09IHRydWUgJiZcbiAgICAgICAgICAgIGV2ZW50LmtleS50b0xvd2VyQ2FzZSgpID09PSBcImFycm93bGVmdFwiKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5hcnRpY2xlSW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hcnRpY2xlSW5kZXggKz0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmFydGljbGVJbmRleCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXJ0aWNsZUluZGV4ID0gdGFncy5sZW5ndGggLSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcnRpY2xlSW5kZXggLT0gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkQXJ0aWNsZSA9IHRhZ3NbdGhpcy5hcnRpY2xlSW5kZXhdO1xuICAgICAgICAgICAgdGhpcy5jYW5jZWxUYWxrKCk7XG4gICAgICAgICAgICB0aGlzLnJlYWRDaGlsZHModGhpcy5zZWxlY3RlZEFydGljbGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFjdGl2ZVNjcmVlblJlYWRlcihldmVudCkge1xuICAgICAgICBpZiAodGhpcy51c2VTY3JlZW5SZWFkZXIgJiYgZXZlbnQuY3RybEtleSA9PT0gdHJ1ZSAmJiBldmVudC5rZXkudG9Mb3dlckNhc2UoKSA9PT0gXCIgXCIpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5zY3JlZW5SZWFkZXJTdGF0dXMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNheVdlbGNvbWUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuc2F5R29vZGJheSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zY3JlZW5SZWFkZXJTdGF0dXMgPSAhdGhpcy5zY3JlZW5SZWFkZXJTdGF0dXM7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbW92ZUJldHdlZW5MaW5rcyhldmVudCkge1xuICAgICAgICBpZiAodGhpcy5zY3JlZW5SZWFkZXJTdGF0dXMgJiZcbiAgICAgICAgICAgIGV2ZW50LmN0cmxLZXkgPT09IGZhbHNlICYmXG4gICAgICAgICAgICBldmVudC5rZXkudG9Mb3dlckNhc2UoKSA9PT0gXCJlbnRlclwiICYmXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkTGluayAhPSBudWxsKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnNlbGVjdGVkTGluayk7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkTGluay5jbGljaygpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnNjcmVlblJlYWRlclN0YXR1cyAmJlxuICAgICAgICAgICAgZXZlbnQuY3RybEtleSA9PT0gdHJ1ZSAmJlxuICAgICAgICAgICAgZXZlbnQua2V5LnRvTG93ZXJDYXNlKCkgPT09IFwiZW50ZXJcIikge1xuICAgICAgICAgICAgbGV0IGxpbmtzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInRleHRfcmVhZGVyX2xpbmtcIik7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhsaW5rc1t0aGlzLmxpbmtJbmRleF0udGFnTmFtZSk7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkTGluayA9IGxpbmtzW3RoaXMubGlua0luZGV4XTtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRMaW5rLmZvY3VzKCk7XG4gICAgICAgICAgICBpZiAobGlua3NbdGhpcy5saW5rSW5kZXhdLnRhZ05hbWUgPT0gXCJURVhUQVJFQVwiKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZExpbmsuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5zZWxlY3RlZExpbmspO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMudGFsayhcIlNlbGVjY2lvbmFkbyB1biB0ZXh0IGFyZWFcIiwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZExpbmsudGV4dENvbnRlbnQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YWxrKHRoaXMuc2VsZWN0ZWRMaW5rLnRleHRDb250ZW50LCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5saW5rSW5kZXggPT09IGxpbmtzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxpbmtJbmRleCA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxpbmtJbmRleCArPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGNhbmNlbFJlYWRlcihldmVudCkge1xuICAgICAgICBpZiAodGhpcy51c2VTY3JlZW5SZWFkZXIgJiYgZXZlbnQua2V5LnRvTG93ZXJDYXNlKCkgPT09IFwiZXNjYXBlXCIpIHtcbiAgICAgICAgICAgIHRoaXMudGFsayhcIlwiKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZVJlYWQoZXZlbnQpIHtcbiAgICAgICAgaWYgKHRoaXMudXNlU2NyZWVuUmVhZGVyICYmIGV2ZW50LmN0cmxLZXkgPT09IHRydWUgJiYgZXZlbnQua2V5LnRvTG93ZXJDYXNlKCkgPT09IFwiYmFja3NwYWNlXCIpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkQXJ0aWNsZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRBcnRpY2xlLnRleHRDb250ZW50ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YWxrKHRoaXMuc2VsZWN0ZWRBcnRpY2xlLnRleHRDb250ZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJleHBvcnQgY2xhc3MgQ3NzQ2xhc3NlcyB7XG4gICAgc3RhdGljIGFkZFpvb21NZXNzYWdlVGV4dEJveENsYXNzKCkge1xuICAgICAgICBjb25zdCBzdHlsZVNoZWV0ID0gZG9jdW1lbnQuc3R5bGVTaGVldHNbMF07XG4gICAgICAgIHZhciBjc3NSdWxlID0gYC56b29tLW1lc3NhZ2UtdHh0Ym94IHsgIFxyXG4gICAgICAgICAgZGlzcGxheTogZmxleDtcclxuICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDtcclxuICAgICAgICAgIHRvcDogNTAlO1xyXG4gICAgICAgICAgbGVmdDogNTAlO1xyXG4gICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7XHJcbiAgICAgICAgICB6LWluZGV4OiA5OTk5O1xyXG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI0ZGRkYwMDtcclxuICAgICAgICAgIGNvbG9yOiAjMDAwMDAwO1xyXG4gICAgICAgICAgZm9udC1zaXplOiAyMHJlbTtcclxuICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgICAgICAgIHdpZHRoOiA4MCU7XHJcbiAgICAgICAgICBoZWlnaHQ6IDgwJTtcclxuICAgICAgICAgIGZvbnQtZmFtaWx5OiBBcmlhbCwgc2Fucy1zZXJpZjtcclxuICAgICAgfWA7XG4gICAgICAgIHN0eWxlU2hlZXQuaW5zZXJ0UnVsZShjc3NSdWxlLCBzdHlsZVNoZWV0LmNzc1J1bGVzLmxlbmd0aCk7XG4gICAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIFpvb21TZXJ2aWNlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5UUkFOU0lUSU9OX0RVUkFUSU9OID0gODAwO1xuICAgICAgICB0aGlzLmxldmVsID0gMTtcbiAgICAgICAgdGhpcy5tb3VzZVggPSAwO1xuICAgICAgICB0aGlzLm1vdXNlWSA9IDA7XG4gICAgICAgIHRoaXMucGFuRW5nYWdlVGltZW91dCA9IC0xO1xuICAgICAgICB0aGlzLnBhblVwZGF0ZUludGVydmFsID0gLTE7XG4gICAgICAgIHRoaXMuY2FsbGJhY2tUaW1lb3V0ID0gLTE7XG4gICAgICAgIHRoaXMuc3VwcG9ydHNUcmFuc2Zvcm1zID0gJ1dlYmtpdFRyYW5zZm9ybScgaW4gZG9jdW1lbnQuYm9keS5zdHlsZSB8fFxuICAgICAgICAgICAgJ01velRyYW5zZm9ybScgaW4gZG9jdW1lbnQuYm9keS5zdHlsZSB8fFxuICAgICAgICAgICAgJ21zVHJhbnNmb3JtJyBpbiBkb2N1bWVudC5ib2R5LnN0eWxlIHx8XG4gICAgICAgICAgICAnT1RyYW5zZm9ybScgaW4gZG9jdW1lbnQuYm9keS5zdHlsZSB8fFxuICAgICAgICAgICAgJ3RyYW5zZm9ybScgaW4gZG9jdW1lbnQuYm9keS5zdHlsZTtcbiAgICAgICAgdGhpcy5rZXl1cEV2ZW50ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5sZXZlbCAhPT0gMSAmJiBldmVudC5rZXlDb2RlID09PSAyNykge1xuICAgICAgICAgICAgICAgIHRoaXMub3V0KHVuZGVmaW5lZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMubW91c2VNb3ZlRXZlbnQgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmxldmVsICE9PSAxKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tb3VzZVggPSBldmVudC5jbGllbnRYO1xuICAgICAgICAgICAgICAgIHRoaXMubW91c2VZID0gZXZlbnQuY2xpZW50WTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMuc3VwcG9ydHNUcmFuc2Zvcm1zKSB7XG4gICAgICAgICAgICAvLyBUaGUgZWFzaW5nIHRoYXQgd2lsbCBiZSBhcHBsaWVkIHdoZW4gd2Ugem9vbSBpbi9vdXRcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUudHJhbnNpdGlvbiA9ICd0cmFuc2Zvcm0gJyArIHRoaXMuVFJBTlNJVElPTl9EVVJBVElPTiArICdtcyBlYXNlJztcbiAgICAgICAgICAgIC8vZG9jdW1lbnQuYm9keS5zdHlsZS5PVHJhbnNpdGlvbiA9ICctby10cmFuc2Zvcm0gJysgdGhpcy5UUkFOU0lUSU9OX0RVUkFUSU9OICsnbXMgZWFzZSc7XG4gICAgICAgICAgICAvL2RvY3VtZW50LmJvZHkuc3R5bGUubXNUcmFuc2l0aW9uID0gJy1tcy10cmFuc2Zvcm0gJysgdGhpcy5UUkFOU0lUSU9OX0RVUkFUSU9OICsnbXMgZWFzZSc7XG4gICAgICAgICAgICAvL2RvY3VtZW50LmJvZHkuc3R5bGUuTW96VHJhbnNpdGlvbiA9ICctbW96LXRyYW5zZm9ybSAnKyB0aGlzLlRSQU5TSVRJT05fRFVSQVRJT04gKydtcyBlYXNlJztcbiAgICAgICAgICAgIC8vZG9jdW1lbnQuYm9keS5zdHlsZS5XZWJraXRUcmFuc2l0aW9uID0gJy13ZWJraXQtdHJhbnNmb3JtICcrIHRoaXMuVFJBTlNJVElPTl9EVVJBVElPTiArJ21zIGVhc2UnO1xuICAgICAgICB9XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdGhpcy5rZXl1cEV2ZW50KTtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5tb3VzZU1vdmVFdmVudCk7XG4gICAgfVxuICAgIG1hZ25pZnkocmVjdCwgc2NhbGUpIHtcbiAgICAgICAgdmFyIHNjcm9sbE9mZnNldCA9IHRoaXMuZ2V0U2Nyb2xsT2Zmc2V0KCk7XG4gICAgICAgIC8vIEVuc3VyZSBhIHdpZHRoL2hlaWdodCBpcyBzZXRcbiAgICAgICAgcmVjdC53aWR0aCA9IHJlY3Qud2lkdGggfHwgMTtcbiAgICAgICAgcmVjdC5oZWlnaHQgPSByZWN0LmhlaWdodCB8fCAxO1xuICAgICAgICAvLyBDZW50ZXIgdGhlIHJlY3Qgd2l0aGluIHRoZSB6b29tZWQgdmlld3BvcnRcbiAgICAgICAgcmVjdC54IC09ICh3aW5kb3cuaW5uZXJXaWR0aCAtIChyZWN0LndpZHRoICogc2NhbGUpKSAvIDI7XG4gICAgICAgIHJlY3QueSAtPSAod2luZG93LmlubmVySGVpZ2h0IC0gKHJlY3QuaGVpZ2h0ICogc2NhbGUpKSAvIDI7XG4gICAgICAgIGlmICh0aGlzLnN1cHBvcnRzVHJhbnNmb3Jtcykge1xuICAgICAgICAgICAgLy8gUmVzZXRcbiAgICAgICAgICAgIGlmIChzY2FsZSA9PT0gMSkge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUudHJhbnNmb3JtID0gJyc7XG4gICAgICAgICAgICAgICAgLy9kb2N1bWVudC5ib2R5LnN0eWxlLk9UcmFuc2Zvcm0gPSAnJztcbiAgICAgICAgICAgICAgICAvL2RvY3VtZW50LmJvZHkuc3R5bGUubXNUcmFuc2Zvcm0gPSAnJztcbiAgICAgICAgICAgICAgICAvL2RvY3VtZW50LmJvZHkuc3R5bGUuTW96VHJhbnNmb3JtID0gJyc7XG4gICAgICAgICAgICAgICAgLy9kb2N1bWVudC5ib2R5LnN0eWxlLldlYmtpdFRyYW5zZm9ybSA9ICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gU2NhbGVcbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBvcmlnaW4gPSBzY3JvbGxPZmZzZXQueCArICdweCAnICsgc2Nyb2xsT2Zmc2V0LnkgKyAncHgnLCB0cmFuc2Zvcm0gPSAndHJhbnNsYXRlKCcgKyAtcmVjdC54ICsgJ3B4LCcgKyAtcmVjdC55ICsgJ3B4KSBzY2FsZSgnICsgc2NhbGUgKyAnKSc7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS50cmFuc2Zvcm1PcmlnaW4gPSBvcmlnaW47XG4gICAgICAgICAgICAgICAgLy9kb2N1bWVudC5ib2R5LnN0eWxlLk9UcmFuc2Zvcm1PcmlnaW4gPSBvcmlnaW47XG4gICAgICAgICAgICAgICAgLy9kb2N1bWVudC5ib2R5LnN0eWxlLm1zVHJhbnNmb3JtT3JpZ2luID0gb3JpZ2luO1xuICAgICAgICAgICAgICAgIC8vZG9jdW1lbnQuYm9keS5zdHlsZS5Nb3pUcmFuc2Zvcm1PcmlnaW4gPSBvcmlnaW47XG4gICAgICAgICAgICAgICAgLy9kb2N1bWVudC5ib2R5LnN0eWxlLldlYmtpdFRyYW5zZm9ybU9yaWdpbiA9IG9yaWdpbjtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLnRyYW5zZm9ybSA9IHRyYW5zZm9ybTtcbiAgICAgICAgICAgICAgICAvL2RvY3VtZW50LmJvZHkuc3R5bGUuT1RyYW5zZm9ybSA9IHRyYW5zZm9ybTtcbiAgICAgICAgICAgICAgICAvL2RvY3VtZW50LmJvZHkuc3R5bGUubXNUcmFuc2Zvcm0gPSB0cmFuc2Zvcm07XG4gICAgICAgICAgICAgICAgLy9kb2N1bWVudC5ib2R5LnN0eWxlLk1velRyYW5zZm9ybSA9IHRyYW5zZm9ybTtcbiAgICAgICAgICAgICAgICAvL2RvY3VtZW50LmJvZHkuc3R5bGUuV2Via2l0VHJhbnNmb3JtID0gdHJhbnNmb3JtO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gUmVzZXRcbiAgICAgICAgICAgIGlmIChzY2FsZSA9PT0gMSkge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUucG9zaXRpb24gPSAnJztcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmxlZnQgPSAnJztcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLnRvcCA9ICcnO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUud2lkdGggPSAnJztcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmhlaWdodCA9ICcnO1xuICAgICAgICAgICAgICAgIC8vZG9jdW1lbnQuYm9keS5zdHlsZS56b29tID0gJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBTY2FsZVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5sZWZ0ID0gKC0oc2Nyb2xsT2Zmc2V0LnggKyByZWN0LngpIC8gc2NhbGUpICsgJ3B4JztcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLnRvcCA9ICgtKHNjcm9sbE9mZnNldC55ICsgcmVjdC55KSAvIHNjYWxlKSArICdweCc7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS53aWR0aCA9IChzY2FsZSAqIDEwMCkgKyAnJSc7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5oZWlnaHQgPSAoc2NhbGUgKiAxMDApICsgJyUnO1xuICAgICAgICAgICAgICAgIC8vZG9jdW1lbnQuYm9keS5zdHlsZS56b29tID0gc2NhbGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sZXZlbCA9IHNjYWxlO1xuICAgIH1cbiAgICBwYW4oKSB7XG4gICAgICAgIHZhciByYW5nZSA9IDAuMTIsIHJhbmdlWCA9IHdpbmRvdy5pbm5lcldpZHRoICogcmFuZ2UsIHJhbmdlWSA9IHdpbmRvdy5pbm5lckhlaWdodCAqIHJhbmdlLCBzY3JvbGxPZmZzZXQgPSB0aGlzLmdldFNjcm9sbE9mZnNldCgpO1xuICAgICAgICAvLyBVcFxuICAgICAgICBpZiAodGhpcy5tb3VzZVkgPCByYW5nZVkpIHtcbiAgICAgICAgICAgIHdpbmRvdy5zY3JvbGwoc2Nyb2xsT2Zmc2V0LngsIHNjcm9sbE9mZnNldC55IC0gKDEgLSAodGhpcy5tb3VzZVkgLyByYW5nZVkpKSAqICgxNCAvIHRoaXMubGV2ZWwpKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBEb3duXG4gICAgICAgIGVsc2UgaWYgKHRoaXMubW91c2VZID4gd2luZG93LmlubmVySGVpZ2h0IC0gcmFuZ2VZKSB7XG4gICAgICAgICAgICB3aW5kb3cuc2Nyb2xsKHNjcm9sbE9mZnNldC54LCBzY3JvbGxPZmZzZXQueSArICgxIC0gKHdpbmRvdy5pbm5lckhlaWdodCAtIHRoaXMubW91c2VZKSAvIHJhbmdlWSkgKiAoMTQgLyB0aGlzLmxldmVsKSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gTGVmdFxuICAgICAgICBpZiAodGhpcy5tb3VzZVggPCByYW5nZVgpIHtcbiAgICAgICAgICAgIHdpbmRvdy5zY3JvbGwoc2Nyb2xsT2Zmc2V0LnggLSAoMSAtICh0aGlzLm1vdXNlWCAvIHJhbmdlWCkpICogKDE0IC8gdGhpcy5sZXZlbCksIHNjcm9sbE9mZnNldC55KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBSaWdodFxuICAgICAgICBlbHNlIGlmICh0aGlzLm1vdXNlWCA+IHdpbmRvdy5pbm5lcldpZHRoIC0gcmFuZ2VYKSB7XG4gICAgICAgICAgICB3aW5kb3cuc2Nyb2xsKHNjcm9sbE9mZnNldC54ICsgKDEgLSAod2luZG93LmlubmVyV2lkdGggLSB0aGlzLm1vdXNlWCkgLyByYW5nZVgpICogKDE0IC8gdGhpcy5sZXZlbCksIHNjcm9sbE9mZnNldC55KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRTY3JvbGxPZmZzZXQoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB4OiB3aW5kb3cuc2Nyb2xsWCAhPT0gdW5kZWZpbmVkID8gd2luZG93LnNjcm9sbFggOiB3aW5kb3cucGFnZVhPZmZzZXQsXG4gICAgICAgICAgICB5OiB3aW5kb3cuc2Nyb2xsWSAhPT0gdW5kZWZpbmVkID8gd2luZG93LnNjcm9sbFkgOiB3aW5kb3cucGFnZVlPZmZzZXRcbiAgICAgICAgfTtcbiAgICB9XG4gICAgdG8ob3B0aW9ucykge1xuICAgICAgICBpZiAodGhpcy5sZXZlbCAhPT0gMSkge1xuICAgICAgICAgICAgdGhpcy5vdXQodW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9wdGlvbnMueCA9IG9wdGlvbnMueCB8fCAwO1xuICAgICAgICAgICAgb3B0aW9ucy55ID0gb3B0aW9ucy55IHx8IDA7XG4gICAgICAgICAgICAvLyBJZiBhbiBlbGVtZW50IGlzIHNldCwgdGhhdCB0YWtlcyBwcmVjZWRlbmNlXG4gICAgICAgICAgICBpZiAoISFvcHRpb25zLmVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAvLyBTcGFjZSBhcm91bmQgdGhlIHpvb21lZCBpbiBlbGVtZW50IHRvIGxlYXZlIG9uIHNjcmVlblxuICAgICAgICAgICAgICAgIHZhciBwYWRkaW5nID0gdHlwZW9mIG9wdGlvbnMucGFkZGluZyA9PT0gJ251bWJlcicgPyBvcHRpb25zLnBhZGRpbmcgOiAyMDtcbiAgICAgICAgICAgICAgICB2YXIgYm91bmRzID0gb3B0aW9ucy5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgICAgIG9wdGlvbnMueCA9IGJvdW5kcy5sZWZ0IC0gcGFkZGluZztcbiAgICAgICAgICAgICAgICBvcHRpb25zLnkgPSBib3VuZHMudG9wIC0gcGFkZGluZztcbiAgICAgICAgICAgICAgICBvcHRpb25zLndpZHRoID0gYm91bmRzLndpZHRoICsgKHBhZGRpbmcgKiAyKTtcbiAgICAgICAgICAgICAgICBvcHRpb25zLmhlaWdodCA9IGJvdW5kcy5oZWlnaHQgKyAocGFkZGluZyAqIDIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gSWYgd2lkdGgvaGVpZ2h0IHZhbHVlcyBhcmUgc2V0LCBjYWxjdWxhdGUgc2NhbGUgZnJvbSB0aG9zZSB2YWx1ZXNcbiAgICAgICAgICAgIGlmIChvcHRpb25zLndpZHRoICE9PSB1bmRlZmluZWQgJiYgb3B0aW9ucy5oZWlnaHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuc2NhbGUgPSBNYXRoLm1heChNYXRoLm1pbih3aW5kb3cuaW5uZXJXaWR0aCAvIG9wdGlvbnMud2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodCAvIG9wdGlvbnMuaGVpZ2h0KSwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5zY2FsZSA+IDEpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zLnggKj0gb3B0aW9ucy5zY2FsZTtcbiAgICAgICAgICAgICAgICBvcHRpb25zLnkgKj0gb3B0aW9ucy5zY2FsZTtcbiAgICAgICAgICAgICAgICBvcHRpb25zLnggPSBNYXRoLm1heChvcHRpb25zLngsIDApO1xuICAgICAgICAgICAgICAgIG9wdGlvbnMueSA9IE1hdGgubWF4KG9wdGlvbnMueSwgMCk7XG4gICAgICAgICAgICAgICAgdGhpcy5tYWduaWZ5KG9wdGlvbnMsIG9wdGlvbnMuc2NhbGUpO1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnBhbiAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYW5FbmdhZ2VUaW1lb3V0ID0gc2V0VGltZW91dCh0aGlzLmNhbGN1bGF0ZVBhblVwZGF0ZUludGVydmFsLCB0aGlzLlRSQU5TSVRJT05fRFVSQVRJT04pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMuY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYWxsYmFja1RpbWVvdXQgPSBzZXRUaW1lb3V0KG9wdGlvbnMuY2FsbGJhY2ssIHRoaXMuVFJBTlNJVElPTl9EVVJBVElPTik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGNhbGN1bGF0ZVBhblVwZGF0ZUludGVydmFsKCkge1xuICAgICAgICB0aGlzLnBhblVwZGF0ZUludGVydmFsID0gc2V0SW50ZXJ2YWwodGhpcy5wYW4sIDEwMDAgLyA2MCk7XG4gICAgfVxuICAgIG91dChvcHRpb25zKSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnBhbkVuZ2FnZVRpbWVvdXQpO1xuICAgICAgICBjbGVhckludGVydmFsKHRoaXMucGFuVXBkYXRlSW50ZXJ2YWwpO1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5jYWxsYmFja1RpbWVvdXQpO1xuICAgICAgICB0aGlzLm1hZ25pZnkobmV3IE9wdGlvbnNab29tKDAsIDAsIDEpLCAxKTtcbiAgICAgICAgaWYgKG9wdGlvbnMgJiYgdHlwZW9mIG9wdGlvbnMuY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQob3B0aW9ucy5jYWxsYmFjaywgdGhpcy5UUkFOU0lUSU9OX0RVUkFUSU9OKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxldmVsID0gMTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgT3B0aW9uc1pvb20ge1xuICAgIGNvbnN0cnVjdG9yKHgsIHksIHNjYWxlKSB7XG4gICAgICAgIHRoaXMueCA9IDA7XG4gICAgICAgIHRoaXMueSA9IDA7XG4gICAgICAgIHRoaXMuc2NhbGUgPSAwO1xuICAgICAgICB0aGlzLnggPSB4O1xuICAgICAgICB0aGlzLnkgPSB5O1xuICAgICAgICB0aGlzLnNjYWxlID0gc2NhbGU7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgQ3NzQ2xhc3NlcyB9IGZyb20gXCIuL3N0eWxlcy9jc3Mtem9vbS1jbGFzc2VzXCI7XG5pbXBvcnQgeyBab29tU2VydmljZSwgT3B0aW9uc1pvb20gfSBmcm9tIFwiLi96b29tLW1vZHVsZS96b29tX3NlcnZpY2VcIjtcbmV4cG9ydCBjbGFzcyBab29tIHtcbiAgICBjb25zdHJ1Y3RvcihlbmFibGVab29tT3B0aW9ucyA9IGZhbHNlKSB7XG4gICAgICAgIHRoaXMuZW5hYmxlWm9vbU9wdGlvbnMgPSBlbmFibGVab29tT3B0aW9ucztcbiAgICAgICAgdGhpcy56b29tU3RhdHVzID0gZmFsc2U7XG4gICAgICAgIHRoaXMuYWN0aXZlX21lc3NhZ2UgPSBgPGRpdiBpZD1cInpvb20tc3RhdHVzXCIgY2xhc3M9XCJ6b29tLW1lc3NhZ2UtdHh0Ym94XCI+T248L2Rpdj5gO1xuICAgICAgICB0aGlzLmRlYWN0aXZlX21lc3NhZ2UgPSBgPGRpdiBpZD1cInpvb20tc3RhdHVzXCIgY2xhc3M9XCJ6b29tLW1lc3NhZ2UtdHh0Ym94XCI+T2ZmPC9kaXY+YDtcbiAgICAgICAgdGhpcy50b29nbGVab29tID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICB0aGlzLnpvb21TZXJ2aWNlLnRvKG5ldyBPcHRpb25zWm9vbShldmVudC54LCBldmVudC55LCAxMCkpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnpvb21TZXJ2aWNlID0gbmV3IFpvb21TZXJ2aWNlKCk7XG4gICAgfVxuICAgIHN0YXR1cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5hYmxlWm9vbU9wdGlvbnM7XG4gICAgfVxuICAgIHRvb2dsZVN0YXR1cygpIHtcbiAgICAgICAgdGhpcy5lbmFibGVab29tT3B0aW9ucyA9ICF0aGlzLmVuYWJsZVpvb21PcHRpb25zO1xuICAgIH1cbiAgICBhY3RpdmVab29tKHNjcmVlblJlYWRlckFjdGl2ZSwgZXZlbnQpIHtcbiAgICAgICAgaWYgKCF0aGlzLmVuYWJsZVpvb21PcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFzY3JlZW5SZWFkZXJBY3RpdmUgJiYgZXZlbnQuY3RybEtleSA9PT0gdHJ1ZSAmJiBldmVudC5rZXkudG9Mb3dlckNhc2UoKSA9PT0gXCJiYWNrc3BhY2VcIikge1xuICAgICAgICAgICAgQ3NzQ2xhc3Nlcy5hZGRab29tTWVzc2FnZVRleHRCb3hDbGFzcygpO1xuICAgICAgICAgICAgdGhpcy5pbml0aWFsQ2xpY2tFdmVudChkb2N1bWVudC5ib2R5KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpbml0aWFsQ2xpY2tFdmVudChib2R5KSB7XG4gICAgICAgIGlmICghdGhpcy56b29tU3RhdHVzKSB7XG4gICAgICAgICAgICB0aGlzLnNob3dCb3hNZXNzYWdlKGJvZHksIHRoaXMuYWN0aXZlX21lc3NhZ2UsICF0aGlzLnpvb21TdGF0dXMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zaG93Qm94TWVzc2FnZShib2R5LCB0aGlzLmRlYWN0aXZlX21lc3NhZ2UsICF0aGlzLnpvb21TdGF0dXMpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuem9vbVN0YXR1cyA9ICF0aGlzLnpvb21TdGF0dXM7XG4gICAgfVxuICAgIHNob3dCb3hNZXNzYWdlKGJvZHksIG1lc3NhZ2UsIHN0YXR1cykge1xuICAgICAgICBib2R5Lmluc2VydEFkamFjZW50SFRNTChcImJlZm9yZWJlZ2luXCIsIG1lc3NhZ2UpO1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHpvb21fbWVzc2FnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiem9vbS1zdGF0dXNcIik7XG4gICAgICAgICAgICB6b29tX21lc3NhZ2UgPT09IG51bGwgfHwgem9vbV9tZXNzYWdlID09PSB2b2lkIDAgPyB2b2lkIDAgOiB6b29tX21lc3NhZ2UucmVtb3ZlKCk7XG4gICAgICAgIH0sIDIwMDApO1xuICAgICAgICBzdGF0dXMgPyBib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy50b29nbGVab29tKSA6IGJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMudG9vZ2xlWm9vbSk7XG4gICAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIENzc0V5ZWVhc3Npc3RDbGFzc2VzIHtcbiAgICBzdGF0aWMgbWFpbk1lc3NhZ2UoZGl2KSB7XG4gICAgICAgIGRpdi5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgICAgICBkaXYuc3R5bGUuYWxpZ25JdGVtcyA9ICdjZW50ZXInO1xuICAgICAgICBkaXYuc3R5bGUuYWxpZ25Db250ZW50ID0gJ2NlbnRlcic7XG4gICAgICAgIGRpdi5zdHlsZS5qdXN0aWZ5SXRlbXMgPSAnY2VudGVyJztcbiAgICAgICAgZGl2LnN0eWxlLmp1c3RpZnlDb250ZW50ID0gJ2NlbnRlcic7XG4gICAgICAgIGRpdi5zdHlsZS5wb3NpdGlvbiA9ICdmaXhlZCc7XG4gICAgICAgIGRpdi5zdHlsZS50b3AgPSAnMCc7XG4gICAgICAgIGRpdi5zdHlsZS5sZWZ0ID0gJzAnO1xuICAgICAgICBkaXYuc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgICAgIGRpdi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnI0Y1RjVEQyc7XG4gICAgICAgIGRpdi5zdHlsZS56SW5kZXggPSAnOTk5JztcbiAgICAgICAgZGl2LnN0eWxlLmNvbG9yID0gJyMwMDY0MDAnO1xuICAgICAgICByZXR1cm4gZGl2O1xuICAgIH1cbiAgICBzdGF0aWMgbWVzc2FnZUNvbnRlbnQoZGl2KSB7XG4gICAgICAgIGRpdi5zdHlsZS50ZXh0QWxpZ24gPSAnY2VudGVyJztcbiAgICAgICAgZGl2LnN0eWxlLmZsZXggPSAnMSc7XG4gICAgICAgIGRpdi5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgICAgICBkaXYuc3R5bGUuYWxpZ25Db250ZW50ID0gJ2NlbnRlcic7XG4gICAgICAgIGRpdi5zdHlsZS5qdXN0aWZ5Q29udGVudCA9ICdjZW50ZXInO1xuICAgICAgICByZXR1cm4gZGl2O1xuICAgIH1cbiAgICBzdGF0aWMgY2xvc2VCdXR0b20oYnV0dG9uKSB7XG4gICAgICAgIGJ1dHRvbi5zdHlsZS5iYWNrZ3JvdW5kID0gJ25vbmUnO1xuICAgICAgICBidXR0b24uc3R5bGUuYm9yZGVyID0gJ25vbmUnO1xuICAgICAgICBidXR0b24uc3R5bGUucGFkZGluZyA9ICcwJztcbiAgICAgICAgYnV0dG9uLnN0eWxlLm1hcmdpbiA9ICcwJztcbiAgICAgICAgYnV0dG9uLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcbiAgICAgICAgYnV0dG9uLnN0eWxlLndpZHRoID0gJzUwcHgnO1xuICAgICAgICBidXR0b24uc3R5bGUuaGVpZ2h0ID0gJzUwcHgnO1xuICAgICAgICBidXR0b24uc3R5bGUuYWxpZ25TZWxmID0gJ2ZsZXgtZW5kJztcbiAgICAgICAgYnV0dG9uLnN0eWxlLmNvbG9yID0gJyMwMDY0MDAnO1xuICAgICAgICByZXR1cm4gYnV0dG9uO1xuICAgIH1cbiAgICBzdGF0aWMgYWRkRmx5TWVudVN0eWxlKCkge1xuICAgICAgICBjb25zdCBzdHlsZVNoZWV0ID0gZG9jdW1lbnQuc3R5bGVTaGVldHNbMF07IC8vIEFzZWfDunJhdGUgZGUgc2VsZWNjaW9uYXIgZWwgc3R5bGVzaGVldCBhZGVjdWFkb1xuICAgICAgICBjb25zdCBmbHlfbWVudSA9IGBcclxuICAgICAgICAuZmx5X21lbnUge1xyXG4gICAgICAgICAgcG9zaXRpb246IGZpeGVkO1xyXG4gICAgICAgICAgcmlnaHQ6IDcwcHg7XHJcbiAgICAgICAgICB3aWR0aDogNzJweDtcclxuICAgICAgICAgIGhlaWdodDogNzJweDtcclxuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcclxuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNGNUY1REM7XHJcbiAgICAgICAgICBjb2xvcjogIzAwNjQwMDtcclxuICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgICAgICAgIGxpbmUtaGVpZ2h0OiA1MHB4O1xyXG4gICAgICAgICAgZmxleC13cmFwOiB3cmFwO1xyXG4gICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xyXG4gICAgICAgICAgZGlzcGxheTogZmxleDtcclxuICAgICAgICAgIGFsaWduLWNvbnRlbnQ6IGNlbnRlcjtcclxuICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG4gICAgICAgICAgei1pbmRleDogOTk5OTtcclxuICAgICAgICB9XHJcbiAgICBgO1xuICAgICAgICBzdHlsZVNoZWV0Lmluc2VydFJ1bGUoZmx5X21lbnUsIHN0eWxlU2hlZXQuY3NzUnVsZXMubGVuZ3RoKTtcbiAgICB9XG4gICAgc3RhdGljIHN2Z0h1bWFuKGNvbG9yLCB3aWR0aCA9ICczNCcsIGhlaWdodCA9ICczOCcpIHtcbiAgICAgICAgY29uc3Qgc3ZnRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIFwic3ZnXCIpO1xuICAgICAgICAvLyBFc3RhYmxlY2UgbG9zIGF0cmlidXRvcyBkZWwgZWxlbWVudG8gU1ZHXG4gICAgICAgIHN2Z0VsZW1lbnQuc2V0QXR0cmlidXRlKFwid2lkdGhcIiwgd2lkdGgpO1xuICAgICAgICBzdmdFbGVtZW50LnNldEF0dHJpYnV0ZShcImhlaWdodFwiLCBoZWlnaHQpO1xuICAgICAgICBzdmdFbGVtZW50LnNldEF0dHJpYnV0ZShcInZpZXdCb3hcIiwgXCIwIDAgMzQgMzhcIik7XG4gICAgICAgIHN2Z0VsZW1lbnQuc2V0QXR0cmlidXRlKFwieG1sbnNcIiwgXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiKTtcbiAgICAgICAgLy8gQ3JlYSB1biBlbGVtZW50byBkZSBydXRhIGRlbnRybyBkZWwgU1ZHXG4gICAgICAgIGNvbnN0IHBhdGhFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgXCJwYXRoXCIpO1xuICAgICAgICBwYXRoRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkXCIsIFwiTTMzLjUgMTMuNUgyMi41VjM3LjMzMzNIMTguODMzM1YyNi4zMzMzSDE1LjE2NjdWMzcuMzMzM0gxMS41VjEzLjVIMC41VjkuODMzMzJIMzMuNU0xNyAwLjY2NjY1NkMxNy45NzI1IDAuNjY2NjU2IDE4LjkwNTEgMS4wNTI5NiAxOS41OTI3IDEuNzQwNkMyMC4yODA0IDIuNDI4MjMgMjAuNjY2NyAzLjM2MDg2IDIwLjY2NjcgNC4zMzMzMkMyMC42NjY3IDUuMzA1NzggMjAuMjgwNCA2LjIzODQxIDE5LjU5MjcgNi45MjYwNUMxOC45MDUxIDcuNjEzNjggMTcuOTcyNSA3Ljk5OTk5IDE3IDcuOTk5OTlDMTYuMDI3NSA3Ljk5OTk5IDE1LjA5NDkgNy42MTM2OCAxNC40MDczIDYuOTI2MDVDMTMuNzE5NiA2LjIzODQxIDEzLjMzMzMgNS4zMDU3OCAxMy4zMzMzIDQuMzMzMzJDMTMuMzMzMyAyLjI5ODMyIDE0Ljk2NSAwLjY2NjY1NiAxNyAwLjY2NjY1NlpcIik7XG4gICAgICAgIHBhdGhFbGVtZW50LnNldEF0dHJpYnV0ZShcImZpbGxcIiwgY29sb3IpO1xuICAgICAgICAvLyBBZ3JlZ2EgbGEgcnV0YSBhbCBlbGVtZW50byBTVkdcbiAgICAgICAgc3ZnRWxlbWVudC5hcHBlbmRDaGlsZChwYXRoRWxlbWVudCk7XG4gICAgICAgIHJldHVybiBzdmdFbGVtZW50O1xuICAgIH1cbiAgICBzdGF0aWMgc3ZnQ2xvc2VCdXR0b20oY29sb3IpIHtcbiAgICAgICAgLy8gQ3JlYXIgdW4gZWxlbWVudG8gU1ZHXG4gICAgICAgIGNvbnN0IHN2Z0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBcInN2Z1wiKTtcbiAgICAgICAgc3ZnRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJmaWxsXCIsIGNvbG9yKTtcbiAgICAgICAgc3ZnRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJ2aWV3Qm94XCIsIFwiMCAwIDMyIDMyXCIpO1xuICAgICAgICAvLyBDcmVhciB1biBlbGVtZW50byBwYXRoXG4gICAgICAgIGNvbnN0IHBhdGhFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgXCJwYXRoXCIpO1xuICAgICAgICBwYXRoRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkXCIsIFwiTTcuMDA0IDIzLjA4N2w3LjA4LTcuMDgxLTcuMDctNy4wNzFMOC45MjkgNy4wMmw3LjA2NyA3LjA2OUwyMy4wODQgN2wxLjkxMiAxLjkxMy03LjA4OSA3LjA5MyA3LjA3NSA3LjA3Ny0xLjkxMiAxLjkxMy03LjA3NC03LjA3M0w4LjkxNyAyNXpcIik7XG4gICAgICAgIC8vIEFncmVnYXIgZWwgZWxlbWVudG8gcGF0aCBhbCBTVkdcbiAgICAgICAgc3ZnRWxlbWVudC5hcHBlbmRDaGlsZChwYXRoRWxlbWVudCk7XG4gICAgICAgIHJldHVybiBzdmdFbGVtZW50O1xuICAgIH1cbiAgICBzdGF0aWMgYWRkQnVmZmVyT3B0aW9uc0NsYXNzKCkge1xuICAgICAgICBjb25zdCBzdHlsZVNoZWV0ID0gZG9jdW1lbnQuc3R5bGVTaGVldHNbMF07IC8vIEFzZWfDunJhdGUgZGUgc2VsZWNjaW9uYXIgZWwgc3R5bGVzaGVldCBhZGVjdWFkb1xuICAgICAgICBjb25zdCBidWZmZXJfb3B0aW9ucyA9IGBcclxuICAgICAgICAuYnVmZmVyX29wdGlvbnMge1xyXG4gICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICAgICAgICAgIHRvcDogMTMwcHg7XHJcbiAgICAgICAgICAgIHJpZ2h0OiA3MHB4O1xyXG4gICAgICAgICAgICBib3JkZXItcmFkaXVzOiAxMHB4O1xyXG4gICAgICAgICAgICBoZWlnaHQ6IGF1dG87IFxyXG4gICAgICAgICAgICBtYXgtaGVpZ2h0OiAxMDAlO1xyXG4gICAgICAgICAgICBvdmVyZmxvdy15OiBhdXRvOyBcclxuICAgICAgICAgICAgei1pbmRleDogOTk5OTtcclxuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI0Y1RjVEQztcclxuICAgICAgICAgICAgY29sb3I6ICMwMDY0MDA7XHJcbiAgICAgICAgfVxyXG4gICAgYDtcbiAgICAgICAgc3R5bGVTaGVldC5pbnNlcnRSdWxlKGJ1ZmZlcl9vcHRpb25zLCBzdHlsZVNoZWV0LmNzc1J1bGVzLmxlbmd0aCk7XG4gICAgfVxuICAgIHN0YXRpYyB0b2dnbGVTd2l0Y2hDbGFzc2VzKCkge1xuICAgICAgICB0aGlzLnRvb2dsZVN3aXRjaENsYXNzKCk7XG4gICAgICAgIHRoaXMudG9nZ2xlU3dpdGNoQ2lyY2xlKCk7XG4gICAgICAgIHRoaXMudG9nZ2xlU3dpdGNoQWN0aXZlKCk7XG4gICAgICAgIHRoaXMudG9nZ2xlU3dpdGNoQW5pbWF0aW9uKCk7XG4gICAgfVxuICAgIHN0YXRpYyB0b29nbGVTd2l0Y2hDbGFzcygpIHtcbiAgICAgICAgY29uc3Qgc3R5bGVTaGVldCA9IGRvY3VtZW50LnN0eWxlU2hlZXRzWzBdOyAvLyBBc2Vnw7pyYXRlIGRlIHNlbGVjY2lvbmFyIGVsIHN0eWxlc2hlZXQgYWRlY3VhZG9cbiAgICAgICAgY29uc3QgdG9nZ2xlX3N3aXRjaCA9IGBcclxuICAgICAgICAudG9nZ2xlLXN3aXRjaCB7XHJcbiAgICAgICAgICAgIHdpZHRoOiA2MHB4O1xyXG4gICAgICAgICAgICBoZWlnaHQ6IDMwcHg7XHJcbiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNjY2M7XHJcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDE1cHg7XHJcbiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcclxuICAgICAgICAgICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjNzLCB0cmFuc2Zvcm0gMC4zcztcclxuICAgICAgICB9XHJcbiAgICBgO1xuICAgICAgICBzdHlsZVNoZWV0Lmluc2VydFJ1bGUodG9nZ2xlX3N3aXRjaCwgc3R5bGVTaGVldC5jc3NSdWxlcy5sZW5ndGgpO1xuICAgIH1cbiAgICBzdGF0aWMgdG9nZ2xlU3dpdGNoQ2lyY2xlKCkge1xuICAgICAgICBjb25zdCBzdHlsZVNoZWV0ID0gZG9jdW1lbnQuc3R5bGVTaGVldHNbMF07IC8vIEFzZWfDunJhdGUgZGUgc2VsZWNjaW9uYXIgZWwgc3R5bGVzaGVldCBhZGVjdWFkb1xuICAgICAgICBjb25zdCB0b2dnbGVfc3dpdGNoX2NpcmNsZSA9IGBcclxuICAgICAgICAudG9nZ2xlLXN3aXRjaC1jaXJjbGUge1xyXG4gICAgICAgICAgICB3aWR0aDogMzBweDtcclxuICAgICAgICAgICAgaGVpZ2h0OiAzMHB4O1xyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcclxuICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlO1xyXG4gICAgICAgICAgICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMC4zcztcclxuICAgICAgICB9YDtcbiAgICAgICAgc3R5bGVTaGVldC5pbnNlcnRSdWxlKHRvZ2dsZV9zd2l0Y2hfY2lyY2xlLCBzdHlsZVNoZWV0LmNzc1J1bGVzLmxlbmd0aCk7XG4gICAgfVxuICAgIHN0YXRpYyB0b2dnbGVTd2l0Y2hBY3RpdmUoKSB7XG4gICAgICAgIGNvbnN0IHN0eWxlU2hlZXQgPSBkb2N1bWVudC5zdHlsZVNoZWV0c1swXTsgLy8gQXNlZ8O6cmF0ZSBkZSBzZWxlY2Npb25hciBlbCBzdHlsZXNoZWV0IGFkZWN1YWRvXG4gICAgICAgIGNvbnN0IHRvZ2dsZV9zd2l0Y2hfYXJ0aXZlID0gYFxyXG4gICAgICAgIC50b2dnbGUtc3dpdGNoLmFjdGl2ZSB7XHJcbiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICMyZWNjNzE7XHJcbiAgICAgICAgfWA7XG4gICAgICAgIHN0eWxlU2hlZXQuaW5zZXJ0UnVsZSh0b2dnbGVfc3dpdGNoX2FydGl2ZSwgc3R5bGVTaGVldC5jc3NSdWxlcy5sZW5ndGgpO1xuICAgIH1cbiAgICBzdGF0aWMgdG9nZ2xlU3dpdGNoQW5pbWF0aW9uKCkge1xuICAgICAgICBjb25zdCBzdHlsZVNoZWV0ID0gZG9jdW1lbnQuc3R5bGVTaGVldHNbMF07IC8vIEFzZWfDunJhdGUgZGUgc2VsZWNjaW9uYXIgZWwgc3R5bGVzaGVldCBhZGVjdWFkb1xuICAgICAgICBjb25zdCB0b2dnbGVfc3dpdGNoX2FuaW1hdGlvbiA9IGBcclxuICAgICAgICAudG9nZ2xlLXN3aXRjaC5hY3RpdmUgLnRvZ2dsZS1zd2l0Y2gtY2lyY2xlIHtcclxuICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKDMwcHgpO1xyXG4gICAgICAgIH1gO1xuICAgICAgICBzdHlsZVNoZWV0Lmluc2VydFJ1bGUodG9nZ2xlX3N3aXRjaF9hbmltYXRpb24sIHN0eWxlU2hlZXQuY3NzUnVsZXMubGVuZ3RoKTtcbiAgICB9XG4gICAgc3RhdGljIGFkZE9wdGlvbkZ1bmN0aW9uc0NsYXNzKCkge1xuICAgICAgICBjb25zdCBzdHlsZVNoZWV0ID0gZG9jdW1lbnQuc3R5bGVTaGVldHNbMF07IC8vIEFzZWfDunJhdGUgZGUgc2VsZWNjaW9uYXIgZWwgc3R5bGVzaGVldCBhZGVjdWFkb1xuICAgICAgICBjb25zdCBvcHRpb25fZnVuY3Rpb25zID0gYFxyXG4gICAgICAgIC5vcHRpb25fbWVudV9leWVlYXNzaXN0IHtcclxuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAgICAgICBwYWRkaW5nOiAxMHB4O1xyXG4gICAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xyXG4gICAgICAgIH1gO1xuICAgICAgICBzdHlsZVNoZWV0Lmluc2VydFJ1bGUob3B0aW9uX2Z1bmN0aW9ucywgc3R5bGVTaGVldC5jc3NSdWxlcy5sZW5ndGgpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IEV5ZWVhc3Npc3QgfSBmcm9tIFwiLi9tYWluL2V5ZWVhc3Npc3RcIjtcbmNvbnN0IGV5ZWVhc3Npc3QgPSBuZXcgRXllZWFzc2lzdCh0cnVlLCB0cnVlLCB0cnVlKTtcbmV5ZWVhc3Npc3Quc3RhcnQoKTtcbiIsImltcG9ydCB7IEZpbHRlciB9IGZyb20gXCIuLi9maWx0ZXIvZmlsdGVyXCI7XG5pbXBvcnQgeyBTY3JlZW5SZWFkZXIgfSBmcm9tIFwiLi4vc2NyZWVuX3JlYWRlci9zY3JlZW5fcmVhZGVyXCI7XG5pbXBvcnQgeyBab29tIH0gZnJvbSBcIi4uL3pvb20vem9vbVwiO1xuaW1wb3J0IHsgQ3NzRXllZWFzc2lzdENsYXNzZXMgfSBmcm9tIFwiLi9zdHlsZXMvY3NzLWV5ZWVhc3Npc3QtY2xhc3Nlc1wiO1xuZXhwb3J0IGNsYXNzIEV5ZWVhc3Npc3Qge1xuICAgIGNvbnN0cnVjdG9yKHpvb21TdGF0dXMgPSBmYWxzZSwgZmlsdGVyU3RhdHVzID0gZmFsc2UsIHJlYWRlclN0YXR1cyA9IGZhbHNlLCB0b2tlbiA9ICcnKSB7XG4gICAgICAgIHRoaXMudG9rZW4gPSB0b2tlbjtcbiAgICAgICAgdGhpcy5hbmltYWNpb25FblByb2dyZXNvID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaW5pdE1lc3NhZ2VDbG9zZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLnZpZXdPcHRpb25zT24gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5idWlsZE9wdGlvbiA9IChvcGNpb24pID0+IHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgdmFyIG9wdGlvbkNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgb3B0aW9uLmlkID0gJ29wdGlvbl9tZW51X2V5ZWFzc2lzdF8nICsgb3BjaW9uLm5hbWU7XG4gICAgICAgICAgICBjb25zdCBvcHRpb25OYW1lRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgb3B0aW9uTmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBvcGNpb24uZGlzcGxheV9uYW1lO1xuICAgICAgICAgICAgb3B0aW9uTmFtZUVsZW1lbnQuc3R5bGUucGFkZGluZ1JpZ2h0ID0gJzIwcHgnO1xuICAgICAgICAgICAgY29uc3QgdG9nZ2xlU3dpdGNoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICB0b2dnbGVTd2l0Y2guY2xhc3NOYW1lID0gJ3RvZ2dsZS1zd2l0Y2gnO1xuICAgICAgICAgICAgdG9nZ2xlU3dpdGNoLmlkID0gJ3RvZ2dsZVN3aXRjaCcgKyBvcGNpb24ubmFtZTtcbiAgICAgICAgICAgIGNvbnN0IHRvZ2dsZVN3aXRjaENpcmNsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgdG9nZ2xlU3dpdGNoQ2lyY2xlLmNsYXNzTmFtZSA9IFwidG9nZ2xlLXN3aXRjaC1jaXJjbGVcIjtcbiAgICAgICAgICAgIHRvZ2dsZVN3aXRjaC5hcHBlbmRDaGlsZCh0b2dnbGVTd2l0Y2hDaXJjbGUpO1xuICAgICAgICAgICAgdG9nZ2xlU3dpdGNoLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAodG9nZ2xlU3dpdGNoLmlkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3RvZ2dsZVN3aXRjaFpvb20nOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ab29tT2JqZWN0LnRvb2dsZVN0YXR1cygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3pvb21TdGF0dXMnLCBKU09OLnN0cmluZ2lmeSh0aGlzLlpvb21PYmplY3Quc3RhdHVzKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICd0b2dnbGVTd2l0Y2hDb2xvcnMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5GaWx0ZXJPYmplY3QudG9nZ2xlU3RhdHVzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3B0aW9uc0xpc3QgPSB0aGlzLkZpbHRlck9iamVjdC5zaG93RmlsdGVyT3B0aW9uc0xpc3QoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIChfYSA9IG9wdGlvbkNvbnRhaW5lci5wYXJlbnRFbGVtZW50KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuYXBwZW5kKG9wdGlvbnNMaXN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdmaWx0ZXJTdGF0dXMnLCBKU09OLnN0cmluZ2lmeSh0aGlzLkZpbHRlck9iamVjdC5zdGF0dXMoKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3RvZ2dsZVN3aXRjaFJlYWRlcic6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLlNjcmVlblJlYWRlck9iamVjdC50b2dnbGVTdGF0dXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdyZWFkZXJTdGF0dXMnLCBKU09OLnN0cmluZ2lmeSh0aGlzLlNjcmVlblJlYWRlck9iamVjdC5zdGF0dXMoKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRvZ2dsZVN3aXRjaC5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgb3B0aW9uQ29udGFpbmVyLmNsYXNzTmFtZSA9ICdvcHRpb25fbWVudV9leWVlYXNzaXN0JztcbiAgICAgICAgICAgIG9wdGlvbkNvbnRhaW5lci5hcHBlbmQob3B0aW9uTmFtZUVsZW1lbnQpO1xuICAgICAgICAgICAgb3B0aW9uQ29udGFpbmVyLmFwcGVuZCh0b2dnbGVTd2l0Y2gpO1xuICAgICAgICAgICAgb3B0aW9uLmFwcGVuZChvcHRpb25Db250YWluZXIpO1xuICAgICAgICAgICAgaWYgKG9wY2lvbi5zdGF0dXMpIHtcbiAgICAgICAgICAgICAgICB0b2dnbGVTd2l0Y2guY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgaWYgKG9wY2lvbi5uYW1lID09IFwiQ29sb3JzXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0FncmVnYW5kbyBjb2xvcmVzJyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBvcHRpb25zTGlzdCA9IHRoaXMuRmlsdGVyT2JqZWN0LnNob3dGaWx0ZXJPcHRpb25zTGlzdCgpO1xuICAgICAgICAgICAgICAgICAgICAoX2EgPSBvcHRpb25Db250YWluZXIucGFyZW50RWxlbWVudCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmFwcGVuZChvcHRpb25zTGlzdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG9wdGlvbjtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zaG93T3B0aW9ucyA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdNb3N0cmFuZG8gb3BjaW9uZXMnKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnZpZXdPcHRpb25zT24pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBidWZmZXJMaXN0T3B0aW9ucyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidWZmZXJfb3B0aW9ucycpO1xuICAgICAgICAgICAgICAgIGJ1ZmZlckxpc3RPcHRpb25zID09PSBudWxsIHx8IGJ1ZmZlckxpc3RPcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBidWZmZXJMaXN0T3B0aW9ucy5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnZpZXdPcHRpb25zT24gPSAhdGhpcy52aWV3T3B0aW9uc09uO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGJ1ZmZlckxpc3RPcHRpb25zID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBidWZmZXJMaXN0T3B0aW9ucy5pZCA9ICdidWZmZXJfb3B0aW9ucyc7XG4gICAgICAgICAgICBidWZmZXJMaXN0T3B0aW9ucy5jbGFzc05hbWUgPSAnYnVmZmVyX29wdGlvbnMnO1xuICAgICAgICAgICAgLy9DcmVhciBvcGNpb25lc1xuICAgICAgICAgICAgY29uc3Qgb3BjaW9uZXMgPSBbXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAnWm9vbScsIHN0YXR1czogdGhpcy5ab29tT2JqZWN0LnN0YXR1cygpLCBkaXNwbGF5X25hbWU6ICdab29tJyB9LFxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ0NvbG9ycycsIHN0YXR1czogdGhpcy5GaWx0ZXJPYmplY3Quc3RhdHVzKCksIGRpc3BsYXlfbmFtZTogJ0ZpbHRyb3MgZGUgY29sb3InIH0sXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAnUmVhZGVyJywgc3RhdHVzOiB0aGlzLlNjcmVlblJlYWRlck9iamVjdC5zdGF0dXMoKSwgZGlzcGxheV9uYW1lOiAnTGVjdHVyYSBlbiB2b3ogYWx0YScgfSxcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBvcGNpb25lcy5mb3JFYWNoKChvcGNpb24pID0+IHtcbiAgICAgICAgICAgICAgICBidWZmZXJMaXN0T3B0aW9ucy5hcHBlbmRDaGlsZCh0aGlzLmJ1aWxkT3B0aW9uKG9wY2lvbikpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGJ1ZmZlckxpc3RPcHRpb25zKTtcbiAgICAgICAgICAgIHRoaXMudmlld09wdGlvbnNPbiA9ICF0aGlzLnZpZXdPcHRpb25zT247XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuY2VycmFyTW9kYWwgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuYW5pbWFjaW9uRW5Qcm9ncmVzbykge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1lbnNhamUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXllZWFzaXN0LWluaXRpYWwtbWVzc2FnZScpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGZseU1lbnUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmx5X21lbnUnKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFuaW1hY2lvbkVuUHJvZ3Jlc28gPSB0cnVlO1xuICAgICAgICAgICAgICAgIC8vIENyZWEgdW5hIGFuaW1hY2nDs24gdXNhbmRvIGxhIEFQSSBkZSBhbmltYWNpw7NuIGRlIENTU1xuICAgICAgICAgICAgICAgIGNvbnN0IGFuaW1hY2lvbiA9IG1lbnNhamUgPT09IG51bGwgfHwgbWVuc2FqZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogbWVuc2FqZS5hbmltYXRlKFtcbiAgICAgICAgICAgICAgICAgICAgeyBvcGFjaXR5OiAxLCB0cmFuc2Zvcm06ICd0cmFuc2xhdGVZKDApJyB9LFxuICAgICAgICAgICAgICAgICAgICB7IG9wYWNpdHk6IDAsIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVkoLTEwMCUpJyB9XG4gICAgICAgICAgICAgICAgXSwge1xuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMzAwLFxuICAgICAgICAgICAgICAgICAgICBlYXNpbmc6ICdlYXNlLW91dCcgLy8gVGlwbyBkZSBpbnRlcnBvbGFjacOzblxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IGZseUFuaW1hdGlvbiA9IGZseU1lbnUgPT09IG51bGwgfHwgZmx5TWVudSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZmx5TWVudS5hbmltYXRlKFtcbiAgICAgICAgICAgICAgICAgICAgeyB0b3A6ICc3MHB4JyB9LFxuICAgICAgICAgICAgICAgICAgICB7IHRvcDogJzMwcHgnIH0sIC8vIEVzdGFkbyBmaW5hbFxuICAgICAgICAgICAgICAgIF0sIHtcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDEwMDAsXG4gICAgICAgICAgICAgICAgICAgIGVhc2luZzogJ2Vhc2UnLCAvLyBGdW5jacOzbiBkZSB0ZW1wb3JpemFjacOzbiAocHVlZGVzIGNhbWJpYXJsYSBzZWfDum4gdHVzIG5lY2VzaWRhZGVzKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChhbmltYWNpb24gJiYgZmx5QW5pbWF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGFuaW1hY2lvbi5vbmZpbmlzaCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZW5zYWplKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVuc2FqZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hbmltYWNpb25FblByb2dyZXNvID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnaW5pdE1lc3NhZ2VDbG9zZScsICd0cnVlJyk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGZseUFuaW1hdGlvbi5vbmZpbmlzaCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmbHlNZW51KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmx5TWVudS5zdHlsZS50b3AgPSAnMzBweCc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBpbml0TWVzc2FnZVN0YXR1cyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdpbml0TWVzc2FnZUNsb3NlJyk7XG4gICAgICAgIGlmIChpbml0TWVzc2FnZVN0YXR1cyA9PSAndHJ1ZScpIHtcbiAgICAgICAgICAgIHRoaXMuaW5pdE1lc3NhZ2VDbG9zZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgQ3NzRXllZWFzc2lzdENsYXNzZXMudG9nZ2xlU3dpdGNoQ2xhc3NlcygpO1xuICAgICAgICBDc3NFeWVlYXNzaXN0Q2xhc3Nlcy5hZGRCdWZmZXJPcHRpb25zQ2xhc3MoKTtcbiAgICAgICAgQ3NzRXllZWFzc2lzdENsYXNzZXMuYWRkRmx5TWVudVN0eWxlKCk7XG4gICAgICAgIENzc0V5ZWVhc3Npc3RDbGFzc2VzLmFkZE9wdGlvbkZ1bmN0aW9uc0NsYXNzKCk7XG4gICAgICAgIHRoaXMuem9vbVN0YXR1cyA9IHpvb21TdGF0dXM7XG4gICAgICAgIHRoaXMuZmlsdGVyU3RhdHVzID0gZmlsdGVyU3RhdHVzO1xuICAgICAgICB0aGlzLnJlYWRlclN0YXR1cyA9IHJlYWRlclN0YXR1cztcbiAgICAgICAgY29uc3Qgc2F2ZWRab29tU3RhdHVzID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3pvb21TdGF0dXMnKTtcbiAgICAgICAgaWYgKHNhdmVkWm9vbVN0YXR1cykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0hheSB6b29tIHN0YXR1cyBndWFyZGFkbycsIEpTT04ucGFyc2Uoc2F2ZWRab29tU3RhdHVzKSk7XG4gICAgICAgICAgICB0aGlzLnpvb21TdGF0dXMgPSBKU09OLnBhcnNlKHNhdmVkWm9vbVN0YXR1cyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2F2ZWRGaWx0ZXJTdGF0dXMgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZmlsdGVyU3RhdHVzJyk7XG4gICAgICAgIGlmIChzYXZlZEZpbHRlclN0YXR1cykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0hheSBmaWx0ZXIgc3RhdHVzIGd1YXJkYWRvJywgSlNPTi5wYXJzZShzYXZlZEZpbHRlclN0YXR1cykpO1xuICAgICAgICAgICAgdGhpcy5maWx0ZXJTdGF0dXMgPSBKU09OLnBhcnNlKHNhdmVkRmlsdGVyU3RhdHVzKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzYXZlZFJlYWRlclN0YXR1cyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdyZWFkZXJTdGF0dXMnKTtcbiAgICAgICAgaWYgKHNhdmVkUmVhZGVyU3RhdHVzKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnSGF5IHJlYWRlciBzdGF0dXMgZ3VhcmRhZG8nLCBKU09OLnBhcnNlKHNhdmVkUmVhZGVyU3RhdHVzKSk7XG4gICAgICAgICAgICB0aGlzLnJlYWRlclN0YXR1cyA9IEpTT04ucGFyc2Uoc2F2ZWRSZWFkZXJTdGF0dXMpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuWm9vbU9iamVjdCA9IG5ldyBab29tKHRoaXMuem9vbVN0YXR1cyk7XG4gICAgICAgIHRoaXMuRmlsdGVyT2JqZWN0ID0gbmV3IEZpbHRlcih0aGlzLmZpbHRlclN0YXR1cyk7XG4gICAgICAgIHRoaXMuU2NyZWVuUmVhZGVyT2JqZWN0ID0gbmV3IFNjcmVlblJlYWRlcih0aGlzLnJlYWRlclN0YXR1cywgdGhpcy50b2tlbik7XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLnNob3dJbml0TWVzc2FnZSgpO1xuICAgICAgICB0aGlzLnNob3dGbHlNZW51KCk7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXZlbnQua2V5KTtcbiAgICAgICAgICAgIHRoaXMuWm9vbU9iamVjdC5hY3RpdmVab29tKHRoaXMuU2NyZWVuUmVhZGVyT2JqZWN0LmVuYWJsZSgpLCBldmVudCk7XG4gICAgICAgICAgICB0aGlzLlNjcmVlblJlYWRlck9iamVjdC5rZXliaW5kc1NjcmVlblJlYWRlcihldmVudCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzaG93Rmx5TWVudSgpIHtcbiAgICAgICAgY29uc3QgZGl2RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBkaXZFbGVtZW50LmlkID0gJ2ZseV9tZW51JztcbiAgICAgICAgZGl2RWxlbWVudC5jbGFzc05hbWUgPSAnZmx5X21lbnUnO1xuICAgICAgICBkaXZFbGVtZW50LnN0eWxlLnRvcCA9IHRoaXMuaW5pdE1lc3NhZ2VDbG9zZSA/ICczMHB4JyA6ICc3MHB4JztcbiAgICAgICAgZGl2RWxlbWVudC5hcHBlbmRDaGlsZChDc3NFeWVlYXNzaXN0Q2xhc3Nlcy5zdmdIdW1hbignIzAwNjQwMCcpKTtcbiAgICAgICAgZGl2RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuc2hvd09wdGlvbnMpO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGRpdkVsZW1lbnQpO1xuICAgIH1cbiAgICBzaG93SW5pdE1lc3NhZ2UoKSB7XG4gICAgICAgIGxldCBkaXZFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGRpdkVsZW1lbnQgPSBDc3NFeWVlYXNzaXN0Q2xhc3Nlcy5tYWluTWVzc2FnZShkaXZFbGVtZW50KTtcbiAgICAgICAgZGl2RWxlbWVudC5pZCA9ICdleWVlYXNpc3QtaW5pdGlhbC1tZXNzYWdlJztcbiAgICAgICAgaWYgKHRoaXMuaW5pdE1lc3NhZ2VDbG9zZSkge1xuICAgICAgICAgICAgZGl2RWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICB9XG4gICAgICAgIGxldCBkaXZFbGVtZW50Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGRpdkVsZW1lbnRDb250YWluZXIgPSBDc3NFeWVlYXNzaXN0Q2xhc3Nlcy5tZXNzYWdlQ29udGVudChkaXZFbGVtZW50Q29udGFpbmVyKTtcbiAgICAgICAgbGV0IHNwYW5FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICBzcGFuRWxlbWVudC50ZXh0Q29udGVudCA9ICdFc3RhIHDDoWdpbmEgY3VlbnRhIGNvbiBoZXJyYW1pZW50YXMgZGUgYWNjZXNpYmlsaWRhZC4gUGFyYSBhY3RpdmFyIHkvbyBkZXNhY3RpdmFyIGVzdGFzIGhlcnJhbWllbnRhcyBwcmVzaW9uYSBjbWQgKyBBIG8gaGF6IGNsaWNrIGVuIGVsIGJvdMOzbic7XG4gICAgICAgIGxldCBidXR0b25FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgIGJ1dHRvbkVsZW1lbnQgPSBDc3NFeWVlYXNzaXN0Q2xhc3Nlcy5jbG9zZUJ1dHRvbShidXR0b25FbGVtZW50KTtcbiAgICAgICAgYnV0dG9uRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuY2VycmFyTW9kYWwpO1xuICAgICAgICBidXR0b25FbGVtZW50LmFwcGVuZENoaWxkKENzc0V5ZWVhc3Npc3RDbGFzc2VzLnN2Z0Nsb3NlQnV0dG9tKCcjMDA2NDAwJykpO1xuICAgICAgICBkaXZFbGVtZW50Q29udGFpbmVyLmFwcGVuZENoaWxkKHNwYW5FbGVtZW50KTtcbiAgICAgICAgZGl2RWxlbWVudENvbnRhaW5lci5hcHBlbmRDaGlsZChDc3NFeWVlYXNzaXN0Q2xhc3Nlcy5zdmdIdW1hbignIzAwNjQwMCcsICcyMCcsICcyMCcpKTtcbiAgICAgICAgZGl2RWxlbWVudC5hcHBlbmRDaGlsZChkaXZFbGVtZW50Q29udGFpbmVyKTtcbiAgICAgICAgZGl2RWxlbWVudC5hcHBlbmRDaGlsZChidXR0b25FbGVtZW50KTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5pbnNlcnRCZWZvcmUoZGl2RWxlbWVudCwgZG9jdW1lbnQuYm9keS5maXJzdENoaWxkKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiRmlsdGVyU2VydmljZSIsImNvbnN0cnVjdG9yIiwidGhpcyIsImhhc0luc2VydGVkQWNjZXNzIiwiYWN0aXZlX2ZpbHRlciIsImNvbG9yQmxpbmRuZXNzQ2xhc3NlcyIsInZpc2lvbkNsYXNzZXMiLCJjc3NGaWx0ZXIiLCJzdmdGaWx0ZXJUZW1wbGF0ZSIsImFwbGljYXJGaWx0cm8iLCJmaWx0cm8iLCJyZW1vdmVUZXN0cyIsInRvZ2dsZVRlc3QiLCJjb25zb2xlIiwiZXJyb3IiLCJ0ZXN0VHlwZSIsInRlc3RDbGFzcyIsImluc2VydEZpbGVzIiwiZG9jdW1lbnQiLCJkb2N1bWVudEVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJzdmciLCJjc3MiLCJib2R5IiwiaW5zZXJ0QWRqYWNlbnRIVE1MIiwiaSIsImxlbmd0aCIsInJlbW92ZSIsIkNzc0ZpbHRlckNsYXNzZXMiLCJhZGRGaWx0ZXJCdWZmZXJTdHlsZUNsYXNzIiwic3R5bGVTaGVldCIsInN0eWxlU2hlZXRzIiwiaW5zZXJ0UnVsZSIsImNzc1J1bGVzIiwiYWRkRmlsdGVyT3B0aW9uc1N0eWxlQ2xhc3MiLCJhZGRGaWx0ZXJTdHlsZUNsYXNzIiwiRmlsdGVyIiwiZW5hYmxlRmlsdGVyIiwiZmlsdGVyVmlld09uIiwic3RhcnRGaWx0ZXIiLCJldmVudCIsImNvbXBvbmVudCIsInRhcmdldCIsImZpbHRlclNlcnZpY2UiLCJ0ZXh0Q29udGVudCIsInNob3dGaWx0ZXJPcHRpb25zTGlzdCIsImZpbHRlcl9idWZmZXJfaW5zdGFuY2UiLCJnZXRFbGVtZW50QnlJZCIsImJ1ZmZlckxpc3REaXZFbGVtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsImlkIiwiZm9yRWFjaCIsImZpbHRlciIsImFwcGVuZENoaWxkIiwiYnVpbGRGaWx0ZXJPcHRpb24iLCJzdGF0dXMiLCJ0b2dnbGVTdGF0dXMiLCJzaG93RmlsdGVyT3B0aW9ucyIsImltYWdlIiwic3JjIiwic3R5bGUiLCJ3aWR0aCIsImJvcmRlclJhZGl1cyIsImRpdkVsZW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiZmlsdGVyT3B0aW9uIiwib3B0aW9uRGl2RWxlbWVudCIsIl9fYXdhaXRlciIsInRoaXNBcmciLCJfYXJndW1lbnRzIiwiUCIsImdlbmVyYXRvciIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZnVsZmlsbGVkIiwidmFsdWUiLCJzdGVwIiwibmV4dCIsImUiLCJyZWplY3RlZCIsInJlc3VsdCIsImRvbmUiLCJ0aGVuIiwiYXBwbHkiLCJTY3JlZW5SZWFkZXIiLCJ1c2VTY3JlZW5SZWFkZXIiLCJ0b2tlbiIsIl9hIiwic3ludGgiLCJ3aW5kb3ciLCJzcGVlY2hTeW50aGVzaXMiLCJzY3JlZW5SZWFkZXJTdGF0dXMiLCJzZWxlY3RlZEFydGljbGUiLCJzZWxlY3RlZExpbmsiLCJhcnRpY2xlSW5kZXgiLCJsaW5rSW5kZXgiLCJjb250cm9sbGVyIiwiQWJvcnRDb250cm9sbGVyIiwidGFsayIsInRleHQiLCJjYW5jZWwiLCJzcGVhayIsIlNwZWVjaFN5bnRoZXNpc1V0dGVyYW5jZSIsImNhbmNlbFRhbGsiLCJhYm9ydCIsInRhZyIsImZpcnN0U2NyaXB0VGFnIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJwYXJlbnROb2RlIiwiaW5zZXJ0QmVmb3JlIiwiZW5hYmxlIiwic2F5V2VsY29tZSIsInNheUdvb2RiYXkiLCJrZXliaW5kc1NjcmVlblJlYWRlciIsImNhbmNlbFJlYWRlciIsInJlUmVhZCIsImFjdGl2ZVNjcmVlblJlYWRlciIsIm1vdmVCZXR3ZWVuQ29udGVudCIsIm1vdmVCZXR3ZWVuTGlua3MiLCJnZXRJbWFnZSIsImZldGNoIiwiZ2V0RGVzY3JpcHRpb24iLCJibG9iIiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsImFwcGVuZCIsIm9wdGlvbnMiLCJtZXRob2QiLCJoZWFkZXJzIiwic2lnbmFsIiwicmVzcG9uc2UiLCJjYXRjaCIsIm5hbWUiLCJ1bmRlZmluZWQiLCJqc29uIiwibWVzc2FnZSIsInJlYWRDaGlsZHMiLCJhcnRpY2xlIiwibm9kZU5hbWUiLCJwbGF5ZXIiLCJZVCIsIlBsYXllciIsInNldFRpbWVvdXQiLCJwbGF5VmlkZW8iLCJpbWciLCJhbHQiLCJkZXNjcmlwdGlvbiIsIm5vZGVUeXBlIiwiTm9kZSIsIlRFWFRfTk9ERSIsInRyaW0iLCJjaGlsZCIsIkFycmF5IiwiZnJvbSIsImNoaWxkTm9kZXMiLCJ0YWdzIiwiY3RybEtleSIsImtleSIsInRvTG93ZXJDYXNlIiwibG9nIiwiY2xpY2siLCJsaW5rcyIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJ0YWdOYW1lIiwiZm9jdXMiLCJDc3NDbGFzc2VzIiwiYWRkWm9vbU1lc3NhZ2VUZXh0Qm94Q2xhc3MiLCJab29tU2VydmljZSIsIlRSQU5TSVRJT05fRFVSQVRJT04iLCJsZXZlbCIsIm1vdXNlWCIsIm1vdXNlWSIsInBhbkVuZ2FnZVRpbWVvdXQiLCJwYW5VcGRhdGVJbnRlcnZhbCIsImNhbGxiYWNrVGltZW91dCIsInN1cHBvcnRzVHJhbnNmb3JtcyIsImtleXVwRXZlbnQiLCJrZXlDb2RlIiwib3V0IiwibW91c2VNb3ZlRXZlbnQiLCJjbGllbnRYIiwiY2xpZW50WSIsInRyYW5zaXRpb24iLCJtYWduaWZ5IiwicmVjdCIsInNjYWxlIiwic2Nyb2xsT2Zmc2V0IiwiZ2V0U2Nyb2xsT2Zmc2V0IiwiaGVpZ2h0IiwieCIsImlubmVyV2lkdGgiLCJ5IiwiaW5uZXJIZWlnaHQiLCJ0cmFuc2Zvcm0iLCJvcmlnaW4iLCJ0cmFuc2Zvcm1PcmlnaW4iLCJwb3NpdGlvbiIsImxlZnQiLCJ0b3AiLCJwYW4iLCJyYW5nZVgiLCJyYW5nZVkiLCJzY3JvbGwiLCJzY3JvbGxYIiwicGFnZVhPZmZzZXQiLCJzY3JvbGxZIiwicGFnZVlPZmZzZXQiLCJ0byIsImVsZW1lbnQiLCJwYWRkaW5nIiwiYm91bmRzIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiTWF0aCIsIm1heCIsIm1pbiIsImNhbGN1bGF0ZVBhblVwZGF0ZUludGVydmFsIiwiY2FsbGJhY2siLCJzZXRJbnRlcnZhbCIsImNsZWFyVGltZW91dCIsImNsZWFySW50ZXJ2YWwiLCJPcHRpb25zWm9vbSIsIlpvb20iLCJlbmFibGVab29tT3B0aW9ucyIsInpvb21TdGF0dXMiLCJhY3RpdmVfbWVzc2FnZSIsImRlYWN0aXZlX21lc3NhZ2UiLCJ0b29nbGVab29tIiwiem9vbVNlcnZpY2UiLCJ0b29nbGVTdGF0dXMiLCJhY3RpdmVab29tIiwic2NyZWVuUmVhZGVyQWN0aXZlIiwiaW5pdGlhbENsaWNrRXZlbnQiLCJzaG93Qm94TWVzc2FnZSIsInpvb21fbWVzc2FnZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJDc3NFeWVlYXNzaXN0Q2xhc3NlcyIsIm1haW5NZXNzYWdlIiwiZGl2IiwiZGlzcGxheSIsImFsaWduSXRlbXMiLCJhbGlnbkNvbnRlbnQiLCJqdXN0aWZ5SXRlbXMiLCJqdXN0aWZ5Q29udGVudCIsImJhY2tncm91bmRDb2xvciIsInpJbmRleCIsImNvbG9yIiwibWVzc2FnZUNvbnRlbnQiLCJ0ZXh0QWxpZ24iLCJmbGV4IiwiY2xvc2VCdXR0b20iLCJidXR0b24iLCJiYWNrZ3JvdW5kIiwiYm9yZGVyIiwibWFyZ2luIiwiY3Vyc29yIiwiYWxpZ25TZWxmIiwiYWRkRmx5TWVudVN0eWxlIiwic3ZnSHVtYW4iLCJzdmdFbGVtZW50IiwiY3JlYXRlRWxlbWVudE5TIiwic2V0QXR0cmlidXRlIiwicGF0aEVsZW1lbnQiLCJzdmdDbG9zZUJ1dHRvbSIsImFkZEJ1ZmZlck9wdGlvbnNDbGFzcyIsInRvZ2dsZVN3aXRjaENsYXNzZXMiLCJ0b29nbGVTd2l0Y2hDbGFzcyIsInRvZ2dsZVN3aXRjaENpcmNsZSIsInRvZ2dsZVN3aXRjaEFjdGl2ZSIsInRvZ2dsZVN3aXRjaEFuaW1hdGlvbiIsImFkZE9wdGlvbkZ1bmN0aW9uc0NsYXNzIiwiZmlsdGVyU3RhdHVzIiwicmVhZGVyU3RhdHVzIiwiYW5pbWFjaW9uRW5Qcm9ncmVzbyIsImluaXRNZXNzYWdlQ2xvc2UiLCJ2aWV3T3B0aW9uc09uIiwiYnVpbGRPcHRpb24iLCJvcGNpb24iLCJvcHRpb24iLCJvcHRpb25Db250YWluZXIiLCJvcHRpb25OYW1lRWxlbWVudCIsImRpc3BsYXlfbmFtZSIsInBhZGRpbmdSaWdodCIsInRvZ2dsZVN3aXRjaCIsIlpvb21PYmplY3QiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiSlNPTiIsInN0cmluZ2lmeSIsIkZpbHRlck9iamVjdCIsIm9wdGlvbnNMaXN0IiwicGFyZW50RWxlbWVudCIsIlNjcmVlblJlYWRlck9iamVjdCIsInRvZ2dsZSIsInNob3dPcHRpb25zIiwiYnVmZmVyTGlzdE9wdGlvbnMiLCJjZXJyYXJNb2RhbCIsIm1lbnNhamUiLCJmbHlNZW51IiwiYW5pbWFjaW9uIiwiYW5pbWF0ZSIsIm9wYWNpdHkiLCJkdXJhdGlvbiIsImVhc2luZyIsImZseUFuaW1hdGlvbiIsIm9uZmluaXNoIiwiZ2V0SXRlbSIsInNhdmVkWm9vbVN0YXR1cyIsInBhcnNlIiwic2F2ZWRGaWx0ZXJTdGF0dXMiLCJzYXZlZFJlYWRlclN0YXR1cyIsInN0YXJ0Iiwic2hvd0luaXRNZXNzYWdlIiwic2hvd0ZseU1lbnUiLCJkaXZFbGVtZW50Q29udGFpbmVyIiwic3BhbkVsZW1lbnQiLCJidXR0b25FbGVtZW50IiwiZmlyc3RDaGlsZCJdLCJzb3VyY2VSb290IjoiIn0=